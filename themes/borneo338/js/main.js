var Ya=Object.defineProperty,Za=(s,e,t)=>e in s?Ya(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,S=(s,e,t)=>(Za(s,typeof e!="symbol"?e+"":e,t),t),tn=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)},_=(s,e,t)=>(tn(s,e,"read from private field"),t?t.call(s):e.get(s)),O=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},re=(s,e,t,i)=>(tn(s,e,"write to private field"),i?i.call(s,t):e.set(s,t),t),B=(s,e,t)=>(tn(s,e,"access private method"),t),Ja={exports:{}};(function(s){(function(e,t){var i=t(e,e.document,Date);e.lazySizes=i,s.exports&&(s.exports=i)})(typeof window<"u"?window:{},function(t,i,n){var r,o;if(function(){var p,w={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};o=t.lazySizesConfig||t.lazysizesConfig||{};for(p in w)p in o||(o[p]=w[p])}(),!i||!i.getElementsByClassName)return{init:function(){},cfg:o,noSupport:!0};var a=i.documentElement,l=t.HTMLPictureElement,c="addEventListener",h="getAttribute",u=t[c].bind(t),d=t.setTimeout,f=t.requestAnimationFrame||d,m=t.requestIdleCallback,g=/^picture$/i,y=["load","error","lazyincluded","_lazyloaded"],E={},L=Array.prototype.forEach,P=function(p,w){return E[w]||(E[w]=new RegExp("(\\s|^)"+w+"(\\s|$)")),E[w].test(p[h]("class")||"")&&E[w]},D=function(p,w){P(p,w)||p.setAttribute("class",(p[h]("class")||"").trim()+" "+w)},G=function(p,w){var T;(T=P(p,w))&&p.setAttribute("class",(p[h]("class")||"").replace(T," "))},he=function(p,w,T){var C=T?c:"removeEventListener";T&&he(p,w),y.forEach(function(x){p[C](x,w)})},z=function(p,w,T,C,x){var F=i.createEvent("Event");return T||(T={}),T.instance=r,F.initEvent(w,!C,!x),F.detail=T,p.dispatchEvent(F),F},oe=function(p,w){var T;!l&&(T=t.picturefill||o.pf)?(w&&w.src&&!p[h]("srcset")&&p.setAttribute("srcset",w.src),T({reevaluate:!0,elements:[p]})):w&&w.src&&(p.src=w.src)},U=function(p,w){return(getComputedStyle(p,null)||{})[w]},Se=function(p,w,T){for(T=T||p.offsetWidth;T<o.minSize&&w&&!p._lazysizesWidth;)T=w.offsetWidth,w=w.parentNode;return T},K=function(){var p,w,T=[],C=[],x=T,F=function(){var Y=x;for(x=T.length?C:T,p=!0,w=!1;Y.length;)Y.shift()();p=!1},Q=function(Y,N){p&&!N?Y.apply(this,arguments):(x.push(Y),w||(w=!0,(i.hidden?d:f)(F)))};return Q._lsFlush=F,Q}(),me=function(p,w){return w?function(){K(p)}:function(){var T=this,C=arguments;K(function(){p.apply(T,C)})}},be=function(p){var w,T=0,C=o.throttleDelay,x=o.ricTimeout,F=function(){w=!1,T=n.now(),p()},Q=m&&x>49?function(){m(F,{timeout:x}),x!==o.ricTimeout&&(x=o.ricTimeout)}:me(function(){d(F)},!0);return function(Y){var N;(Y=Y===!0)&&(x=33),!w&&(w=!0,N=C-(n.now()-T),N<0&&(N=0),Y||N<9?Q():d(Q,N))}},Ye=function(p){var w,T,C=99,x=function(){w=null,p()},F=function(){var Q=n.now()-T;Q<C?d(F,C-Q):(m||x)(x)};return function(){T=n.now(),w||(w=d(F,C))}},kt=function(){var p,w,T,C,x,F,Q,Y,N,ne,ue,Ce,Ft=/^img$/i,Di=/^iframe$/i,en="onscroll"in t&&!/(gle|ing)bot/.test(navigator.userAgent),I=0,W=0,j=0,H=-1,ee=function(A){j--,(!A||j<0||!A.target)&&(j=0)},Le=function(A){return Ce==null&&(Ce=U(i.body,"visibility")=="hidden"),Ce||!(U(A.parentNode,"visibility")=="hidden"&&U(A,"visibility")=="hidden")},V=function(A,R){var $,Z=A,fe=Le(A);for(Y-=R,ue+=R,N-=R,ne+=R;fe&&(Z=Z.offsetParent)&&Z!=i.body&&Z!=a;)fe=(U(Z,"opacity")||1)>0,fe&&U(Z,"overflow")!="visible"&&($=Z.getBoundingClientRect(),fe=ne>$.left&&N<$.right&&ue>$.top-1&&Y<$.bottom+1);return fe},q=function(){var A,R,$,Z,fe,se,Fe,ke,qe,Je,gt,It,Ie=r.elements;if((C=o.loadMode)&&j<8&&(A=Ie.length)){for(R=0,H++;R<A;R++)if(!(!Ie[R]||Ie[R]._lazyRace)){if(!en||r.prematureUnveil&&r.prematureUnveil(Ie[R])){Te(Ie[R]);continue}if((!(ke=Ie[R][h]("data-expand"))||!(se=ke*1))&&(se=W),Je||(Je=!o.expand||o.expand<1?a.clientHeight>500&&a.clientWidth>500?500:370:o.expand,r._defEx=Je,gt=Je*o.expFactor,It=o.hFac,Ce=null,W<gt&&j<1&&H>2&&C>2&&!i.hidden?(W=gt,H=0):C>1&&H>1&&j<6?W=Je:W=I),qe!==se&&(F=innerWidth+se*It,Q=innerHeight+se,Fe=se*-1,qe=se),$=Ie[R].getBoundingClientRect(),(ue=$.bottom)>=Fe&&(Y=$.top)<=Q&&(ne=$.right)>=Fe*It&&(N=$.left)<=F&&(ue||ne||N||Y)&&(o.loadHidden||Le(Ie[R]))&&(w&&j<3&&!ke&&(C<3||H<4)||V(Ie[R],se))){if(Te(Ie[R]),fe=!0,j>9)break}else!fe&&w&&!Z&&j<4&&H<4&&C>2&&(p[0]||o.preloadAfterLoad)&&(p[0]||!ke&&(ue||ne||N||Y||Ie[R][h](o.sizesAttr)!="auto"))&&(Z=p[0]||Ie[R])}Z&&!fe&&Te(Z)}},te=be(q),Ee=function(A){var R=A.target;if(R._lazyCache){delete R._lazyCache;return}ee(A),D(R,o.loadedClass),G(R,o.loadingClass),he(R,ve),z(R,"lazyloaded")},Ne=me(Ee),ve=function(A){Ne({target:A.target})},xe=function(A,R){var $=A.getAttribute("data-load-mode")||o.iframeLoadMode;$==0?A.contentWindow.location.replace(R):$==1&&(A.src=R)},Ze=function(A){var R,$=A[h](o.srcsetAttr);(R=o.customMedia[A[h]("data-media")||A[h]("media")])&&A.setAttribute("media",R),$&&A.setAttribute("srcset",$)},ae=me(function(A,R,$,Z,fe){var se,Fe,ke,qe,Je,gt;(Je=z(A,"lazybeforeunveil",R)).defaultPrevented||(Z&&($?D(A,o.autosizesClass):A.setAttribute("sizes",Z)),Fe=A[h](o.srcsetAttr),se=A[h](o.srcAttr),fe&&(ke=A.parentNode,qe=ke&&g.test(ke.nodeName||"")),gt=R.firesLoad||"src"in A&&(Fe||se||qe),Je={target:A},D(A,o.loadingClass),gt&&(clearTimeout(T),T=d(ee,2500),he(A,ve,!0)),qe&&L.call(ke.getElementsByTagName("source"),Ze),Fe?A.setAttribute("srcset",Fe):se&&!qe&&(Di.test(A.nodeName)?xe(A,se):A.src=se),fe&&(Fe||qe)&&oe(A,{src:se})),A._lazyRace&&delete A._lazyRace,G(A,o.lazyClass),K(function(){var It=A.complete&&A.naturalWidth>1;(!gt||It)&&(It&&D(A,o.fastLoadedClass),Ee(Je),A._lazyCache=!0,d(function(){"_lazyCache"in A&&delete A._lazyCache},9)),A.loading=="lazy"&&j--},!0)}),Te=function(A){if(!A._lazyRace){var R,$=Ft.test(A.nodeName),Z=$&&(A[h](o.sizesAttr)||A[h]("sizes")),fe=Z=="auto";(fe||!w)&&$&&(A[h]("src")||A.srcset)&&!A.complete&&!P(A,o.errorClass)&&P(A,o.lazyClass)||(R=z(A,"lazyunveilread").detail,fe&&v.updateElem(A,!0,A.offsetWidth),A._lazyRace=!0,j++,ae(A,R,fe,Z,$))}},Oe=Ye(function(){o.loadMode=3,te()}),Re=function(){o.loadMode==3&&(o.loadMode=2),Oe()},pe=function(){if(!w){if(n.now()-x<999){d(pe,999);return}w=!0,o.loadMode=3,te(),u("scroll",Re,!0)}};return{_:function(){x=n.now(),r.elements=i.getElementsByClassName(o.lazyClass),p=i.getElementsByClassName(o.lazyClass+" "+o.preloadClass),u("scroll",te,!0),u("resize",te,!0),u("pageshow",function(A){if(A.persisted){var R=i.querySelectorAll("."+o.loadingClass);R.length&&R.forEach&&f(function(){R.forEach(function($){$.complete&&Te($)})})}}),t.MutationObserver?new MutationObserver(te).observe(a,{childList:!0,subtree:!0,attributes:!0}):(a[c]("DOMNodeInserted",te,!0),a[c]("DOMAttrModified",te,!0),setInterval(te,999)),u("hashchange",te,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(A){i[c](A,te,!0)}),/d$|^c/.test(i.readyState)?pe():(u("load",pe),i[c]("DOMContentLoaded",te),d(pe,2e4)),r.elements.length?(q(),K._lsFlush()):te()},checkElems:te,unveil:Te,_aLSL:Re}}(),v=function(){var p,w=me(function(F,Q,Y,N){var ne,ue,Ce;if(F._lazysizesWidth=N,N+="px",F.setAttribute("sizes",N),g.test(Q.nodeName||""))for(ne=Q.getElementsByTagName("source"),ue=0,Ce=ne.length;ue<Ce;ue++)ne[ue].setAttribute("sizes",N);Y.detail.dataAttr||oe(F,Y.detail)}),T=function(F,Q,Y){var N,ne=F.parentNode;ne&&(Y=Se(F,ne,Y),N=z(F,"lazybeforesizes",{width:Y,dataAttr:!!Q}),N.defaultPrevented||(Y=N.detail.width,Y&&Y!==F._lazysizesWidth&&w(F,ne,N,Y)))},C=function(){var F,Q=p.length;if(Q)for(F=0;F<Q;F++)T(p[F])},x=Ye(C);return{_:function(){p=i.getElementsByClassName(o.autosizesClass),u("resize",x)},checkElems:x,updateElem:T}}(),b=function(){!b.i&&i.getElementsByClassName&&(b.i=!0,v._(),kt._())};return d(function(){o.init&&b()}),r={cfg:o,autoSizer:v,loader:kt,init:b,uP:oe,aC:D,rC:G,hC:P,fire:z,gW:Se,rAF:K},r})})(Ja);var Qa={exports:{}};/**
* SVGInject - Version 1.2.3
* A tiny, intuitive, robust, caching solution for injecting SVG files inline into the DOM.
*
* https://github.com/iconfu/svg-inject
*
* Copyright (c) 2018 INCORS, the creators of iconfu.com
* @license MIT License - https://github.com/iconfu/svg-inject/blob/master/LICENSE
*/(function(s){(function(e,t){var i="createElement",n="getElementsByTagName",r="length",o="style",a="title",l="undefined",c="setAttribute",h="getAttribute",u=null,d="__svgInject",f="--inject-",m=new RegExp(f+"\\d+","g"),g="LOAD_FAIL",y="SVG_NOT_SUPPORTED",E="SVG_INVALID",L=["src","alt","onload","onerror"],P=t[i]("a"),D=typeof SVGRect!=l,G={useCache:!0,copyAttributes:!0,makeIdsUnique:!0},he={clipPath:["clip-path"],"color-profile":u,cursor:u,filter:u,linearGradient:["fill","stroke"],marker:["marker","marker-end","marker-mid","marker-start"],mask:u,pattern:["fill","stroke"],radialGradient:["fill","stroke"]},z=1,oe=2,U=1,Se,K;function me(I){return K=K||new DOMParser,K.parseFromString(I,"text/xml")}function be(I){return Se=Se||new XMLSerializer,Se.serializeToString(I)}function Ye(I){return P.href=I,P.href}function kt(I,W,j){if(I){var H=new XMLHttpRequest;H.onreadystatechange=function(){if(H.readyState==4){var ee=H.status;ee==200?W(H.responseXML,H.responseText.trim()):(ee>=400||ee==0)&&j()}},H.open("GET",I,!0),H.send()}}function v(I,W){for(var j,H,ee,Le=I.attributes,V=0;V<Le[r];V++)if(j=Le[V],H=j.name,L.indexOf(H)==-1)if(ee=j.value,H==a){var q,te=W.firstElementChild;te&&te.localName.toLowerCase()==a?q=te:(q=t[i+"NS"]("http://www.w3.org/2000/svg",a),W.insertBefore(q,te)),q.textContent=ee}else W[c](H,ee)}function b(I,W){var j=f+U++,H=/url\("?#([a-zA-Z][\w:.-]*)"?\)/g,ee=I.querySelectorAll("[id]"),Le,V=W?[]:u,q,te={},Ee=[],Ne=!1,ve,xe;if(ee[r]){for(ve=0;ve<ee[r];ve++)q=ee[ve].localName,q in he&&(te[q]=1);for(q in te)(he[q]||[q]).forEach(function(pe){Ee.indexOf(pe)<0&&Ee.push(pe)});Ee[r]&&Ee.push(o);var Ze=I[n]("*"),ae=I,Te,Oe,Re;for(ve=-1;ae!=u;){if(ae.localName==o)Oe=ae.textContent,Re=Oe&&Oe.replace(H,function(pe,A){return V&&(V[A]=1),"url(#"+A+j+")"}),Re!==Oe&&(ae.textContent=Re);else if(ae.hasAttributes()){for(xe=0;xe<Ee[r];xe++)Te=Ee[xe],Oe=ae[h](Te),Re=Oe&&Oe.replace(H,function(pe,A){return V&&(V[A]=1),"url(#"+A+j+")"}),Re!==Oe&&ae[c](Te,Re);["xlink:href","href"].forEach(function(pe){var A=ae[h](pe);/^\s*#/.test(A)&&(A=A.trim(),ae[c](pe,A+j),V&&(V[A.substring(1)]=1))})}ae=Ze[++ve]}for(ve=0;ve<ee[r];ve++)Le=ee[ve],(!V||V[Le.id])&&(Le.id+=j,Ne=!0)}return Ne}function p(I){return I.replace(m,f+U++)}function w(I,W,j,H){if(W){W[c]("data-inject-url",j);var ee=I.parentNode;if(ee){H.copyAttributes&&v(I,W);var Le=H.beforeInject,V=Le&&Le(I,W)||W;ee.replaceChild(V,I),I[d]=z,F(I);var q=H.afterInject;q&&q(I,V)}}else N(I,H)}function T(){for(var I={},W=arguments,j=0;j<W[r];j++){var H=W[j];for(var ee in H)H.hasOwnProperty(ee)&&(I[ee]=H[ee])}return I}function C(I){var W=t[n]("head")[0];if(W){var j=t[i](o);j.type="text/css",j.appendChild(t.createTextNode(I)),W.appendChild(j)}}function x(I,W){if(W){var j;try{j=me(I)}catch{return u}return j[n]("parsererror")[r]?u:j.documentElement}else{var H=t.createElement("div");return H.innerHTML=I,H.firstElementChild}}function F(I){I.removeAttribute("onload")}function Q(I){console.error("SVGInject: "+I)}function Y(I,W,j){I[d]=oe,j.onFail?j.onFail(I,W):Q(W)}function N(I,W){F(I),Y(I,E,W)}function ne(I,W){F(I),Y(I,y,W)}function ue(I,W){Y(I,g,W)}function Ce(I){I.onload=u,I.onerror=u}function Ft(I){Q("no img element")}function Di(I,W){var j=T(G,W),H={};D&&C('img[onload^="'+I+'("]{visibility:hidden;}');function ee(V,q){q=T(j,q);var te=function(Ee){var Ne=function(){var Te=q.onAllFinish;Te&&Te(),Ee&&Ee()};if(V&&typeof V[r]!=l){var ve=0,xe=V[r];if(xe==0)Ne();else for(var Ze=function(){++ve==xe&&Ne()},ae=0;ae<xe;ae++)Le(V[ae],q,Ze)}else Le(V,q,Ne)};return typeof Promise==l?te():new Promise(te)}function Le(V,q,te){if(V){var Ee=V[d];if(Ee)Array.isArray(Ee)?Ee.push(te):te();else{if(Ce(V),!D){ne(V,q),te();return}var Ne=q.beforeLoad,ve=Ne&&Ne(V)||V[h]("src");if(!ve){ve===""&&ue(V,q),te();return}var xe=[];V[d]=xe;var Ze=function(){te(),xe.forEach(function(R){R()})},ae=Ye(ve),Te=q.useCache,Oe=q.makeIdsUnique,Re=function(R){Te&&(H[ae].forEach(function($){$(R)}),H[ae]=R)};if(Te){var pe=H[ae],A=function(R){if(R===g)ue(V,q);else if(R===E)N(V,q);else{var $=R[0],Z=R[1],fe=R[2],se;Oe&&($===u?(se=x(Z,!1),$=b(se,!1),R[0]=$,R[2]=$&&be(se)):$&&(Z=p(fe))),se=se||x(Z,!1),w(V,se,ae,q)}Ze()};if(typeof pe!=l){pe.isCallbackQueue?pe.push(A):A(pe);return}else{var pe=[];pe.isCallbackQueue=!0,H[ae]=pe}}kt(ae,function(R,$){var Z=R instanceof Document?R.documentElement:x($,!0),fe=q.afterLoad;if(fe){var se=fe(Z,$)||Z;if(se){var Fe=typeof se=="string";$=Fe?se:be(Z),Z=Fe?x(se,!0):se}}if(Z instanceof SVGElement){var ke=u;if(Oe&&(ke=b(Z,!1)),Te){var qe=ke&&be(Z);Re([ke,$,qe])}w(V,Z,ae,q)}else N(V,q),Re(E);Ze()},function(){ue(V,q),Re(g),Ze()})}}else Ft()}return ee.setOptions=function(V){j=T(j,V)},ee.create=Di,ee.err=function(V,q){V?V[d]!=oe&&(Ce(V),D?(F(V),ue(V,j)):ne(V,j),q&&(F(V),V.src=q)):Ft()},e[I]=ee,ee}var en=Di("SVGInject");s.exports=en})(window,document)})(Qa);const M=(s,e=1e4)=>(s=parseFloat(s+"")||0,Math.round((s+Number.EPSILON)*e)/e),Ln=function(s){if(!(s&&s instanceof Element&&s.offsetParent))return!1;const e=s.scrollHeight>s.clientHeight,t=window.getComputedStyle(s).overflowY,i=t.indexOf("hidden")!==-1,n=t.indexOf("visible")!==-1;return e&&!i&&!n},ds=function(s,e=void 0){return!(!s||s===document.body||e&&s===e)&&(Ln(s)?s:ds(s.parentElement,e))},Ke=function(s){var e=new DOMParser().parseFromString(s,"text/html").body;if(e.childElementCount>1){for(var t=document.createElement("div");e.firstChild;)t.appendChild(e.firstChild);return t}return e.firstChild},Zn=s=>`${s||""}`.split(" ").filter(e=>!!e),Xe=(s,e,t)=>{s&&Zn(e).forEach(i=>{s.classList.toggle(i,t||!1)})};let Bt=class{constructor(e){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}};const _t={passive:!1};let el=class{constructor(e,{start:t=()=>!0,move:i=()=>{},end:n=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=t,this.moveCallback=i,this.endCallback=n;for(const r of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[r]=this[r].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,_t),this.element.addEventListener("touchstart",this.onTouchStart,_t),this.element.addEventListener("touchmove",this.onMove,_t),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(e){if(!e.buttons||e.button!==0)return;const t=new Bt(e);this.currentPointers.some(i=>i.id===t.id)||this.triggerPointerStart(t,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(e){for(const t of Array.from(e.changedTouches||[]))this.triggerPointerStart(new Bt(t),e);window.addEventListener("blur",this.onWindowBlur)}onMove(e){const t=this.currentPointers.slice(),i="changedTouches"in e?Array.from(e.changedTouches||[]).map(r=>new Bt(r)):[new Bt(e)],n=[];for(const r of i){const o=this.currentPointers.findIndex(a=>a.id===r.id);o<0||(n.push(r),this.currentPointers[o]=r)}n.length&&this.moveCallback(e,this.currentPointers.slice(),t)}onPointerEnd(e){e.buttons>0&&e.button!==0||(this.triggerPointerEnd(e,new Bt(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(e){for(const t of Array.from(e.changedTouches||[]))this.triggerPointerEnd(e,new Bt(t))}triggerPointerStart(e,t){return!!this.startCallback(t,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}triggerPointerEnd(e,t){const i=this.currentPointers.findIndex(n=>n.id===t.id);i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(e,t,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,_t),this.element.removeEventListener("touchstart",this.onTouchStart,_t),this.element.removeEventListener("touchmove",this.onMove,_t),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}};function mr(s,e){return e?Math.sqrt(Math.pow(e.clientX-s.clientX,2)+Math.pow(e.clientY-s.clientY,2)):0}function pr(s,e){return e?{clientX:(s.clientX+e.clientX)/2,clientY:(s.clientY+e.clientY)/2}:s}const Cn=s=>typeof s=="object"&&s!==null&&s.constructor===Object&&Object.prototype.toString.call(s)==="[object Object]",Pe=(s,...e)=>{const t=e.length;for(let i=0;i<t;i++){const n=e[i]||{};Object.entries(n).forEach(([r,o])=>{const a=Array.isArray(o)?[]:{};s[r]||Object.assign(s,{[r]:a}),Cn(o)?Object.assign(s[r],Pe(a,o)):Array.isArray(o)?Object.assign(s,{[r]:[...o]}):Object.assign(s,{[r]:o})})}return s},sn=function(s,e){return s.split(".").reduce((t,i)=>typeof t=="object"?t[i]:void 0,e)};let us=class{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(const t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}setOptions(e){this.options=e?Pe({},this.constructor.defaults,e):{};for(const[t,i]of Object.entries(this.option("on")||{}))this.on(t,i)}option(e,...t){let i=sn(e,this.options);return i&&typeof i=="function"&&(i=i.call(this,this,...t)),i}optionFor(e,t,i,...n){let r=sn(t,e);var o;typeof(o=r)!="string"||isNaN(o)||isNaN(parseFloat(o))||(r=parseFloat(r)),r==="true"&&(r=!0),r==="false"&&(r=!1),r&&typeof r=="function"&&(r=r.call(this,this,e,...n));let a=sn(t,this.options);return a&&typeof a=="function"?r=a.call(this,this,e,...n,r):r===void 0&&(r=a),r===void 0?i:r}cn(e){const t=this.options.classes;return t&&t[e]||""}localize(e,t=[]){e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,(i,n,r)=>{let o="";return r?o=this.option(`${n[0]+n.toLowerCase().substring(1)}.l10n.${r}`):n&&(o=this.option(`l10n.${n}`)),o||(o=i),o});for(let i=0;i<t.length;i++)e=e.split(t[i][0]).join(t[i][1]);return e=e.replace(/\{\{(.*?)\}\}/g,(i,n)=>n)}on(e,t){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),this.events||(this.events=new Map),i.forEach(n=>{let r=this.events.get(n);r||(this.events.set(n,[]),r=[]),r.includes(t)||r.push(t),this.events.set(n,r)})}off(e,t){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),i.forEach(n=>{const r=this.events.get(n);if(Array.isArray(r)){const o=r.indexOf(t);o>-1&&r.splice(o,1)}})}emit(e,...t){[...this.events.get(e)||[]].forEach(i=>i(this,...t)),e!=="*"&&this.emit("*",e,...t)}};Object.defineProperty(us,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.33"}),Object.defineProperty(us,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});let Jn=class extends us{constructor(e={}){super(e),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(e={}){const t=new Map;for(const[i,n]of Object.entries(e)){const r=this.option(i),o=this.plugins[i];o||r===!1?o&&r===!1&&(o.detach(),delete this.plugins[i]):t.set(i,new n(this,r||{}))}for(const[i,n]of t)this.plugins[i]=n,n.attach()}detachPlugins(e){e=e||Object.keys(this.plugins);for(const t of e){const i=this.plugins[t];i&&i.detach(),delete this.plugins[t]}return this.emit("detachPlugins"),this}};var ie;(function(s){s[s.Init=0]="Init",s[s.Error=1]="Error",s[s.Ready=2]="Ready",s[s.Panning=3]="Panning",s[s.Mousemove=4]="Mousemove",s[s.Destroy=5]="Destroy"})(ie||(ie={}));const Qe=["a","b","c","d","e","f"],uo={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},tl={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:uo},gr='<circle cx="25" cy="25" r="20"></circle>',Qn='<div class="f-spinner"><svg viewBox="0 0 50 50">'+gr+gr+"</svg></div>",Me=s=>s&&s!==null&&s instanceof Element&&"nodeType"in s,J=(s,e)=>{s&&Zn(e).forEach(t=>{s.classList.remove(t)})},k=(s,e)=>{s&&Zn(e).forEach(t=>{s.classList.add(t)})},Vi={a:1,b:0,c:0,d:1,e:0,f:0},il=1e5,zi=1e4,Be="mousemove",br="drag",vr="content";let nn=null,rn=null;class Ot extends Jn{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return rn===null&&(rn=window.matchMedia("(hover: none)").matches),rn}get isMobile(){return nn===null&&(nn=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),nn}get panMode(){return this.options.panMode!==Be||this.isTouchDevice?br:Be}get panOnlyZoomed(){const e=this.options.panOnlyZoomed;return e==="auto"?this.isTouchDevice:e}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:e,b:t}=this.current;return Math.sqrt(e*e+t*t)||1}get targetScale(){const{a:e,b:t}=this.target;return Math.sqrt(e*e+t*t)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:e}=this;return e.fullWidth/e.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:e,contentRect:t}=this,i=Math.max(e.height/t.fitHeight,e.width/t.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const e of Qe){const t=e=="e"||e==="f"?1e-4:1e-5;if(Math.abs(this.target[e]-this.current[e])>t)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(e,t={},i={}){var n;if(super(t),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ie.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Vi)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Vi)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");this.container=e,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},Ot.Plugins),i)),this.emit("attachPlugins"),this.emit("init");const r=this.content;if(r.addEventListener("load",this.onLoad),r.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){e.classList.add(this.cn("isLoading"));const o=Ke(Qn);!e.contains(r)||r.parentElement instanceof HTMLPictureElement?this.spinner=e.appendChild(o):this.spinner=((n=r.parentElement)===null||n===void 0?void 0:n.insertBefore(o,r))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){const{container:e}=this,t=this.cn(vr);let i=this.option(vr)||e.querySelector(`.${t}`);if(i||(i=e.querySelector("img,picture")||e.firstElementChild,i&&k(i,t)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){const{spinner:e,container:t,state:i}=this;e&&(e.remove(),this.spinner=null),this.option("spinner")&&t.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===ie.Init?this.enable():this.updateMetrics()}onError(){this.state!==ie.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=ie.Error,this.emit("error"))}getNextScale(e){const{fullScale:t,targetScale:i,coverScale:n,maxScale:r,minScale:o}=this;let a=o;switch(e){case"toggleMax":a=i-o<.5*(r-o)?r:o;break;case"toggleCover":a=i-o<.5*(n-o)?n:o;break;case"toggleZoom":a=i-o<.5*(t-o)?t:o;break;case"iterateZoom":let l=[1,t,r].sort((h,u)=>h-u),c=l.findIndex(h=>h>i+1e-5);a=l[c]||1}return a}attachObserver(){var e;const t=()=>{const{container:i,containerRect:n}=this;return Math.abs(n.width-i.getBoundingClientRect().width)>.1||Math.abs(n.height-i.getBoundingClientRect().height)>.1};this.resizeObserver||window.ResizeObserver===void 0||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(t()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{t()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),(e=this.resizeObserver)===null||e===void 0||e.observe(this.container)}detachObserver(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()}attachEvents(){const{container:e}=this;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new el(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(Be,this.onMouseMove)}detachEvents(){var e;const{container:t}=this;t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("wheel",this.onWheel,{passive:!1}),(e=this.pointerTracker)===null||e===void 0||e.stop(),this.pointerTracker=null,document.removeEventListener(Be,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();const e=this.friction,t=this.option("maxVelocity");for(const i of Qe)e?(this.velocity[i]*=1-e,t&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],t),-1*t)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(const e of Qe)e==="e"&&this.isBouncingX||e==="f"&&this.isBouncingY||(this.velocity[e]=(1/(1-this.friction)-1)*(this.target[e]-this.current[e]))}checkBounds(e=0,t=0){const{current:i}=this,n=i.e+e,r=i.f+t,o=this.getBounds(),{x:a,y:l}=o,c=a.min,h=a.max,u=l.min,d=l.max;let f=0,m=0;return c!==1/0&&n<c?f=c-n:h!==1/0&&n>h&&(f=h-n),u!==1/0&&r<u?m=u-r:d!==1/0&&r>d&&(m=d-r),Math.abs(f)<1e-4&&(f=0),Math.abs(m)<1e-4&&(m=0),Object.assign(Object.assign({},o),{xDiff:f,yDiff:m,inBounds:!f&&!m})}clampTargetBounds(){const{target:e}=this,{x:t,y:i}=this.getBounds();t.min!==1/0&&(e.e=Math.max(e.e,t.min)),t.max!==1/0&&(e.e=Math.min(e.e,t.max)),i.min!==1/0&&(e.f=Math.max(e.f,i.min)),i.max!==1/0&&(e.f=Math.min(e.f,i.max))}calculateContentDim(e=this.current){const{content:t,contentRect:i}=this,{fitWidth:n,fitHeight:r,fullWidth:o,fullHeight:a}=i;let l=o,c=a;if(this.option("zoom")||this.angle!==0){const h=!(t instanceof HTMLImageElement)&&(window.getComputedStyle(t).maxWidth==="none"||window.getComputedStyle(t).maxHeight==="none"),u=h?o:n,d=h?a:r,f=this.getMatrix(e),m=new DOMPoint(0,0).matrixTransform(f),g=new DOMPoint(0+u,0).matrixTransform(f),y=new DOMPoint(0+u,0+d).matrixTransform(f),E=new DOMPoint(0,0+d).matrixTransform(f),L=Math.abs(y.x-m.x),P=Math.abs(y.y-m.y),D=Math.abs(E.x-g.x),G=Math.abs(E.y-g.y);l=Math.max(L,D),c=Math.max(P,G)}return{contentWidth:l,contentHeight:c}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===Be||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:e}=this,{x:t,y:i,xDiff:n,yDiff:r}=this.checkBounds(),o=this.option("maxVelocity");let a=this.velocity.e,l=this.velocity.f;n!==0?(this.isBouncingX=!0,n*a<=0?a+=.14*n:(a=.14*n,t.min!==1/0&&(this.target.e=Math.max(e.e,t.min)),t.max!==1/0&&(this.target.e=Math.min(e.e,t.max))),o&&(a=Math.max(Math.min(a,o),-1*o))):this.isBouncingX=!1,r!==0?(this.isBouncingY=!0,r*l<=0?l+=.14*r:(l=.14*r,i.min!==1/0&&(this.target.f=Math.max(e.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(e.f,i.max))),o&&(l=Math.max(Math.min(l,o),-1*o))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=a),this.isBouncingY&&(this.velocity.f=l)}enable(){const{content:e}=this,t=new DOMMatrixReadOnly(window.getComputedStyle(e).transform);for(const i of Qe)this.current[i]=this.target[i]=t[i];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=ie.Ready,this.emit("ready")}onClick(e){var t;e.type==="click"&&e.detail===0&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&((t=this.pointerTracker)===null||t===void 0||t.clear(),this.trackingPoints=[],this.startDecelAnim());const i=e.target;if(!i||e.defaultPrevented)return;if(i.hasAttribute("disabled"))return e.preventDefault(),void e.stopPropagation();if((()=>{const f=window.getSelection();return f&&f.type==="Range"})()&&!i.closest("button"))return;const n=i.closest("[data-panzoom-action]"),r=i.closest("[data-panzoom-change]"),o=n||r,a=o&&Me(o)?o.dataset:null;if(a){const f=a.panzoomChange,m=a.panzoomAction;if((f||m)&&e.preventDefault(),f){let g={};try{g=JSON.parse(f)}catch{console&&console.warn("The given data was not valid JSON")}return void this.applyChange(g)}if(m)return void(this[m]&&this[m]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return e.preventDefault(),void e.stopPropagation();if(i.closest("[data-fancybox]"))return;const l=this.content.getBoundingClientRect(),c=this.dragStart;if(c.time&&!this.canZoomOut()&&(Math.abs(l.x-c.x)>2||Math.abs(l.y-c.y)>2))return;this.dragStart.time=0;const h=f=>{this.option("zoom",e)&&f&&typeof f=="string"&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(f)&&typeof this[f]=="function"&&(e.preventDefault(),this[f]({event:e}))},u=this.option("click",e),d=this.option("dblClick",e);d?(this.clicks++,this.clicks==1&&(this.clickTimer=setTimeout(()=>{this.clicks===1?(this.emit("click",e),!e.defaultPrevented&&u&&h(u)):(this.emit("dblClick",e),e.defaultPrevented||h(d)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",e),!e.defaultPrevented&&u&&h(u))}addTrackingPoint(e){const t=this.trackingPoints.filter(i=>i.time>Date.now()-100);t.push(e),this.trackingPoints=t}onPointerDown(e,t,i){var n;if(this.option("touch",e)===!1)return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const r=this.content.getBoundingClientRect();if(this.dragStart={x:r.x,y:r.y,top:r.top,left:r.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===Be&&this.targetScale>1)return e.preventDefault(),e.stopPropagation(),!1;const o=e.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(o.nodeName)||o.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;(n=window.getSelection())===null||n===void 0||n.removeAllRanges()}if(e.type==="mousedown")["A","BUTTON"].includes(o.nodeName)||e.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(t),this.emit("touchStart",e)),!0}onPointerMove(e,t,i){if(this.option("touch",e)===!1||!this.isDragging||t.length<2&&this.panOnlyZoomed&&M(this.targetScale)<=M(this.minScale)||(this.emit("touchMove",e),e.defaultPrevented))return;this.addTrackingPoint(t[0]);const{content:n}=this,r=pr(i[0],i[1]),o=pr(t[0],t[1]);let a=0,l=0;if(t.length>1){const P=n.getBoundingClientRect();a=r.clientX-P.left-.5*P.width,l=r.clientY-P.top-.5*P.height}const c=mr(i[0],i[1]),h=mr(t[0],t[1]);let u=c?h/c:1,d=o.clientX-r.clientX,f=o.clientY-r.clientY;this.dragOffset.x+=d,this.dragOffset.y+=f,this.dragOffset.time=Date.now()-this.dragStart.time;let m=M(this.targetScale)===M(this.minScale)&&this.option("lockAxis");if(m&&!this.lockedAxis)if(m==="xy"||m==="y"||e.type==="touchmove"){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();const P=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=P>45&&P<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,d=0,f=0}else this.lockedAxis=m;if(ds(e.target,this.content)&&(m="x",this.dragOffset.y=0),m&&m!=="xy"&&this.lockedAxis!==m&&M(this.targetScale)===M(this.minScale))return;e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging"));const g=this.checkBounds(d,f);this.option("rubberband")?(this.isInfinite!=="x"&&(g.xDiff>0&&d<0||g.xDiff<0&&d>0)&&(d*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*g.xDiff))),this.isInfinite!=="y"&&(g.yDiff>0&&f<0||g.yDiff<0&&f>0)&&(f*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*g.yDiff)))):(g.xDiff&&(d=0),g.yDiff&&(f=0));const y=this.targetScale,E=this.minScale,L=this.maxScale;y<.5*E&&(u=Math.max(u,E)),y>1.5*L&&(u=Math.min(u,L)),this.lockedAxis==="y"&&M(y)===M(E)&&(d=0),this.lockedAxis==="x"&&M(y)===M(E)&&(f=0),this.applyChange({originX:a,originY:l,panX:d,panY:f,scale:u,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(e,t,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(t),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),ds(e.target,this.content)&&this.lockedAxis==="y"&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==ie.Destroy&&(e.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var e;const t=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const P of Qe)this.velocity[P]=0;this.target.e=this.current.e,this.target.f=this.current.f,J(this.container,"is-scaling"),J(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:i}=this,n=i[0],r=i[i.length-1];let o=0,a=0,l=0;r&&n&&(o=r.clientX-n.clientX,a=r.clientY-n.clientY,l=r.time-n.time);const c=((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1;c!==1&&(o*=c,a*=c);let h=0,u=0,d=0,f=0,m=this.option("decelFriction");const g=this.targetScale;if(l>0){d=Math.abs(o)>3?o/(l/30):0,f=Math.abs(a)>3?a/(l/30):0;const P=this.option("maxVelocity");P&&(d=Math.max(Math.min(d,P),-1*P),f=Math.max(Math.min(f,P),-1*P))}d&&(h=d/(1/(1-m)-1)),f&&(u=f/(1/(1-m)-1)),(this.option("lockAxis")==="y"||this.option("lockAxis")==="xy"&&this.lockedAxis==="y"&&M(g)===this.minScale)&&(h=d=0),(this.option("lockAxis")==="x"||this.option("lockAxis")==="xy"&&this.lockedAxis==="x"&&M(g)===this.minScale)&&(u=f=0);const y=this.dragOffset.x,E=this.dragOffset.y,L=this.option("dragMinThreshold")||0;Math.abs(y)<L&&Math.abs(E)<L&&(h=u=0,d=f=0),(this.option("zoom")&&(g<this.minScale-1e-5||g>this.maxScale+1e-5)||t&&!h&&!u)&&(m=.35),this.applyChange({panX:h,panY:u,friction:m}),this.emit("decel",d,f,y,E)}onWheel(e){var t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(r,o){return Math.abs(o)>Math.abs(r)?o:r});const i=Math.max(-1,Math.min(1,t));if(this.emit("wheel",e,i),this.panMode===Be||e.defaultPrevented)return;const n=this.option("wheel");n==="pan"?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):n==="zoom"&&this.option("zoom")!==!1&&this.zoomWithWheel(e)}onMouseMove(e){this.panWithMouse(e)}onKeydown(e){e.key==="Escape"&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:e,target:t,content:i,contentRect:n}=this,r=Object.assign({},Vi);for(const y of Qe){const E=y=="e"||y==="f"?zi:il;r[y]=M(e[y],E),Math.abs(t[y]-e[y])<(y=="e"||y==="f"?.51:.001)&&(e[y]=t[y])}let{a:o,b:a,c:l,d:c,e:h,f:u}=r,d=`matrix(${o}, ${a}, ${l}, ${c}, ${h}, ${u})`,f=i.parentElement instanceof HTMLPictureElement?i.parentElement:i;if(this.option("transformParent")&&(f=f.parentElement||f),f.style.transform===d)return;f.style.transform=d;const{contentWidth:m,contentHeight:g}=this.calculateContentDim();n.width=m,n.height=g,this.emit("afterTransform")}updateMetrics(e=!1){var t;if(!this||this.state===ie.Destroy||this.isContentLoading)return;const i=Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1),{container:n,content:r}=this,o=r instanceof HTMLImageElement,a=n.getBoundingClientRect(),l=getComputedStyle(this.container);let c=a.width*i,h=a.height*i;const u=parseFloat(l.paddingTop)+parseFloat(l.paddingBottom),d=c-(parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),f=h-u;this.containerRect={width:c,height:h,innerWidth:d,innerHeight:f};let m=this.option("width")||"auto",g=this.option("height")||"auto";m==="auto"&&(m=parseFloat(r.dataset.width||"")||(z=>{let oe=0;return oe=z instanceof HTMLImageElement?z.naturalWidth:z instanceof SVGElement?z.width.baseVal.value:Math.max(z.offsetWidth,z.scrollWidth),oe||0})(r)),g==="auto"&&(g=parseFloat(r.dataset.height||"")||(z=>{let oe=0;return oe=z instanceof HTMLImageElement?z.naturalHeight:z instanceof SVGElement?z.height.baseVal.value:Math.max(z.offsetHeight,z.scrollHeight),oe||0})(r));let y=r.parentElement instanceof HTMLPictureElement?r.parentElement:r;this.option("transformParent")&&(y=y.parentElement||y);const E=y.getAttribute("style")||"";y.style.setProperty("transform","none","important"),o&&(y.style.width="",y.style.height=""),y.offsetHeight;const L=r.getBoundingClientRect();let P=L.width*i,D=L.height*i,G=0,he=0;o&&(Math.abs(m-P)>1||Math.abs(g-D)>1)&&({width:P,height:D,top:G,left:he}=((z,oe,U,Se)=>{const K=U/Se;return K>z/oe?(U=z,Se=z/K):(U=oe*K,Se=oe),{width:U,height:Se,top:.5*(oe-Se),left:.5*(z-U)}})(P,D,m,g)),this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:L.top-a.top+G,bottom:a.bottom-L.bottom+G,left:L.left-a.left+he,right:a.right-L.right+he,fitWidth:P,fitHeight:D,width:P,height:D,fullWidth:m,fullHeight:g}),y.style.cssText=E,o&&(y.style.width=`${P}px`,y.style.height=`${D}px`),this.setTransform(),e!==!0&&this.emit("refresh"),this.ignoreBounds||(M(this.targetScale)<M(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===ie.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){const{contentWidth:e,contentHeight:t}=this.calculateContentDim(this.target),{targetScale:i,lockedAxis:n}=this,{fitWidth:r,fitHeight:o}=this.contentRect;let a=0,l=0,c=0,h=0;const u=this.option("infinite");if(u===!0||n&&u===n)a=-1/0,c=1/0,l=-1/0,h=1/0;else{let{containerRect:d,contentRect:f}=this,m=M(r*i,zi),g=M(o*i,zi),{innerWidth:y,innerHeight:E}=d;if(d.width===m&&(y=d.width),d.width===g&&(E=d.height),e>y){c=.5*(e-y),a=-1*c;let L=.5*(f.right-f.left);a+=L,c+=L}if(r>y&&e<y&&(a-=.5*(r-y),c-=.5*(r-y)),t>E){h=.5*(t-E),l=-1*h;let L=.5*(f.bottom-f.top);l+=L,h+=L}o>E&&t<E&&(a-=.5*(o-E),c-=.5*(o-E))}return{x:{min:a,max:c},y:{min:l,max:h}}}getBounds(){const e=this.option("bounds");return e!=="auto"?e:this.calculateBounds()}updateControls(){const e=this,t=e.container,{panMode:i,contentRect:n,targetScale:r,minScale:o}=e;let a=o,l=e.option("click")||!1;l&&(a=e.getNextScale(l));let c=e.canZoomIn(),h=e.canZoomOut(),u=i===br&&!!this.option("touch"),d=h&&u;if(u&&(M(r)<M(o)&&!this.panOnlyZoomed&&(d=!0),(M(n.width,1)>M(n.fitWidth,1)||M(n.height,1)>M(n.fitHeight,1))&&(d=!0)),M(n.width*r,1)<M(n.fitWidth,1)&&(d=!1),i===Be&&(d=!1),Xe(t,this.cn("isDraggable"),d),!this.option("zoom"))return;let f=c&&M(a)>M(r),m=!f&&!d&&h&&M(a)<M(r);Xe(t,this.cn("canZoomIn"),f),Xe(t,this.cn("canZoomOut"),m);for(const g of t.querySelectorAll("[data-panzoom-action]")){let y=!1,E=!1;switch(g.dataset.panzoomAction){case"zoomIn":c?y=!0:E=!0;break;case"zoomOut":h?y=!0:E=!0;break;case"toggleZoom":case"iterateZoom":c||h?y=!0:E=!0;const L=g.querySelector("g");L&&(L.style.display=c?"":"none")}y?(g.removeAttribute("disabled"),g.removeAttribute("tabindex")):E&&(g.setAttribute("disabled",""),g.setAttribute("tabindex","-1"))}}panTo({x:e=this.target.e,y:t=this.target.f,scale:i=this.targetScale,friction:n=this.option("friction"),angle:r=0,originX:o=0,originY:a=0,flipX:l=!1,flipY:c=!1,ignoreBounds:h=!1}){this.state!==ie.Destroy&&this.applyChange({panX:e-this.target.e,panY:t-this.target.f,scale:i/this.targetScale,angle:r,originX:o,originY:a,friction:n,flipX:l,flipY:c,ignoreBounds:h})}applyChange({panX:e=0,panY:t=0,scale:i=1,angle:n=0,originX:r=-this.current.e,originY:o=-this.current.f,friction:a=this.option("friction"),flipX:l=!1,flipY:c=!1,ignoreBounds:h=!1,bounce:u=this.option("bounce")}){const d=this.state;if(d===ie.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=a||0,this.ignoreBounds=h;const{current:f}=this,m=f.e,g=f.f,y=this.getMatrix(this.target);let E=new DOMMatrix().translate(m,g).translate(r,o).translate(e,t);if(this.option("zoom")){if(!h){const L=this.targetScale,P=this.minScale,D=this.maxScale;L*i<P&&(i=P/L),L*i>D&&(i=D/L)}E=E.scale(i)}E=E.translate(-r,-o).translate(-m,-g).multiply(y),n&&(E=E.rotate(n)),l&&(E=E.scale(-1,1)),c&&(E=E.scale(1,-1));for(const L of Qe)L!=="e"&&L!=="f"&&(E[L]>this.minScale+1e-5||E[L]<this.minScale-1e-5)?this.target[L]=E[L]:this.target[L]=M(E[L],zi);(this.targetScale<this.scale||Math.abs(i-1)>.1||this.panMode===Be||u===!1)&&!h&&this.clampTargetBounds(),d===ie.Init?this.animate():this.isResting||(this.state=ie.Panning,this.requestTick())}stop(e=!1){if(this.state===ie.Init||this.state===ie.Destroy)return;const t=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const i of Qe)this.velocity[i]=0,e==="current"?this.current[i]=this.target[i]:e==="target"&&(this.target[i]=this.current[i]);this.setTransform(),J(this.container,"is-scaling"),J(this.container,"is-animating"),this.isTicking=!1,this.state=ie.Ready,t&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),k(this.container,"is-animating"),this.isScaling&&k(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(e,t=this.option("mouseMoveFriction")){if(this.pmme=e,this.panMode!==Be||!e||M(this.targetScale)<=M(this.minScale))return;this.emit("mouseMove",e);const{container:i,containerRect:n,contentRect:r}=this,o=n.width,a=n.height,l=i.getBoundingClientRect(),c=(e.clientX||0)-l.left,h=(e.clientY||0)-l.top;let{contentWidth:u,contentHeight:d}=this.calculateContentDim(this.target);const f=this.option("mouseMoveFactor");f>1&&(u!==o&&(u*=f),d!==a&&(d*=f));let m=.5*(u-o)-c/o*100/100*(u-o);m+=.5*(r.right-r.left);let g=.5*(d-a)-h/a*100/100*(d-a);g+=.5*(r.bottom-r.top),this.applyChange({panX:m-this.target.e,panY:g-this.target.f,friction:t})}zoomWithWheel(e){if(this.state===ie.Destroy||this.state===ie.Init)return;const t=Date.now();if(t-this.pwt<45)return void e.preventDefault();this.pwt=t;var i=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(c,h){return Math.abs(h)>Math.abs(c)?h:c});const n=Math.max(-1,Math.min(1,i)),{targetScale:r,maxScale:o,minScale:a}=this;let l=r*(100+45*n)/100;M(l)<M(a)&&M(r)<=M(a)?(this.cwd+=Math.abs(n),l=a):M(l)>M(o)&&M(r)>=M(o)?(this.cwd+=Math.abs(n),l=o):(this.cwd=0,l=Math.max(Math.min(l,o),a)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),M(l)!==M(r)&&this.zoomTo(l,{event:e}))}canZoomIn(){return this.option("zoom")&&(M(this.contentRect.width,1)<M(this.contentRect.fitWidth,1)||M(this.targetScale)<M(this.maxScale))}canZoomOut(){return this.option("zoom")&&M(this.targetScale)>M(this.minScale)}zoomIn(e=1.25,t){this.zoomTo(this.targetScale*e,t)}zoomOut(e=.8,t){this.zoomTo(this.targetScale*e,t)}zoomToFit(e){this.zoomTo("fit",e)}zoomToCover(e){this.zoomTo("cover",e)}zoomToFull(e){this.zoomTo("full",e)}zoomToMax(e){this.zoomTo("max",e)}toggleZoom(e){this.zoomTo(this.getNextScale("toggleZoom"),e)}toggleMax(e){this.zoomTo(this.getNextScale("toggleMax"),e)}toggleCover(e){this.zoomTo(this.getNextScale("toggleCover"),e)}iterateZoom(e){this.zoomTo("next",e)}zoomTo(e=1,{friction:t="auto",originX:i="auto",originY:n="auto",event:r}={}){if(this.isContentLoading||this.state===ie.Destroy)return;const{targetScale:o,fullScale:a,maxScale:l,coverScale:c}=this;if(this.stop(),this.panMode===Be&&(r=this.pmme||r),r||i==="auto"||n==="auto"){const u=this.content.getBoundingClientRect(),d=this.container.getBoundingClientRect(),f=r?r.clientX:d.left+.5*d.width,m=r?r.clientY:d.top+.5*d.height;i=f-u.left-.5*u.width,n=m-u.top-.5*u.height}let h=1;typeof e=="number"?h=e:e==="full"?h=a:e==="cover"?h=c:e==="max"?h=l:e==="fit"?h=1:e==="next"&&(h=this.getNextScale("iterateZoom")),h=h/o||1,t=t==="auto"?h>1?.15:.25:t,this.applyChange({scale:h,originX:i,originY:n,friction:t}),r&&this.panMode===Be&&this.panWithMouse(r,t)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.height-(t.top+.5*t.fitHeight)-i.f,scale:e.width/t.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.innerHeight-(t.top+.5*t.fitHeight)-i.f,scale:e.height/t.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:e}=this,t=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");e.classList.toggle(t);const n=e.classList.contains(t);n?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(n?"enterFS":"exitFS")}getMatrix(e=this.current){const{a:t,b:i,c:n,d:r,e:o,f:a}=e;return new DOMMatrix([t,i,n,r,o,a])}reset(e){if(this.state!==ie.Init&&this.state!==ie.Destroy){this.stop("current");for(const t of Qe)this.target[t]=Vi[t];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=e===void 0?this.option("friction"):e,this.state=ie.Panning,this.requestTick())}}destroy(){this.stop(),this.state=ie.Destroy,this.detachEvents(),this.detachObserver();const{container:e,content:t}=this,i=this.option("classes")||{};for(const n of Object.values(i))e.classList.remove(n+"");t&&(t.removeEventListener("load",this.onLoad),t.removeEventListener("error",this.onError)),this.detachPlugins()}}Object.defineProperty(Ot,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:tl}),Object.defineProperty(Ot,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const yr=function(s,e){let t=!0;return(...i)=>{t&&(t=!1,s(...i),setTimeout(()=>{t=!0},e))}},wr=(s,e)=>{let t=[];return s.childNodes.forEach(i=>{i.nodeType!==Node.ELEMENT_NODE||e&&!i.matches(e)||t.push(i)}),t},sl={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}};var ge;(function(s){s[s.Init=0]="Init",s[s.Ready=1]="Ready",s[s.Destroy=2]="Destroy"})(ge||(ge={}));const on=s=>{if(typeof s=="string"||s instanceof HTMLElement)s={html:s};else{const e=s.thumb;e!==void 0&&(typeof e=="string"&&(s.thumbSrc=e),e instanceof HTMLImageElement&&(s.thumbEl=e,s.thumbElSrc=e.src,s.thumbSrc=e.src),delete s.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},s)},nl=(s={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},s);class He extends us{constructor(e,t){super(t),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}}const rl={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2};class fo extends He{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let e=this.list;if(!e){e=document.createElement("ul"),k(e,this.cn("list")),e.setAttribute("role","tablist");const t=this.instance.container;t.appendChild(e),k(t,this.cn("hasDots")),this.list=e}return e}refresh(){var e;const t=this.instance.pages.length,i=Math.min(2,this.option("minCount")),n=Math.max(2e3,this.option("maxCount")),r=this.option("dynamicFrom");if(t<i||t>n)return void this.cleanup();const o=typeof r=="number"&&t>5&&t>=r,a=!this.list||this.isDynamic!==o||this.list.children.length!==t;a&&this.cleanup();const l=this.build();if(Xe(l,this.cn("isDynamic"),!!o),a)for(let u=0;u<t;u++)l.append(this.createItem(u));let c,h=0;for(const u of[...l.children]){const d=h===this.instance.page;d&&(c=u),Xe(u,this.cn("isCurrent"),d),(e=u.children[0])===null||e===void 0||e.setAttribute("aria-selected",d?"true":"false");for(const f of["isBeforePrev","isPrev","isNext","isAfterNext"])J(u,this.cn(f));h++}if(c=c||l.firstChild,o&&c){const u=c.previousElementSibling,d=u&&u.previousElementSibling;k(u,this.cn("isPrev")),k(d,this.cn("isBeforePrev"));const f=c.nextElementSibling,m=f&&f.nextElementSibling;k(f,this.cn("isNext")),k(m,this.cn("isAfterNext"))}this.isDynamic=o}createItem(e=0){var t;const i=document.createElement("li");i.setAttribute("role","presentation");const n=Ke(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+""));return i.appendChild(n),(t=i.children[0])===null||t===void 0||t.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,J(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(fo,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:rl});const Ni="disabled",ji="next",Sr="prev";class mo extends He{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){const e=this.instance,t=e.pages.length,i=e.page;if(t<2)return void this.cleanup();this.build();let n=this.prev,r=this.next;n&&r&&(n.removeAttribute(Ni),r.removeAttribute(Ni),e.isInfinite||(i<=0&&n.setAttribute(Ni,""),i>=t-1&&r.setAttribute(Ni,"")))}addBtn(e){var t;const i=this.instance,n=document.createElement("button");n.setAttribute("tabindex","0"),n.setAttribute("title",i.localize(`{{${e.toUpperCase()}}}`)),k(n,this.cn("button")+" "+this.cn(e===ji?"isNext":"isPrev"));const r=i.isRTL?e===ji?Sr:ji:e;var o;return n.innerHTML=i.localize(this.option(`${r}Tpl`)),n.dataset[`carousel${o=e,o?o.match("^[a-z]")?o.charAt(0).toUpperCase()+o.substring(1):o:""}`]="true",(t=this.container)===null||t===void 0||t.appendChild(n),n}build(){const e=this.instance.container,t=this.cn("container");let{container:i,prev:n,next:r}=this;i||(i=e.querySelector("."+t),this.isDom=!!i),i||(i=document.createElement("div"),k(i,t),e.appendChild(i)),this.container=i,r||(r=i.querySelector("[data-carousel-next]")),r||(r=this.addBtn(ji)),this.next=r,n||(n=i.querySelector("[data-carousel-prev]")),n||(n=this.addBtn(Sr)),this.prev=n}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(mo,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class po extends He{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(e){this.target=this.instance,this.nav=e,this.attachEvents()}addAsNavFor(e){this.nav=this.instance,this.target=e,this.attachEvents()}attachEvents(){const{nav:e,target:t}=this;e&&t&&(e.options.initialSlide=t.options.initialPage,e.state===ge.Ready?this.onNavReady(e):e.on("ready",this.onNavReady),t.state===ge.Ready?this.onTargetReady(t):t.on("ready",this.onTargetReady))}onNavReady(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(e,t,i){this.onNavTouch(e,e.panzoom,i)}onNavTouch(e,t,i){var n,r;if(Math.abs(t.dragOffset.x)>3||Math.abs(t.dragOffset.y)>3)return;const o=i.target,{nav:a,target:l}=this;if(!a||!l||!o)return;const c=o.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!c)return;const h=parseInt(c.dataset.index||"",10)||0,u=l.getPageForSlide(h),d=a.getPageForSlide(h);a.slideTo(d),l.slideTo(u,{friction:((r=(n=this.nav)===null||n===void 0?void 0:n.plugins)===null||r===void 0?void 0:r.Sync.option("friction"))||0}),this.markSelectedSlide(h)}onNavCreateSlide(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}onTargetChange(){var e,t;const{target:i,nav:n}=this;if(!i||!n||n.state!==ge.Ready||i.state!==ge.Ready)return;const r=(t=(e=i.pages[i.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index,o=n.getPageForSlide(r);this.markSelectedSlide(r),n.slideTo(o,n.prevPage===null&&i.prevPage===null?{friction:0}:void 0)}markSelectedSlide(e){const t=this.nav;t&&t.state===ge.Ready&&(this.selectedIndex=e,[...t.slides].map(i=>{i.el&&i.el.classList[i.index===e?"add":"remove"]("is-nav-selected")}))}attach(){const e=this;let t=e.options.target,i=e.options.nav;t?e.addAsNavFor(t):i&&e.addAsTargetFor(i)}detach(){const e=this,t=e.nav,i=e.target;t&&(t.off("ready",e.onNavReady),t.off("createSlide",e.onNavCreateSlide),t.off("Panzoom.click",e.onNavClick),t.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,i&&(i.off("ready",e.onTargetReady),i.off("refresh",e.onTargetChange),i.off("change",e.onTargetChange)),e.target=null}}Object.defineProperty(po,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const ol={Navigation:mo,Dots:fo,Sync:po},Hi="animationend",Er="isSelected",qi="slide";class ft extends Jn{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===ge.Ready}get isInfinite(){let e=!1;const{contentDim:t,viewportDim:i,pages:n,slides:r}=this,o=r[0];return n.length>=2&&o&&t+o.dim>=i&&(e=this.option("infinite")),e}get isRTL(){return this.option("direction")==="rtl"}get isHorizontal(){return this.option("axis")==="x"}constructor(e,t={},i={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ge.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),typeof e=="string"&&(e=document.querySelector(e)),!e||!Me(e))throw new Error("No Element found");this.container=e,this.slideNext=yr(this.slideNext.bind(this),150),this.slidePrev=yr(this.slidePrev.bind(this),150),this.userOptions=t,this.userPlugins=i,queueMicrotask(()=>{this.processOptions()})}processOptions(){var e,t;const i=Pe({},ft.defaults,this.userOptions);let n="";const r=i.breakpoints;if(r&&Cn(r))for(const[o,a]of Object.entries(r))window.matchMedia(o).matches&&Cn(a)&&(n+=o,Pe(i,a));n===this.bp&&this.state!==ge.Init||(this.bp=n,this.state===ge.Ready&&(i.initialSlide=((t=(e=this.pages[this.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index)||0),this.state!==ge.Init&&this.destroy(),super.setOptions(i),this.option("enabled")===!1?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=ge.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},ft.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=ge.Ready,this.emit("ready")}initLayout(){const{container:e}=this,t=this.option("classes");k(e,this.cn("container")),Xe(e,t.isLTR,!this.isRTL),Xe(e,t.isRTL,this.isRTL),Xe(e,t.isVertical,!this.isHorizontal),Xe(e,t.isHorizontal,this.isHorizontal);let i=this.option("viewport")||e.querySelector(`.${t.viewport}`);i||(i=document.createElement("div"),k(i,t.viewport),i.append(...wr(e,`.${t.slide}`)),e.prepend(i)),i.addEventListener("scroll",this.onScroll);let n=this.option("track")||e.querySelector(`.${t.track}`);n||(n=document.createElement("div"),k(n,t.track),n.append(...Array.from(i.childNodes))),n.setAttribute("aria-live","polite"),i.contains(n)||i.prepend(n),this.viewport=i,this.track=n,this.emit("initLayout")}initSlides(){const{track:e}=this;if(!e)return;const t=[...this.slides],i=[];[...wr(e,`.${this.cn(qi)}`)].forEach(n=>{if(Me(n)){const r=on({el:n,isDom:!0,index:this.slides.length});i.push(r)}});for(let n of[...this.option("slides",[])||[],...t])i.push(on(n));this.slides=i;for(let n=0;n<this.slides.length;n++)this.slides[n].index=n;for(const n of i)this.emit("beforeInitSlide",n,n.index),this.emit("initSlide",n,n.index);this.emit("initSlides")}setInitialPage(){const e=this.option("initialSlide");this.page=typeof e=="number"?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){const{track:e,pages:t,isHorizontal:i}=this;if(!e||!t.length)return;let n=this.page;t[n]||(this.page=n=0);const r=(t[n].pos||0)*(this.isRTL&&i?1:-1),o=i?`${r}px`:"0",a=i?"0":`${r}px`;e.style.transform=`translate3d(${o}, ${a}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const e=this.option("Panzoom")||{};this.panzoom=new Ot(this.viewport,Pe({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:t=>!(this.pages.length<2&&!t.options.infinite),bounds:()=>this.getBounds(),maxVelocity:t=>Math.abs(t.target[this.axis]-t.current[this.axis])<2*this.viewportDim?100:0},e)),this.panzoom.on("*",(t,i,...n)=>{this.emit(`Panzoom.${i}`,t,...n)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let e=[];const{contentDim:t,viewportDim:i}=this;let n=this.option("slidesPerPage");n=(n==="auto"||t<=i)&&this.option("fill")!==!1?1/0:parseFloat(n+"");let r=0,o=0,a=0;for(const l of this.slides)(!e.length||o+l.dim-i>.05||a>=n)&&(e.push(nl()),r=e.length-1,o=0,a=0),e[r].slides.push(l),o+=l.dim+l.gap,a++;return e}processPages(){const e=this.pages,{contentDim:t,viewportDim:i,isInfinite:n}=this,r=this.option("center"),o=this.option("fill"),a=o&&r&&t>i&&!n;if(e.forEach((h,u)=>{var d;h.index=u,h.pos=((d=h.slides[0])===null||d===void 0?void 0:d.pos)||0,h.dim=0;for(const[f,m]of h.slides.entries())h.dim+=m.dim,f<h.slides.length-1&&(h.dim+=m.gap);a&&h.pos+.5*h.dim<.5*i?h.pos=0:a&&h.pos+.5*h.dim>=t-.5*i?h.pos=t-i:r&&(h.pos+=-.5*(i-h.dim))}),e.forEach(h=>{o&&!n&&t>i&&(h.pos=Math.max(h.pos,0),h.pos=Math.min(h.pos,t-i)),h.pos=M(h.pos,1e3),h.dim=M(h.dim,1e3),Math.abs(h.pos)<=.1&&(h.pos=0)}),n)return e;const l=[];let c;return e.forEach(h=>{const u=Object.assign({},h);c&&u.pos===c.pos?(c.dim+=u.dim,c.slides=[...c.slides,...u.slides]):(u.index=l.length,c=u,l.push(u))}),l}getPageFromIndex(e=0){const t=this.pages.length;let i;return e=parseInt((e||0).toString())||0,i=this.isInfinite?(e%t+t)%t:Math.max(Math.min(e,t-1),0),i}getSlideMetrics(e){var t,i;const n=this.isHorizontal?"width":"height";let r=0,o=0,a=e.el;const l=!(!a||a.parentNode);if(a?r=parseFloat(a.dataset[n]||"")||0:(a=document.createElement("div"),a.style.visibility="hidden",(this.track||document.body).prepend(a)),k(a,this.cn(qi)+" "+e.class+" "+e.customClass),r)a.style[n]=`${r}px`,a.style[n==="width"?"height":"width"]="";else{l&&(this.track||document.body).prepend(a),r=a.getBoundingClientRect()[n]*Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1);let h=a[this.isHorizontal?"offsetWidth":"offsetHeight"];h-1>r&&(r=h)}const c=getComputedStyle(a);return c.boxSizing==="content-box"&&(this.isHorizontal?(r+=parseFloat(c.paddingLeft)||0,r+=parseFloat(c.paddingRight)||0):(r+=parseFloat(c.paddingTop)||0,r+=parseFloat(c.paddingBottom)||0)),o=parseFloat(c[this.isHorizontal?"marginRight":"marginBottom"])||0,l?(i=a.parentElement)===null||i===void 0||i.removeChild(a):e.el||a.remove(),{dim:M(r,1e3),gap:M(o,1e3)}}getBounds(){const{isInfinite:e,isRTL:t,isHorizontal:i,pages:n}=this;let r={min:0,max:0};if(e)r={min:-1/0,max:1/0};else if(n.length){const o=n[0].pos,a=n[n.length-1].pos;r=t&&i?{min:o,max:a}:{min:-1*a,max:-1*o}}return{x:i?r:{min:0,max:0},y:i?{min:0,max:0}:r}}repositionSlides(){let e,{isHorizontal:t,isRTL:i,isInfinite:n,viewport:r,viewportDim:o,contentDim:a,page:l,pages:c,slides:h,panzoom:u}=this,d=0,f=0,m=0,g=0;u?g=-1*u.current[this.axis]:c[l]&&(g=c[l].pos||0),e=t?i?"right":"left":"top",i&&t&&(g*=-1);for(const P of h){const D=P.el;D?(e==="top"?(D.style.right="",D.style.left=""):D.style.top="",P.index!==d?D.style[e]=f===0?"":`${M(f,1e3)}px`:D.style[e]="",m+=P.dim+P.gap,d++):f+=P.dim+P.gap}if(n&&m&&r){let P=getComputedStyle(r),D="padding",G=t?"Right":"Bottom",he=parseFloat(P[D+(t?"Left":"Top")]);g-=he,o+=he,o+=parseFloat(P[D+G]);for(const z of h)z.el&&(M(z.pos)<M(o)&&M(z.pos+z.dim+z.gap)<M(g)&&M(g)>M(a-o)&&(z.el.style[e]=`${M(f+m,1e3)}px`),M(z.pos+z.gap)>=M(a-o)&&M(z.pos)>M(g+o)&&M(g)<M(o)&&(z.el.style[e]=`-${M(m,1e3)}px`))}let y,E,L=[...this.inTransition];if(L.length>1&&(y=c[L[0]],E=c[L[1]]),y&&E){let P=0;for(const D of h)D.el?this.inTransition.has(D.index)&&y.slides.indexOf(D)<0&&(D.el.style[e]=`${M(P+(y.pos-E.pos),1e3)}px`):P+=D.dim+D.gap}}createSlideEl(e){const{track:t,slides:i}=this;if(!t||!e||e.el&&e.el.parentNode)return;const n=e.el||document.createElement("div");k(n,this.cn(qi)),k(n,e.class),k(n,e.customClass);const r=e.html;r&&(r instanceof HTMLElement?n.appendChild(r):n.innerHTML=e.html+"");const o=[];i.forEach((h,u)=>{h.el&&o.push(u)});const a=e.index;let l=null;o.length&&(l=i[o.reduce((h,u)=>Math.abs(u-a)<Math.abs(h-a)?u:h)]);const c=l&&l.el&&l.el.parentNode?l.index<e.index?l.el.nextSibling:l.el:null;t.insertBefore(n,t.contains(c)?c:null),e.el=n,this.emit("createSlide",e)}removeSlideEl(e,t=!1){const i=e?.el;if(!i||!i.parentNode)return;const n=this.cn(Er);if(i.classList.contains(n)&&(J(i,n),this.emit("unselectSlide",e)),e.isDom&&!t)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),void(i.style.left="");this.emit("removeSlide",e);const r=new CustomEvent(Hi);i.dispatchEvent(r),e.el&&(e.el.remove(),e.el=null)}transitionTo(e=0,t=this.option("transition")){var i,n,r,o;if(!t)return!1;const a=this.page,{pages:l,panzoom:c}=this;e=parseInt((e||0).toString())||0;const h=this.getPageFromIndex(e);if(!c||!l[h]||l.length<2||Math.abs((((n=(i=l[a])===null||i===void 0?void 0:i.slides[0])===null||n===void 0?void 0:n.dim)||0)-this.viewportDim)>1)return!1;const u=e>a?1:-1,d=l[h].pos*(this.isRTL?1:-1);if(a===h&&Math.abs(d-c.target[this.axis])<1)return!1;this.clearTransitions();const f=c.isResting;k(this.container,this.cn("inTransition"));const m=((r=l[a])===null||r===void 0?void 0:r.slides[0])||null,g=((o=l[h])===null||o===void 0?void 0:o.slides[0])||null;this.inTransition.add(g.index),this.createSlideEl(g);let y=m.el,E=g.el;f||t===qi||(t="fadeFast",y=null);const L=this.isRTL?"next":"prev",P=this.isRTL?"prev":"next";return y&&(this.inTransition.add(m.index),m.transition=t,y.addEventListener(Hi,this.onAnimationEnd),y.classList.add(`f-${t}Out`,`to-${u>0?P:L}`)),E&&(g.transition=t,E.addEventListener(Hi,this.onAnimationEnd),E.classList.add(`f-${t}In`,`from-${u>0?L:P}`)),c.current[this.axis]=d,c.target[this.axis]=d,c.requestTick(),this.onChange(h),!0}manageSlideVisiblity(){const e=new Set,t=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const n of this.slides)i.has(n)?e.add(n):t.add(n);for(const n of this.inTransition)e.add(this.slides[n]);for(const n of e)this.createSlideEl(n),this.lazyLoadSlide(n);for(const n of t)e.has(n)||this.removeSlideEl(n);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const e="aria-hidden";let t=this.cn(Er);if(t)for(const i of this.slides){const n=i.el;n&&(n.dataset.index=`${i.index}`,n.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(i)?n.removeAttribute(e):n.setAttribute(e,"true"):this.pages[this.page].slides.includes(i)?(n.classList.contains(t)||(k(n,t),this.emit("selectSlide",i)),n.removeAttribute(e)):(n.classList.contains(t)&&(J(n,t),this.emit("unselectSlide",i)),n.setAttribute(e,"true")))}}flipInfiniteTrack(){const{axis:e,isHorizontal:t,isInfinite:i,isRTL:n,viewportDim:r,contentDim:o}=this,a=this.panzoom;if(!a||!i)return;let l=a.current[e],c=a.target[e]-l,h=0,u=.5*r;n&&t?(l<-u&&(h=-1,l+=o),l>o-u&&(h=1,l-=o)):(l>u&&(h=1,l-=o),l<-o+u&&(h=-1,l+=o)),h&&(a.current[e]=l,a.target[e]=l+c)}lazyLoadImg(e,t){const i=this,n="f-fadeIn",r="is-preloading";let o=!1,a=null;const l=()=>{o||(o=!0,a&&(a.remove(),a=null),J(t,r),t.complete&&(k(t,n),setTimeout(()=>{J(t,n)},350)),this.option("adaptiveHeight")&&e.el&&this.pages[this.page].slides.indexOf(e)>-1&&(i.updateMetrics(),i.setViewportHeight()),this.emit("load",e))};k(t,r),t.src=t.dataset.lazySrcset||t.dataset.lazySrc||"",delete t.dataset.lazySrc,delete t.dataset.lazySrcset,t.addEventListener("error",()=>{l()}),t.addEventListener("load",()=>{l()}),setTimeout(()=>{const c=t.parentNode;c&&e.el&&(t.complete?l():o||(a=Ke(Qn),c.insertBefore(a,t)))},300)}lazyLoadSlide(e){const t=e&&e.el;if(!t)return;const i=new Set;let n=Array.from(t.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));t.dataset.lazySrc&&n.push(t),n.map(r=>{r instanceof HTMLImageElement?i.add(r):r instanceof HTMLElement&&r.dataset.lazySrc&&(r.style.backgroundImage=`url('${r.dataset.lazySrc}')`,delete r.dataset.lazySrc)});for(const r of i)this.lazyLoadImg(e,r)}onAnimationEnd(e){var t;const i=e.target,n=i?parseInt(i.dataset.index||"",10)||0:-1,r=this.slides[n],o=e.animationName;if(!i||!r||!o)return;const a=!!this.inTransition.has(n)&&r.transition;a&&o.substring(0,a.length+2)===`f-${a}`&&this.inTransition.delete(n),this.inTransition.size||this.clearTransitions(),n===this.page&&!((t=this.panzoom)===null||t===void 0)&&t.isResting&&this.emit("settle")}onDecel(e,t=0,i=0,n=0,r=0){if(this.option("dragFree"))return void this.setPageFromPosition();const{isRTL:o,isHorizontal:a,axis:l,pages:c}=this,h=c.length,u=Math.abs(Math.atan2(i,t)/(Math.PI/180));let d=0;if(d=u>45&&u<135?a?0:i:a?t:0,!h)return;let f=this.page,m=o&&a?1:-1;const g=e.current[l]*m;let{pageIndex:y}=this.getPageFromPosition(g);Math.abs(d)>5?(c[f].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(f=y),f=o&&a?d<0?f-1:f+1:d<0?f+1:f-1):f=n===0&&r===0?f:y,this.slideTo(f,{transition:!1,friction:e.option("decelFriction")})}onClick(e){const t=e.target,i=t&&Me(t)?t.dataset:null;let n,r;i&&(i.carouselPage!==void 0?(r="slideTo",n=i.carouselPage):i.carouselNext!==void 0?r="slideNext":i.carouselPrev!==void 0&&(r="slidePrev")),r?(e.preventDefault(),e.stopPropagation(),t&&!t.hasAttribute("disabled")&&this[r](n)):this.emit("click",e)}onSlideTo(e){const t=e.detail||0;this.slideTo(this.getPageForSlide(t),{friction:0})}onChange(e,t=0){const i=this.page;this.prevPage=i,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==i&&(this.markSelectedSlides(),this.emit("change",e,i,t))}onRefresh(){let e=this.contentDim,t=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===t||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var e;(e=this.viewport)===null||e===void 0||e.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(e=null,t=null){this.destroy(),this.state=ge.Init,this.prevPage=null,this.userOptions=e||this.userOptions,this.userPlugins=t||this.userPlugins,this.processOptions()}slideTo(e=0,{friction:t=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===ge.Destroy)return;e=parseInt((e||0).toString())||0;const n=this.getPageFromIndex(e),{axis:r,isHorizontal:o,isRTL:a,pages:l,panzoom:c}=this,h=l.length,u=a&&o?1:-1;if(!c||!h)return;if(this.page!==n){const f=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",f,e),f.defaultPrevented)return}if(this.transitionTo(e,i))return;let d=l[n].pos;if(this.isInfinite){const f=this.contentDim,m=c.target[r]*u;h===2?d+=f*Math.floor(parseFloat(e+"")/2):d=[d,d-f,d+f].reduce(function(g,y){return Math.abs(y-m)<Math.abs(g-m)?y:g})}d*=u,Math.abs(c.target[r]-d)<1||(c.panTo({x:o?d:0,y:o?0:d,friction:t}),this.onChange(n))}slideToClosest(e){if(this.panzoom){const{pageIndex:t}=this.getPageFromPosition();this.slideTo(t,e)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),J(this.container,this.cn("inTransition"));const e=["to-prev","to-next","from-prev","from-next"];for(const t of this.slides){const i=t.el;if(i){i.removeEventListener(Hi,this.onAnimationEnd),i.classList.remove(...e);const n=t.transition;n&&i.classList.remove(`f-${n}Out`,`f-${n}In`)}}this.manageSlideVisiblity()}addSlide(e,t){var i,n,r,o;const a=this.panzoom,l=((i=this.pages[this.page])===null||i===void 0?void 0:i.pos)||0,c=((n=this.pages[this.page])===null||n===void 0?void 0:n.dim)||0,h=this.contentDim<this.viewportDim;let u=Array.isArray(t)?t:[t];const d=[];for(const f of u)d.push(on(f));this.slides.splice(e,0,...d);for(let f=0;f<this.slides.length;f++)this.slides[f].index=f;for(const f of d)this.emit("beforeInitSlide",f,f.index);if(this.page>=e&&(this.page+=d.length),this.updateMetrics(),a){const f=((r=this.pages[this.page])===null||r===void 0?void 0:r.pos)||0,m=((o=this.pages[this.page])===null||o===void 0?void 0:o.dim)||0,g=this.pages.length||1,y=this.isRTL?c-m:m-c,E=this.isRTL?l-f:f-l;h&&g===1?(e<=this.page&&(a.current[this.axis]-=y,a.target[this.axis]-=y),a.panTo({[this.isHorizontal?"x":"y"]:-1*f})):E&&e<=this.page&&(a.target[this.axis]-=E,a.current[this.axis]-=E,a.requestTick())}for(const f of d)this.emit("initSlide",f,f.index)}prependSlide(e){this.addSlide(0,e)}appendSlide(e){this.addSlide(this.slides.length,e)}removeSlide(e){const t=this.slides.length;e=(e%t+t)%t;const i=this.slides[e];if(i){this.removeSlideEl(i,!0),this.slides.splice(e,1);for(let n=0;n<this.slides.length;n++)this.slides[n].index=n;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",i)}}updateMetrics(){const{panzoom:e,viewport:t,track:i,slides:n,isHorizontal:r,isInfinite:o}=this;if(!i)return;const a=r?"width":"height",l=r?"offsetWidth":"offsetHeight";if(t){let u=Math.max(t[l],M(t.getBoundingClientRect()[a],1e3)),d=getComputedStyle(t),f="padding",m=r?"Right":"Bottom";u-=parseFloat(d[f+(r?"Left":"Top")])+parseFloat(d[f+m]),this.viewportDim=u}let c,h=0;for(const[u,d]of n.entries()){let f=0,m=0;!d.el&&c?(f=c.dim,m=c.gap):({dim:f,gap:m}=this.getSlideMetrics(d),c=d),f=M(f,1e3),m=M(m,1e3),d.dim=f,d.gap=m,d.pos=h,h+=f,(o||u<n.length-1)&&(h+=m)}h=M(h,1e3),this.contentDim=h,e&&(e.contentRect[a]=h,e.contentRect[r?"fullWidth":"fullHeight"]=h),this.pages=this.createPages(),this.pages=this.processPages(),this.state===ge.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,t=!1,i=!1){e===void 0&&(e=this.page);const n=this,r=n.panzoom,o=n.contentDim,a=n.pages[e]||0;if(!a||!r)return e>this.page?-1:1;let l=-1*r.current.e,c=M((l-a.pos)/(1*a.dim),1e3),h=c,u=c;this.isInfinite&&i!==!0&&(h=M((l-a.pos+o)/(1*a.dim),1e3),u=M((l-a.pos-o)/(1*a.dim),1e3));let d=[c,h,u].reduce(function(f,m){return Math.abs(m)<Math.abs(f)?m:f});return t?d:d>1?1:d<-1?-1:d}setViewportHeight(){const{page:e,pages:t,viewport:i,isHorizontal:n}=this;if(!i||!t[e])return;let r=0;n&&this.track&&(this.track.style.height="auto",t[e].slides.forEach(o=>{o.el&&(r=Math.max(r,o.el.offsetHeight))})),i.style.height=r?`${r}px`:""}getPageForSlide(e){for(const t of this.pages)for(const i of t.slides)if(i.index===e)return t.index;return-1}getVisibleSlides(e=0){var t;const i=new Set;let{panzoom:n,contentDim:r,viewportDim:o,pages:a,page:l}=this;if(o){r=r+((t=this.slides[this.slides.length-1])===null||t===void 0?void 0:t.gap)||0;let c=0;c=n&&n.state!==ie.Init&&n.state!==ie.Destroy?-1*n.current[this.axis]:a[l]&&a[l].pos||0,this.isInfinite&&(c-=Math.floor(c/r)*r),this.isRTL&&this.isHorizontal&&(c*=-1);const h=c-o*e,u=c+o*(e+1),d=this.isInfinite?[-1,0,1]:[0];for(const f of this.slides)for(const m of d){const g=f.pos+m*r,y=g+f.dim+f.gap;g<u&&y>h&&i.add(f)}}return i}getPageFromPosition(e){const{viewportDim:t,contentDim:i,slides:n,pages:r,panzoom:o}=this,a=r.length,l=n.length,c=n[0],h=n[l-1],u=this.option("center");let d=0,f=0,m=0,g=e===void 0?-1*(o?.target[this.axis]||0):e;u&&(g+=.5*t),this.isInfinite?(g<c.pos-.5*h.gap&&(g-=i,m=-1),g>h.pos+h.dim+.5*h.gap&&(g-=i,m=1)):g=Math.max(c.pos||0,Math.min(g,h.pos));let y=h,E=n.find(L=>{const P=L.pos-.5*y.gap,D=L.pos+L.dim+.5*L.gap;return y=L,g>=P&&g<D});return E||(E=h),f=this.getPageForSlide(E.index),d=f+m*a,{page:d,pageIndex:f}}setPageFromPosition(){const{pageIndex:e}=this.getPageFromPosition();this.onChange(e)}destroy(){if([ge.Destroy].includes(this.state))return;this.state=ge.Destroy;const{container:e,viewport:t,track:i,slides:n,panzoom:r}=this,o=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),r&&(r.destroy(),this.panzoom=null),n&&n.forEach(l=>{this.removeSlideEl(l)}),this.detachPlugins(),t&&(t.removeEventListener("scroll",this.onScroll),t.offsetParent&&i&&i.offsetParent&&t.replaceWith(...i.childNodes));for(const[l,c]of Object.entries(o))l!=="container"&&c&&e.classList.remove(c);this.track=null,this.viewport=null,this.page=0,this.slides=[];const a=this.events.get("ready");this.events=new Map,a&&this.events.set("ready",a)}}Object.defineProperty(ft,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:Ot}),Object.defineProperty(ft,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:sl}),Object.defineProperty(ft,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:ol});const go=function(s){if(!Me(s))return 0;const e=window.scrollY,t=window.innerHeight,i=e+t,n=s.getBoundingClientRect(),r=n.y+e,o=n.height,a=r+o;if(e>a||i<r)return 0;if(e<r&&i>a||r<e&&a>i)return 100;let l=o;r<e&&(l-=e-r),a>i&&(l-=a-i);const c=l/t*100;return Math.round(c)},mi=!(typeof window>"u"||!window.document||!window.document.createElement);let an;const ln=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),Tr=s=>{if(s&&mi){an===void 0&&document.createElement("div").focus({get preventScroll(){return an=!0,!1}});try{if(an)s.focus({preventScroll:!0});else{const e=window.scrollY||document.body.scrollTop,t=window.scrollX||document.body.scrollLeft;s.focus(),document.body.scrollTo({top:e,left:t,behavior:"auto"})}}catch{}}},bo=()=>{const s=document;let e,t="",i="",n="";return s.fullscreenEnabled?(t="requestFullscreen",i="exitFullscreen",n="fullscreenElement"):s.webkitFullscreenEnabled&&(t="webkitRequestFullscreen",i="webkitExitFullscreen",n="webkitFullscreenElement"),t&&(e={request:function(r=s.documentElement){return t==="webkitRequestFullscreen"?r[t](Element.ALLOW_KEYBOARD_INPUT):r[t]()},exit:function(){return s[n]&&s[i]()},isFullscreen:function(){return s[n]}}),e},Mn={dragToClose:!0,hideScrollbar:!0,Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},contentClick:"toggleZoom",contentDblClick:!1,backdropClick:"close",animated:!0,idle:3500,showClass:"f-zoomInUp",hideClass:"f-fadeOut",commonCaption:!1,parentEl:null,startIndex:0,l10n:Object.assign(Object.assign({},uo),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:`<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
    <div class="fancybox__backdrop"></div>
    <div class="fancybox__carousel"></div>
    <div class="fancybox__footer"></div>
  </div>`},groupAll:!1,groupAttr:"data-fancybox",defaultType:"image",defaultDisplay:"block",autoFocus:!0,trapFocus:!0,placeFocusBack:!0,closeButton:"auto",keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},Fullscreen:{autoStart:!1},compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,wheel:"zoom"};var ye,Ae;(function(s){s[s.Init=0]="Init",s[s.Ready=1]="Ready",s[s.Closing=2]="Closing",s[s.CustomClosing=3]="CustomClosing",s[s.Destroy=4]="Destroy"})(ye||(ye={})),function(s){s[s.Loading=0]="Loading",s[s.Opening=1]="Opening",s[s.Ready=2]="Ready",s[s.Closing=3]="Closing"}(Ae||(Ae={}));let Ar="",di=!1,$i=!1,St=null;const vo=()=>{let s="",e="";const t=X.getInstance();if(t){const i=t.carousel,n=t.getSlide();if(i&&n){let r=n.slug||void 0,o=n.triggerEl||void 0;e=r||t.option("slug")||"",!e&&o&&o.dataset&&(e=o.dataset.fancybox||""),e&&e!=="true"&&(s="#"+e+(!r&&i.slides.length>1?"-"+(n.index+1):""))}}return{hash:s,slug:e,index:1}},fs=()=>{const s=new URL(document.URL).hash,e=s.slice(1).split("-"),t=e[e.length-1],i=t&&/^\+?\d+$/.test(t)&&parseInt(e.pop()||"1",10)||1;return{hash:s,slug:e.join("-"),index:i}},yo=()=>{const{slug:s,index:e}=fs();if(!s)return;let t=document.querySelector(`[data-slug="${s}"]`);if(t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),X.getInstance())return;const i=document.querySelectorAll(`[data-fancybox="${s}"]`);i.length&&(t=i[e-1],t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},wo=()=>{if(X.defaults.Hash===!1)return;const s=X.getInstance();if(s?.options.Hash===!1)return;const{slug:e,index:t}=fs(),{slug:i}=vo();s&&(e===i?s.jumpTo(t-1):(di=!0,s.close())),yo()},So=()=>{St&&clearTimeout(St),queueMicrotask(()=>{wo()})},Lr=()=>{window.addEventListener("hashchange",So,!1),setTimeout(()=>{wo()},500)};mi&&(/complete|interactive|loaded/.test(document.readyState)?Lr():document.addEventListener("DOMContentLoaded",Lr));const Wi="is-zooming-in";class Eo extends He{onCreateSlide(e,t,i){const n=this.instance.optionFor(i,"src")||"";i.el&&i.type==="image"&&typeof n=="string"&&this.setImage(i,n)}onRemoveSlide(e,t,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(e,t,i,n){J(this.instance.container,Wi);for(const r of t.slides){const o=r.panzoom;o&&r.index!==i&&o.reset(.35)}}onClose(){var e;const t=this.instance,i=t.container,n=t.getSlide();if(!i||!i.parentElement||!n)return;const{el:r,contentEl:o,panzoom:a,thumbElSrc:l}=n;if(!r||!l||!o||!a||a.isContentLoading||a.state===ie.Init||a.state===ie.Destroy)return;a.updateMetrics();let c=this.getZoomInfo(n);if(!c)return;this.instance.state=ye.CustomClosing,i.classList.remove(Wi),i.classList.add("is-zooming-out"),o.style.backgroundImage=`url('${l}')`;const h=i.getBoundingClientRect();(((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1)===1&&Object.assign(i.style,{position:"absolute",top:`${i.offsetTop+window.scrollY}px`,left:`${i.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${h.width}px`,height:`${h.height}px`,overflow:"hidden"});const{x:u,y:d,scale:f,opacity:m}=c;if(m){const g=((y,E,L,P)=>{const D=E-y,G=P-L;return he=>L+((he-y)/D*G||0)})(a.scale,f,1,0);a.on("afterTransform",()=>{o.style.opacity=g(a.scale)+""})}a.on("endAnimation",()=>{t.destroy()}),a.target.a=f,a.target.b=0,a.target.c=0,a.target.d=f,a.panTo({x:u,y:d,scale:f,friction:m?.2:.33,ignoreBounds:!0}),a.isResting&&t.destroy()}setImage(e,t){const i=this.instance;e.src=t,this.process(e,t).then(n=>{const{contentEl:r,imageEl:o,thumbElSrc:a,el:l}=e;if(i.isClosing()||!r||!o)return;r.offsetHeight;const c=!!i.isOpeningSlide(e)&&this.getZoomInfo(e);if(this.option("protected")&&l){l.addEventListener("contextmenu",d=>{d.preventDefault()});const u=document.createElement("div");k(u,"fancybox-protected"),r.appendChild(u)}if(a&&c){const u=n.contentRect,d=Math.max(u.fullWidth,u.fullHeight);let f=null;!c.opacity&&d>1200&&(f=document.createElement("img"),k(f,"fancybox-ghost"),f.src=a,r.appendChild(f));const m=()=>{f&&(k(f,"f-fadeFastOut"),setTimeout(()=>{f&&(f.remove(),f=null)},200))};(h=a,new Promise((g,y)=>{const E=new Image;E.onload=g,E.onerror=y,E.src=h})).then(()=>{i.hideLoading(e),e.state=Ae.Opening,this.instance.emit("reveal",e),this.zoomIn(e).then(()=>{m(),this.instance.done(e)},()=>{}),f&&setTimeout(()=>{m()},d>2500?800:200)},()=>{i.hideLoading(e),i.revealContent(e)})}else{const u=this.optionFor(e,"initialSize"),d=this.optionFor(e,"zoom"),f={event:i.prevMouseMoveEvent||i.options.event,friction:d?.12:0};let m=i.optionFor(e,"showClass")||void 0,g=!0;i.isOpeningSlide(e)&&(u==="full"?n.zoomToFull(f):u==="cover"?n.zoomToCover(f):u==="max"?n.zoomToMax(f):g=!1,n.stop("current")),g&&m&&(m=n.isDragging?"f-fadeIn":""),i.hideLoading(e),i.revealContent(e,m)}var h},()=>{i.setError(e,"{{IMAGE_ERROR}}")})}process(e,t){return new Promise((i,n)=>{var r;const o=this.instance,a=e.el;o.clearContent(e),o.showLoading(e);let l=this.optionFor(e,"content");if(typeof l=="string"&&(l=Ke(l)),!l||!Me(l)){if(l=document.createElement("img"),l instanceof HTMLImageElement){let c="",h=e.caption;c=typeof h=="string"&&h?h.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${e.index+1} of ${((r=o.carousel)===null||r===void 0?void 0:r.pages.length)||1}`,l.src=t||"",l.alt=c,l.draggable=!1,e.srcset&&l.setAttribute("srcset",e.srcset),this.instance.isOpeningSlide(e)&&(l.fetchPriority="high")}e.sizes&&l.setAttribute("sizes",e.sizes)}k(l,"fancybox-image"),e.imageEl=l,o.setContent(e,l,!1),e.panzoom=new Ot(a,Pe({transformParent:!0},this.option("Panzoom")||{},{content:l,width:o.optionFor(e,"width","auto"),height:o.optionFor(e,"height","auto"),wheel:()=>{const c=o.option("wheel");return(c==="zoom"||c=="pan")&&c},click:(c,h)=>{var u,d;if(o.isCompact||o.isClosing()||e.index!==((u=o.getSlide())===null||u===void 0?void 0:u.index))return!1;if(h){const m=h.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(m.nodeName))return!1}let f=!h||h.target&&((d=e.contentEl)===null||d===void 0?void 0:d.contains(h.target));return o.option(f?"contentClick":"backdropClick")||!1},dblClick:()=>o.isCompact?"toggleZoom":o.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:c=>{i(c)},error:()=>{n()},destroy:()=>{n()}}}))})}zoomIn(e){return new Promise((t,i)=>{const n=this.instance,r=n.container,{panzoom:o,contentEl:a,el:l}=e;o&&o.updateMetrics();const c=this.getZoomInfo(e);if(!(c&&l&&a&&o&&r))return void i();const{x:h,y:u,scale:d,opacity:f}=c,m=()=>{e.state!==Ae.Closing&&(f&&(a.style.opacity=Math.max(Math.min(1,1-(1-o.scale)/(1-d)),0)+""),o.scale>=1&&o.scale>o.targetScale-.1&&t(o))},g=L=>{(L.scale<.99||L.scale>1.01)&&!L.isDragging||(J(r,Wi),a.style.opacity="",L.off("endAnimation",g),L.off("touchStart",g),L.off("afterTransform",m),t(L))};o.on("endAnimation",g),o.on("touchStart",g),o.on("afterTransform",m),o.on(["error","destroy"],()=>{i()}),o.panTo({x:h,y:u,scale:d,friction:0,ignoreBounds:!0}),o.stop("current");const y={event:o.panMode==="mousemove"?n.prevMouseMoveEvent||n.options.event:void 0},E=this.optionFor(e,"initialSize");k(r,Wi),n.hideLoading(e),E==="full"?o.zoomToFull(y):E==="cover"?o.zoomToCover(y):E==="max"?o.zoomToMax(y):o.reset(.172)})}getZoomInfo(e){const{el:t,imageEl:i,thumbEl:n,panzoom:r}=e,o=this.instance,a=o.container;if(!t||!i||!n||!r||go(n)<3||!this.optionFor(e,"zoom")||!a||o.state===ye.Destroy||getComputedStyle(a).getPropertyValue("--f-images-zoom")==="0")return!1;const l=window.visualViewport||null;if((l?l.scale:1)!==1)return!1;let{top:c,left:h,width:u,height:d}=n.getBoundingClientRect(),{top:f,left:m,fitWidth:g,fitHeight:y}=r.contentRect;if(!(u&&d&&g&&y))return!1;const E=r.container.getBoundingClientRect();m+=E.left,f+=E.top;const L=-1*(m+.5*g-(h+.5*u)),P=-1*(f+.5*y-(c+.5*d)),D=u/g;let G=this.option("zoomOpacity")||!1;return G==="auto"&&(G=Math.abs(u/d-g/y)>.1),{x:L,y:P,scale:D,opacity:G}}attach(){const e=this,t=e.instance;t.on("Carousel.change",e.onChange),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("close",e.onClose)}detach(){const e=this,t=e.instance;t.off("Carousel.change",e.onChange),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("close",e.onClose)}}Object.defineProperty(Eo,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),typeof SuppressedError=="function"&&SuppressedError;const cn="html",Cr="image",hn="map",et="youtube",bt="vimeo",li="html5video",Mr=(s,e={})=>{const t=new URL(s),i=new URLSearchParams(t.search),n=new URLSearchParams;for(const[a,l]of[...i,...Object.entries(e)]){let c=l+"";if(a==="t"){let h=c.match(/((\d*)m)?(\d*)s?/);h&&n.set("start",60*parseInt(h[2]||"0")+parseInt(h[3]||"0")+"")}else n.set(a,c)}let r=n+"",o=s.match(/#t=((.*)?\d+s)/);return o&&(r+=`#t=${o[1]}`),r},al={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:`<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},ll=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"];class To extends He{onBeforeInitSlide(e,t,i){this.processType(i)}onCreateSlide(e,t,i){this.setContent(i)}onClearContent(e,t){t.xhr&&(t.xhr.abort(),t.xhr=null);const i=t.iframeEl;i&&(i.onload=i.onerror=null,i.src="//about:blank",t.iframeEl=null);const n=t.contentEl,r=t.placeholderEl;if(t.type==="inline"&&n&&r)n.classList.remove("fancybox__content"),n.style.display!=="none"&&(n.style.display="none"),r.parentNode&&r.parentNode.insertBefore(n,r),r.remove(),t.contentEl=void 0,t.placeholderEl=void 0;else for(;t.el&&t.el.firstChild;)t.el.removeChild(t.el.firstChild)}onSelectSlide(e,t,i){i.state===Ae.Ready&&this.playVideo()}onUnselectSlide(e,t,i){var n,r;if(i.type===li){try{(r=(n=i.el)===null||n===void 0?void 0:n.querySelector("video"))===null||r===void 0||r.pause()}catch{}return}let o;i.type===bt?o={method:"pause",value:"true"}:i.type===et&&(o={event:"command",func:"pauseVideo"}),o&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(o),"*"),i.poller&&clearTimeout(i.poller)}onDone(e,t){e.isCurrentSlide(t)&&!e.isClosing()&&this.playVideo()}onRefresh(e,t){t.slides.forEach(i=>{i.el&&(this.resizeIframe(i),this.setAspectRatio(i))})}onMessage(e){try{let t=JSON.parse(e.data);if(e.origin==="https://player.vimeo.com"){if(t.event==="ready")for(let i of Array.from(document.getElementsByClassName("fancybox__iframe")))i instanceof HTMLIFrameElement&&i.contentWindow===e.source&&(i.dataset.ready="true")}else if(e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&t.event==="onReady"){const i=document.getElementById(t.id);i&&(i.dataset.ready="true")}}catch{}}loadAjaxContent(e){const t=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);const i=this.instance,n=new XMLHttpRequest;i.showLoading(e),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&i.state===ye.Ready&&(i.hideLoading(e),n.status===200?i.setContent(e,n.responseText):i.setError(e,n.status===404?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};const r=e.ajax||null;n.open(r?"POST":"GET",t+""),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(r),e.xhr=n}setInlineContent(e){let t=null;if(Me(e.src))t=e.src;else if(typeof e.src=="string"){const i=e.src.split("#",2).pop();t=i?document.getElementById(i):null}if(t){if(e.type==="clone"||t.closest(".fancybox__slide")){t=t.cloneNode(!0);const i=t.dataset.animationName;i&&(t.classList.remove(i),delete t.dataset.animationName);let n=t.getAttribute("id");n=n?`${n}--clone`:`clone-${this.instance.id}-${e.index}`,t.setAttribute("id",n)}else if(t.parentNode){const i=document.createElement("div");i.classList.add("fancybox-placeholder"),t.parentNode.insertBefore(i,t),e.placeholderEl=i}this.instance.setContent(e,t)}else this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(e){const{src:t,el:i}=e;if(!t||typeof t!="string"||!i)return;i.classList.add("is-loading");const n=this.instance,r=document.createElement("iframe");r.className="fancybox__iframe",r.setAttribute("id",`fancybox__iframe_${n.id}_${e.index}`);for(const[a,l]of Object.entries(this.optionFor(e,"iframeAttr")||{}))r.setAttribute(a,l);r.onerror=()=>{n.setError(e,"{{IFRAME_ERROR}}")},e.iframeEl=r;const o=this.optionFor(e,"preload");if(e.type!=="iframe"||o===!1)return r.setAttribute("src",e.src+""),n.setContent(e,r,!1),this.resizeIframe(e),void n.revealContent(e);n.showLoading(e),r.onload=()=>{if(!r.src.length)return;const a=r.dataset.ready!=="true";r.dataset.ready="true",this.resizeIframe(e),a?n.revealContent(e):n.hideLoading(e)},r.setAttribute("src",t),n.setContent(e,r,!1)}resizeIframe(e){const{type:t,iframeEl:i}=e;if(t===et||t===bt)return;const n=i?.parentElement;if(!i||!n)return;let r=e.autoSize;r===void 0&&(r=this.optionFor(e,"autoSize"));let o=e.width||0,a=e.height||0;o&&a&&(r=!1);const l=n&&n.style;if(e.preload!==!1&&r!==!1&&l)try{const c=window.getComputedStyle(n),h=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight),u=parseFloat(c.paddingTop)+parseFloat(c.paddingBottom),d=i.contentWindow;if(d){const f=d.document,m=f.getElementsByTagName(cn)[0],g=f.body;l.width="",g.style.overflow="hidden",o=o||m.scrollWidth+h,l.width=`${o}px`,g.style.overflow="",l.flex="0 0 auto",l.height=`${g.scrollHeight}px`,a=m.scrollHeight+u}}catch{}if(o||a){const c={flex:"0 1 auto",width:"",height:""};o&&o!=="auto"&&(c.width=`${o}px`),a&&a!=="auto"&&(c.height=`${a}px`),Object.assign(l,c)}}playVideo(){const e=this.instance.getSlide();if(!e)return;const{el:t}=e;if(!t||!t.offsetParent||!this.optionFor(e,"videoAutoplay"))return;if(e.type===li)try{const n=t.querySelector("video");if(n){const r=n.play();r!==void 0&&r.then(()=>{}).catch(o=>{n.muted=!0,n.play()})}}catch{}if(e.type!==et&&e.type!==bt)return;const i=()=>{if(e.iframeEl&&e.iframeEl.contentWindow){let n;if(e.iframeEl.dataset.ready==="true")return n=e.type===et?{event:"command",func:"playVideo"}:{method:"play",value:"true"},n&&e.iframeEl.contentWindow.postMessage(JSON.stringify(n),"*"),void(e.poller=void 0);e.type===et&&(n={event:"listening",id:e.iframeEl.getAttribute("id")},e.iframeEl.contentWindow.postMessage(JSON.stringify(n),"*"))}e.poller=setTimeout(i,250)};i()}processType(e){if(e.html)return e.type=cn,e.src=e.html,void(e.html="");const t=this.instance.optionFor(e,"src","");if(!t||typeof t!="string")return;let i=e.type,n=null;if(n=t.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const r=this.optionFor(e,et),{nocookie:o}=r,a=function(u,d){var f={};for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&d.indexOf(m)<0&&(f[m]=u[m]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var g=0;for(m=Object.getOwnPropertySymbols(u);g<m.length;g++)d.indexOf(m[g])<0&&Object.prototype.propertyIsEnumerable.call(u,m[g])&&(f[m[g]]=u[m[g]])}return f}(r,["nocookie"]),l=`www.youtube${o?"-nocookie":""}.com`,c=Mr(t,a),h=encodeURIComponent(n[2]);e.videoId=h,e.src=`https://${l}/embed/${h}?${c}`,e.thumbSrc=e.thumbSrc||`https://i.ytimg.com/vi/${h}/mqdefault.jpg`,i=et}else if(n=t.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){const r=Mr(t,this.optionFor(e,bt)),o=encodeURIComponent(n[1]),a=n[4]||"";e.videoId=o,e.src=`https://player.vimeo.com/video/${o}?${a?`h=${a}${r?"&":""}`:""}${r}`,i=bt}if(!i&&e.triggerEl){const r=e.triggerEl.dataset.type;ll.includes(r)&&(i=r)}i||typeof t=="string"&&(t.charAt(0)==="#"?i="inline":(n=t.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i=li,e.videoFormat=e.videoFormat||"video/"+(n[1]==="ogv"?"ogg":n[1])):t.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i=Cr:t.match(/\.(pdf)((\?|#).*)?$/i)&&(i="pdf")),(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src=`https://maps.google.${n[1]}/?ll=${(n[2]?n[2]+"&z="+Math.floor(parseFloat(n[3]))+(n[4]?n[4].replace(/^\//,"&"):""):n[4]+"").replace(/\?/,"&")}&output=${n[4]&&n[4].indexOf("layer=c")>0?"svembed":"embed"}`,i=hn):(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src=`https://maps.google.${n[1]}/maps?q=${n[2].replace("query=","q=").replace("api=1","")}&output=embed`,i=hn),i=i||this.instance.option("defaultType"),e.type=i,i===Cr&&(e.thumbSrc=e.thumbSrc||e.src)}setContent(e){const t=this.instance.optionFor(e,"src")||"";if(e&&e.type&&t){switch(e.type){case cn:this.instance.setContent(e,t);break;case li:const i=this.option("videoTpl");i&&this.instance.setContent(e,i.replace(/\{\{src\}\}/gi,t+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case hn:case et:case bt:e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}setAspectRatio(e){const t=e.contentEl;if(!(e.el&&t&&e.type&&[et,bt,li].includes(e.type)))return;let i,n=e.width||"auto",r=e.height||"auto";if(n==="auto"||r==="auto"){i=this.optionFor(e,"videoRatio");const c=(i+"").match(/(\d+)\s*\/\s?(\d+)/);i=c&&c.length>2?parseFloat(c[1])/parseFloat(c[2]):parseFloat(i+"")}else n&&r&&(i=n/r);if(!i)return;t.style.aspectRatio="",t.style.width="",t.style.height="",t.offsetHeight;const o=t.getBoundingClientRect(),a=o.width||1,l=o.height||1;t.style.aspectRatio=i+"",i<a/l?(r=r==="auto"?l:Math.min(l,r),t.style.width="auto",t.style.height=`${r}px`):(n=n==="auto"?a:Math.min(a,n),t.style.width=`${n}px`,t.style.height="auto")}attach(){const e=this,t=e.instance;t.on("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.selectSlide",e.onSelectSlide),t.on("Carousel.unselectSlide",e.onUnselectSlide),t.on("Carousel.Panzoom.refresh",e.onRefresh),t.on("done",e.onDone),t.on("clearContent",e.onClearContent),window.addEventListener("message",e.onMessage)}detach(){const e=this,t=e.instance;t.off("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.selectSlide",e.onSelectSlide),t.off("Carousel.unselectSlide",e.onUnselectSlide),t.off("Carousel.Panzoom.refresh",e.onRefresh),t.off("done",e.onDone),t.off("clearContent",e.onClearContent),window.removeEventListener("message",e.onMessage)}}Object.defineProperty(To,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:al});const Ui="play",Ki="pause",ci="ready";class Ao extends He{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ci}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==ci}onReady(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){document.visibilityState==="visible"?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var e;this.inHover=!1,!((e=this.instance.panzoom)===null||e===void 0)&&e.isResting&&this.resume()}onTimerEnd(){const e=this.instance;this.state==="play"&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var e;if(!this.option("showProgress"))return null;this.removeProgressBar();const t=this.instance,i=((e=t.pages[t.page])===null||e===void 0?void 0:e.slides)||[];let n=this.option("progressParentEl");if(n||(n=(i.length===1?i[0].el:null)||t.viewport),!n)return null;const r=document.createElement("div");return k(r,"f-progress"),n.prepend(r),this.progressBar=r,r.offsetHeight,r}set(){const e=this,t=e.instance;if(t.pages.length<2||e.timer)return;const i=e.option("timeout");e.state=Ui,k(t.container,"has-autoplay");let n=e.createProgressBar();n&&(n.style.transitionDuration=`${i}ms`,n.style.transform="scaleX(1)"),e.timer=setTimeout(()=>{e.timer=null,e.inHover||e.onTimerEnd()},i),e.emit("set")}clear(){const e=this;e.timer&&(clearTimeout(e.timer),e.timer=null),e.removeProgressBar()}start(){const e=this;if(e.set(),e.state!==ci){if(e.option("pauseOnHover")){const t=e.instance.container;t.addEventListener("mouseenter",e.onMouseEnter,!1),t.addEventListener("mouseleave",e.onMouseLeave,!1)}document.addEventListener("visibilitychange",e.onVisibilityChange,!1),e.emit("start")}}stop(){const e=this,t=e.state,i=e.instance.container;e.clear(),e.state=ci,i.removeEventListener("mouseenter",e.onMouseEnter,!1),i.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),J(i,"has-autoplay"),t!==ci&&e.emit("stop")}pause(){const e=this;e.state===Ui&&(e.state=Ki,e.clear(),e.emit(Ki))}resume(){const e=this,t=e.instance;if(t.isInfinite||t.page!==t.pages.length-1)if(e.state!==Ui){if(e.state===Ki&&!e.inHover){const i=new Event("resume",{bubbles:!0,cancelable:!0});e.emit("resume",i),i.defaultPrevented||e.set()}}else e.set();else e.stop()}toggle(){this.state===Ui||this.state===Ki?this.stop():this.start()}attach(){const e=this,t=e.instance;t.on("ready",e.onReady),t.on("Panzoom.startAnimation",e.onChange),t.on("Panzoom.endAnimation",e.onSettle),t.on("Panzoom.touchMove",e.onChange)}detach(){const e=this,t=e.instance;t.off("ready",e.onReady),t.off("Panzoom.startAnimation",e.onChange),t.off("Panzoom.endAnimation",e.onSettle),t.off("Panzoom.touchMove",e.onChange),e.stop()}}Object.defineProperty(Ao,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class Lo extends He{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(e){const t=e.carousel;if(!t)return;const i=e.container;i&&(t.options.Autoplay=Pe({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{e.emit("startSlideshow")},set:n=>{var r;i.classList.add("has-slideshow"),((r=e.getSlide())===null||r===void 0?void 0:r.state)!==Ae.Ready&&n.pause()},stop:()=>{i.classList.remove("has-slideshow"),e.isCompact||e.endIdle(),e.emit("endSlideshow")},resume:(n,r)=>{var o,a,l;!r||!r.cancelable||((o=e.getSlide())===null||o===void 0?void 0:o.state)===Ae.Ready&&!((l=(a=e.carousel)===null||a===void 0?void 0:a.panzoom)===null||l===void 0)&&l.isResting||r.preventDefault()}}}),t.attachPlugins({Autoplay:Ao}),this.ref=t.plugins.Autoplay)}onReady(e){const t=e.carousel,i=this.ref;i&&t&&this.option("playOnStart")&&(t.isInfinite||t.page<t.pages.length-1)&&i.start()}onDone(e,t){const i=this.ref,n=e.carousel;if(!i||!n)return;const r=t.panzoom;r&&r.on("startAnimation",()=>{e.isCurrentSlide(t)&&i.stop()}),e.isCurrentSlide(t)&&i.resume()}onKeydown(e,t){var i;const n=this.ref;n&&t===this.option("key")&&((i=document.activeElement)===null||i===void 0?void 0:i.nodeName)!=="BUTTON"&&n.toggle()}attach(){const e=this,t=e.instance;t.on("Carousel.init",e.onPrepare),t.on("Carousel.ready",e.onReady),t.on("done",e.onDone),t.on("keydown",e.onKeydown)}detach(){const e=this,t=e.instance;t.off("Carousel.init",e.onPrepare),t.off("Carousel.ready",e.onReady),t.off("done",e.onDone),t.off("keydown",e.onKeydown)}}Object.defineProperty(Lo,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:s=>{var e;return((e=s.instance.container)===null||e===void 0?void 0:e.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||s.instance.container},timeout:3e3}});const Co={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var rt;(function(s){s[s.Init=0]="Init",s[s.Ready=1]="Ready",s[s.Hidden=2]="Hidden"})(rt||(rt={}));const Pr="isResting",Xi="thumbWidth",Dt="thumbHeight",$e="thumbClipWidth";let Mo=class extends He{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:rt.Init})}get isModern(){return this.type==="modern"}onInitSlide(s,e){const t=e.el?e.el.dataset:void 0;t&&(e.thumbSrc=t.thumbSrc||e.thumbSrc||"",e[$e]=parseFloat(t[$e]||"")||e[$e]||0,e[Dt]=parseFloat(t.thumbHeight||"")||e[Dt]||0),this.addSlide(e)}onInitSlides(){this.build()}onChange(){var s;if(!this.isModern)return;const e=this.container,t=this.instance,i=t.panzoom,n=this.carousel,r=n?n.panzoom:null,o=t.page;if(i&&n&&r){if(i.isDragging){J(e,this.cn(Pr));let a=((s=n.pages[o])===null||s===void 0?void 0:s.pos)||0;a+=t.getProgress(o)*(this[$e]+this.thumbGap);let l=r.getBounds();-1*a>l.x.min&&-1*a<l.x.max&&r.panTo({x:-1*a,friction:.12})}else Xe(e,this.cn(Pr),i.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(const s of this.instance.slides||[])this.resizeModernSlide(s);this.shiftModern()}isDisabled(){const s=this.option("minCount")||0;if(s){const t=this.instance;let i=0;for(const n of t.slides||[])n.thumbSrc&&i++;if(i<s)return!0}const e=this.option("type");return["modern","classic"].indexOf(e)<0}getThumb(s){const e=this.option("thumbTpl")||"";return{html:this.instance.localize(e,[["%i",s.index],["%d",s.index+1],["%s",s.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(s){const e=this.carousel;e&&e.addSlide(s.index,this.getThumb(s))}getSlides(){const s=[];for(const e of this.instance.slides||[])s.push(this.getThumb(e));return s}resizeModernSlide(s){this.isModern&&(s[Xi]=s[$e]&&s[Dt]?Math.round(this[Dt]*(s[$e]/s[Dt])):this[Xi])}updateProps(){const s=this.container;if(!s)return;const e=t=>parseFloat(getComputedStyle(s).getPropertyValue("--f-thumb-"+t))||0;this.thumbGap=e("gap"),this.thumbExtraGap=e("extra-gap"),this[Xi]=e("width")||40,this[$e]=e("clip-width")||40,this[Dt]=e("height")||40}build(){const s=this;if(s.state!==rt.Init)return;if(s.isDisabled())return void s.emit("disabled");const e=s.instance,t=e.container,i=s.getSlides(),n=s.option("type");s.type=n;const r=s.option("parentEl"),o=s.cn("container"),a=s.cn("track");let l=r?.querySelector("."+o);l||(l=document.createElement("div"),k(l,o),r?r.appendChild(l):t.after(l)),k(l,`is-${n}`),k(t,s.cn("hasThumbs")),s.container=l,s.updateProps();let c=l.querySelector("."+a);c||(c=document.createElement("div"),k(c,s.cn("track")),l.appendChild(c)),s.track=c;const h=Pe({},{track:c,infinite:!1,center:!0,fill:n==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},s.option("Carousel")||{},{Sync:{target:e},slides:i}),u=new e.constructor(l,h);u.on("createSlide",(d,f)=>{s.setProps(f.index),s.emit("createSlide",f,f.el)}),u.on("ready",()=>{s.shiftModern(),s.emit("ready")}),u.on("refresh",()=>{s.shiftModern()}),u.on("Panzoom.click",(d,f,m)=>{s.onClick(m)}),s.carousel=u,s.state=rt.Ready}onClick(s){s.preventDefault(),s.stopPropagation();const e=this.instance,{pages:t,page:i}=e,n=g=>{if(g){const y=g.closest("[data-carousel-index]");if(y)return[parseInt(y.dataset.carouselIndex||"",10)||0,y]}return[-1,void 0]},r=(g,y)=>{const E=document.elementFromPoint(g,y);return E?n(E):[-1,void 0]};let[o,a]=n(s.target);if(o>-1)return;const l=this[$e],c=s.clientX,h=s.clientY;let[u,d]=r(c-l,h),[f,m]=r(c+l,h);d&&m?(o=Math.abs(c-d.getBoundingClientRect().right)<Math.abs(c-m.getBoundingClientRect().left)?u:f,o===i&&(o=o===u?f:u)):d?o=u:m&&(o=f),o>-1&&t[o]&&e.slideTo(o)}getShift(s){var e;const t=this,{instance:i}=t,n=t.carousel;if(!i||!n)return 0;const r=t[Xi],o=t[$e],a=t.thumbGap,l=t.thumbExtraGap;if(!(!((e=n.slides[s])===null||e===void 0)&&e.el))return 0;const c=.5*(r-o),h=i.pages.length-1;let u=i.getProgress(0),d=i.getProgress(h),f=i.getProgress(s,!1,!0),m=0,g=c+l+a;const y=u<0&&u>-1,E=d>0&&d<1;return s===0?(m=g*Math.abs(u),E&&u===1&&(m-=g*Math.abs(d))):s===h?(m=g*Math.abs(d)*-1,y&&d===-1&&(m+=g*Math.abs(u))):y||E?(m=-1*g,m+=g*Math.abs(u),m+=g*(1-Math.abs(d))):m=g*f,m}setProps(s){var e;const t=this;if(!t.isModern)return;const{instance:i}=t,n=t.carousel;if(i&&n){const r=(e=n.slides[s])===null||e===void 0?void 0:e.el;if(r&&r.childNodes.length){let o=M(1-Math.abs(i.getProgress(s))),a=M(t.getShift(s));r.style.setProperty("--progress",o?o+"":""),r.style.setProperty("--shift",a+"")}}}shiftModern(){const s=this;if(!s.isModern)return;const{instance:e,track:t}=s,i=e.panzoom,n=s.carousel;if(!(e&&t&&i&&n)||i.state===ie.Init||i.state===ie.Destroy)return;for(const o of e.slides)s.setProps(o.index);let r=(s[$e]+s.thumbGap)*(n.slides.length||0);t.style.setProperty("--width",r+"")}cleanup(){const s=this;s.carousel&&s.carousel.destroy(),s.carousel=null,s.container&&s.container.remove(),s.container=null,s.track&&s.track.remove(),s.track=null,s.state=rt.Init,J(s.instance.container,s.cn("hasThumbs"))}attach(){const s=this,e=s.instance;e.on("initSlide",s.onInitSlide),e.state===ge.Init?e.on("initSlides",s.onInitSlides):s.onInitSlides(),e.on(["change","Panzoom.afterTransform"],s.onChange),e.on("Panzoom.refresh",s.onRefresh)}detach(){const s=this,e=s.instance;e.off("initSlide",s.onInitSlide),e.off("initSlides",s.onInitSlides),e.off(["change","Panzoom.afterTransform"],s.onChange),e.off("Panzoom.refresh",s.onRefresh),s.cleanup()}};Object.defineProperty(Mo,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Co});const cl=Object.assign(Object.assign({},Co),{key:"t",showOnStart:!0,parentEl:null}),xr="is-masked",Or="aria-hidden";class Po extends He{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){const e=this.ref;return e&&!e.isDisabled()}get isHidden(){return this.hidden}onClick(e,t){t.stopPropagation()}onCreateSlide(e,t){var i,n,r;const o=((r=(n=(i=this.instance)===null||i===void 0?void 0:i.carousel)===null||n===void 0?void 0:n.slides[t.index])===null||r===void 0?void 0:r.type)||"",a=t.el;if(a&&o){let l=`for-${o}`;["video","youtube","vimeo","html5video"].includes(o)&&(l+=" for-video"),k(a,l)}}onInit(){var e;const t=this,i=t.instance,n=i.carousel;if(t.ref||!n)return;const r=t.option("parentEl")||i.footer||i.container;if(!r)return;const o=Pe({},t.options,{parentEl:r,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:i.option("Carousel.friction")||0}},on:{ready:a=>{const l=a.container;l&&this.hidden&&(t.refresh(),l.style.transition="none",t.hide(),l.offsetHeight,queueMicrotask(()=>{l.style.transition="",t.show()}))}}});o.Carousel=o.Carousel||{},o.Carousel.on=Pe(((e=t.options.Carousel)===null||e===void 0?void 0:e.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),n.options.Thumbs=o,n.attachPlugins({Thumbs:Mo}),t.ref=n.plugins.Thumbs,t.option("showOnStart")||(t.ref.state=rt.Hidden,t.hidden=!0)}onResize(){var e;const t=(e=this.ref)===null||e===void 0?void 0:e.container;t&&(t.style.maxHeight="")}onKeydown(e,t){const i=this.option("key");i&&i===t&&this.toggle()}toggle(){const e=this.ref;if(e&&!e.isDisabled())return e.state===rt.Hidden?(e.state=rt.Init,void e.build()):void(this.hidden?this.show():this.hide())}show(){const e=this.ref;if(!e||e.isDisabled())return;const t=e.container;t&&(this.refresh(),t.offsetHeight,t.removeAttribute(Or),t.classList.remove(xr),this.hidden=!1)}hide(){const e=this.ref,t=e&&e.container;t&&(this.refresh(),t.offsetHeight,t.classList.add(xr),t.setAttribute(Or,"true")),this.hidden=!0}refresh(){const e=this.ref;if(!e||!e.state)return;const t=e.container,i=t?.firstChild||null;t&&i&&i.childNodes.length&&(t.style.maxHeight=`${i.getBoundingClientRect().height}px`)}attach(){const e=this,t=e.instance;t.state===ye.Init?t.on("Carousel.init",e.onInit):e.onInit(),t.on("resize",e.onResize),t.on("keydown",e.onKeydown)}detach(){var e;const t=this,i=t.instance;i.off("Carousel.init",t.onInit),i.off("resize",t.onResize),i.off("keydown",t.onKeydown),(e=i.carousel)===null||e===void 0||e.detachPlugins(["Thumbs"]),t.ref=null}}Object.defineProperty(Po,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:cl});const dn={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};var At;(function(s){s[s.Init=0]="Init",s[s.Ready=1]="Ready",s[s.Disabled=2]="Disabled"})(At||(At={}));const hl={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},dl={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Rr="has-toolbar",un="fancybox__toolbar";class xo extends He{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:At.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(e){var t;if(!e.carousel)return;let i=this.option("display"),n=this.option("absolute"),r=this.option("enabled");if(r==="auto"){const c=this.instance.carousel;let h=0;if(c)for(const u of c.slides)(u.panzoom||u.type==="image")&&h++;h||(r=!1)}r||(i=void 0);let o=0;const a={left:[],middle:[],right:[]};if(i)for(const c of["left","middle","right"])for(const h of i[c]){const u=this.createEl(h);u&&((t=a[c])===null||t===void 0||t.push(u),o++)}let l=null;if(o&&(l=this.createContainer()),l){for(const[c,h]of Object.entries(a)){const u=document.createElement("div");k(u,un+"__column is-"+c);for(const d of h)u.appendChild(d);n!=="auto"||c!=="middle"||h.length||(n=!0),l.appendChild(u)}n===!0&&k(l,"is-absolute"),this.state=At.Ready,this.onRefresh()}else this.state=At.Disabled}onClick(e){var t,i;const n=this.instance,r=n.getSlide(),o=r?.panzoom,a=e.target,l=a&&Me(a)?a.dataset:null;if(!l)return;if(l.fancyboxToggleThumbs!==void 0)return e.preventDefault(),e.stopPropagation(),void((t=n.plugins.Thumbs)===null||t===void 0||t.toggle());if(l.fancyboxToggleFullscreen!==void 0)return e.preventDefault(),e.stopPropagation(),void this.instance.toggleFullscreen();if(l.fancyboxToggleSlideshow!==void 0){e.preventDefault(),e.stopPropagation();const u=(i=n.carousel)===null||i===void 0?void 0:i.plugins.Autoplay;let d=u.isActive;return o&&o.panMode==="mousemove"&&!d&&o.reset(),void(d?u.stop():u.start())}const c=l.panzoomAction,h=l.panzoomChange;if((h||c)&&(e.preventDefault(),e.stopPropagation()),h){let u={};try{u=JSON.parse(h)}catch{}o&&o.applyChange(u)}else c&&o&&o[c]&&o[c]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;const e=this.container;if(!e)return;const t=this.instance.getSlide();if(!t||t.state!==Ae.Ready)return;const i=t&&!t.error&&t.panzoom;for(const o of e.querySelectorAll("[data-panzoom-action]"))i?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));let n=i&&i.canZoomIn(),r=i&&i.canZoomOut();for(const o of e.querySelectorAll('[data-panzoom-action="zoomIn"]'))n?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));for(const o of e.querySelectorAll('[data-panzoom-action="zoomOut"]'))r?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));for(const o of e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){r||n?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));const a=o.querySelector("g");a&&(a.style.display=n?"":"none")}}onDone(e,t){var i;(i=t.panzoom)===null||i===void 0||i.on("afterTransform",()=>{this.instance.isCurrentSlide(t)&&this.onRefresh()}),this.instance.isCurrentSlide(t)&&this.onRefresh()}createContainer(){const e=this.instance.container;if(!e)return null;const t=this.option("parentEl")||e;let i=t.querySelector("."+un);return i||(i=document.createElement("div"),k(i,un),t.prepend(i)),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&k(e,Rr),this.container=i,i}createEl(e){const t=this.instance,i=t.carousel;if(!i||e==="toggleFS"||e==="fullscreen"&&!bo())return null;let n=null;const r=i.slides.length||0;let o=0,a=0;for(const c of i.slides)(c.panzoom||c.type==="image")&&o++,(c.type==="image"||c.downloadSrc)&&a++;if(r<2&&["infobar","prev","next"].includes(e))return n;if(dn[e]!==void 0&&!o||e==="download"&&!a)return null;if(e==="thumbs"){const c=t.plugins.Thumbs;if(!c||!c.isEnabled)return null}if(e==="slideshow"&&(!i.plugins.Autoplay||r<2))return null;if(dn[e]!==void 0){const c=dn[e];n=document.createElement("button"),n.setAttribute("title",this.instance.localize(`{{${e.toUpperCase()}}}`)),k(n,"f-button"),c.action&&(n.dataset.panzoomAction=c.action),c.change&&(n.dataset.panzoomChange=JSON.stringify(c.change)),n.appendChild(Ke(this.instance.localize(c.icon)))}else{const c=(this.option("items")||[])[e];c&&(n=Ke(this.instance.localize(c.tpl)),typeof c.click=="function"&&n.addEventListener("click",h=>{h.preventDefault(),h.stopPropagation(),typeof c.click=="function"&&c.click.call(this,this,h)}))}const l=n?.querySelector("svg");if(l)for(const[c,h]of Object.entries(dl))l.getAttribute(c)||l.setAttribute(c,String(h));return n}removeContainer(){const e=this.container;e&&e.remove(),this.container=null,this.state=At.Disabled;const t=this.instance.container;t&&J(t,Rr)}attach(){const e=this,t=e.instance;t.on("Carousel.initSlides",e.onReady),t.on("done",e.onDone),t.on(["reveal","Carousel.change"],e.onChange),e.onReady(e.instance)}detach(){const e=this,t=e.instance;t.off("Carousel.initSlides",e.onReady),t.off("done",e.onDone),t.off(["reveal","Carousel.change"],e.onChange),e.removeContainer()}}Object.defineProperty(xo,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:hl});const ul={Hash:class extends He{onReady(){di=!1}onChange(s){St&&clearTimeout(St);const{hash:e}=vo(),{hash:t}=fs(),i=s.isOpeningSlide(s.getSlide());i&&(Ar=t===e?"":t),e&&e!==t&&(St=setTimeout(()=>{try{if(s.state===ye.Ready){let n="replaceState";i&&!$i&&(n="pushState",$i=!0),window.history[n]({},document.title,window.location.pathname+window.location.search+e)}}catch{}},300))}onClose(s){if(St&&clearTimeout(St),!di&&$i)return $i=!1,di=!1,void window.history.back();if(!di)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(Ar||""))}catch{}}attach(){const s=this.instance;s.on("ready",this.onReady),s.on(["Carousel.ready","Carousel.change"],this.onChange),s.on("close",this.onClose)}detach(){const s=this.instance;s.off("ready",this.onReady),s.off(["Carousel.ready","Carousel.change"],this.onChange),s.off("close",this.onClose)}static parseURL(){return fs()}static startFromUrl(){yo()}static destroy(){window.removeEventListener("hashchange",So,!1)}},Html:To,Images:Eo,Slideshow:Lo,Thumbs:Po,Toolbar:xo},kr="with-fancybox",fn="hide-scrollbar",Fr="--fancybox-scrollbar-compensate",Ir="--fancybox-body-margin",mn="aria-hidden",pn="is-using-tab",gn="is-animated",Br="is-compact",_r="is-loading",bn="is-opening",Gi="has-caption",Vt="disabled",vt="tabindex",Dr="download",vn="href",zt="src",ot=s=>typeof s=="string",Vr=function(){var s=window.getSelection();return!!s&&s.type==="Range"};let _e,De=null,yt=null,zr=0,Nr=0;const hi=new Map;let fl=0;class X extends Jn{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(e=[],t={},i={}){super(t),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ye.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),_e||(_e=bo()),this.id=t.id||++fl,hi.set(this.id,this),this.userSlides=e,this.userPlugins=i,queueMicrotask(()=>{this.init()})}init(){if(this.state===ye.Destroy)return;this.state=ye.Init,this.attachPlugins(Object.assign(Object.assign({},X.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),this.option("hideScrollbar")===!0&&(()=>{if(!mi)return;const t=document,i=t.body,n=t.documentElement;if(i.classList.contains(fn))return;let r=window.innerWidth-n.getBoundingClientRect().width;const o=parseFloat(window.getComputedStyle(i).marginRight);r<0&&(r=0),n.style.setProperty(Fr,`${r}px`),o&&i.style.setProperty(Ir,`${o}px`),i.classList.add(fn)})(),this.initLayout(),this.scale();const e=()=>{this.initCarousel(this.userSlides),this.state=ye.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(mn,"false")},16)};this.option("Fullscreen.autoStart")&&_e&&!_e.isFullscreen()?_e.request().then(()=>{this.startedFs=!0,e()}).catch(()=>e()):e()}initLayout(){var e,t;const i=this.option("parentEl")||document.body,n=Ke(this.localize(this.option("tpl.main")||""));n&&(n.setAttribute("id",`fancybox-${this.id}`),n.setAttribute("aria-label",this.localize("{{MODAL}}")),n.classList.toggle(Br,this.isCompact),k(n,this.option("mainClass")||""),k(n,bn),this.container=n,this.footer=n.querySelector(".fancybox__footer"),i.appendChild(n),k(document.documentElement,kr),De&&yt||(De=document.createElement("span"),k(De,"fancybox-focus-guard"),De.setAttribute(vt,"0"),De.setAttribute(mn,"true"),De.setAttribute("aria-label","Focus guard"),yt=De.cloneNode(),(e=n.parentElement)===null||e===void 0||e.insertBefore(De,n),(t=n.parentElement)===null||t===void 0||t.append(yt)),n.addEventListener("mousedown",r=>{zr=r.pageX,Nr=r.pageY,J(n,pn)}),this.option("animated")&&(k(n,gn),setTimeout(()=>{this.isClosing()||J(n,gn)},350)),this.emit("initLayout"))}initCarousel(e){const t=this.container;if(!t)return;const i=t.querySelector(".fancybox__carousel");if(!i)return;const n=this.carousel=new ft(i,Pe({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));n.on("*",(r,o,...a)=>{this.emit(`Carousel.${o}`,r,...a)}),n.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(r,o,a)=>{this.clearContent(a),a.state=void 0}),n.on("Panzoom.touchStart",()=>{var r,o;this.isCompact||this.endIdle(),!((r=document.activeElement)===null||r===void 0)&&r.closest(".f-thumbs")&&((o=this.container)===null||o===void 0||o.focus())}),n.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(n.on("Panzoom.afterTransform",(r,o)=>{const a=this.getSlide();if(a&&Ln(a.el))return;const l=this.container;if(l){const c=Math.abs(o.current.f),h=c<1?"":Math.max(.5,Math.min(1,1-c/o.contentRect.fitHeight*1.5));l.style.setProperty("--fancybox-ts",h?"0s":""),l.style.setProperty("--fancybox-opacity",h+"")}}),n.on("Panzoom.touchEnd",(r,o,a)=>{var l;const c=this.getSlide();if(c&&Ln(c.el)||o.isMobile&&document.activeElement&&["TEXTAREA","INPUT"].indexOf((l=document.activeElement)===null||l===void 0?void 0:l.nodeName)!==-1)return;const h=Math.abs(o.dragOffset.y);o.lockedAxis==="y"&&(h>=200||h>=50&&o.dragOffset.time<300)&&(a&&a.cancelable&&a.preventDefault(),this.close(a,"f-throwOut"+(o.current.f<0?"Up":"Down")))})),n.on("change",r=>{var o;let a=(o=this.getSlide())===null||o===void 0?void 0:o.triggerEl;if(a){const l=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:r.page});a.dispatchEvent(l)}}),n.on(["refresh","change"],r=>{const o=this.container;if(!o)return;for(const c of o.querySelectorAll("[data-fancybox-current-index]"))c.innerHTML=r.page+1;for(const c of o.querySelectorAll("[data-fancybox-count]"))c.innerHTML=r.pages.length;if(!r.isInfinite){for(const c of o.querySelectorAll("[data-fancybox-next]"))r.page<r.pages.length-1?(c.removeAttribute(Vt),c.removeAttribute(vt)):(c.setAttribute(Vt,""),c.setAttribute(vt,"-1"));for(const c of o.querySelectorAll("[data-fancybox-prev]"))r.page>0?(c.removeAttribute(Vt),c.removeAttribute(vt)):(c.setAttribute(Vt,""),c.setAttribute(vt,"-1"))}const a=this.getSlide();if(!a)return;let l=a.downloadSrc||"";l||a.type!=="image"||a.error||!ot(a[zt])||(l=a[zt]);for(const c of o.querySelectorAll("[data-fancybox-download]")){const h=a.downloadFilename;l?(c.removeAttribute(Vt),c.removeAttribute(vt),c.setAttribute(vn,l),c.setAttribute(Dr,h||l),c.setAttribute("target","_blank")):(c.setAttribute(Vt,""),c.setAttribute(vt,"-1"),c.removeAttribute(vn),c.removeAttribute(Dr))}}),this.emit("initCarousel")}attachEvents(){const e=this,t=e.container;if(!t)return;t.addEventListener("click",e.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize);const i=window.visualViewport;i&&(i.addEventListener("scroll",e.onResize),i.addEventListener("resize",e.onResize))}detachEvents(){const e=this,t=e.container;if(!t)return;document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),t.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),t.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize);const i=window.visualViewport;i&&(i.removeEventListener("resize",e.onResize),i.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0)}scale(){const e=this.container;if(!e)return;const t=window.visualViewport,i=Math.max(1,t?.scale||1);let n="",r="",o="";if(t&&i>1){let a=`${t.offsetLeft}px`,l=`${t.offsetTop}px`;n=t.width*i+"px",r=t.height*i+"px",o=`translate3d(${a}, ${l}, 0) scale(${1/i})`}e.style.transform=o,e.style.width=n,e.style.height=r}onClick(e){var t;const{container:i,isCompact:n}=this;if(!i||this.isClosing())return;!n&&this.option("idle")&&this.resetIdle();const r=e.composedPath()[0];if(r.closest(".fancybox-spinner")||r.closest("[data-fancybox-close]"))return e.preventDefault(),void this.close(e);if(r.closest("[data-fancybox-prev]"))return e.preventDefault(),void this.prev();if(r.closest("[data-fancybox-next]"))return e.preventDefault(),void this.next();if(e.type==="click"&&e.detail===0||Math.abs(e.pageX-zr)>30||Math.abs(e.pageY-Nr)>30)return;const o=document.activeElement;if(Vr()&&o&&i.contains(o))return;if(n&&((t=this.getSlide())===null||t===void 0?void 0:t.type)==="image")return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",e),e.defaultPrevented)return;let a=!1;if(r.closest(".fancybox__content")){if(o){if(o.closest("[contenteditable]"))return;r.matches(ln)||o.blur()}if(Vr())return;a=this.option("contentClick")}else r.closest(".fancybox__carousel")&&!r.matches(ln)&&(a=this.option("backdropClick"));a==="close"?(e.preventDefault(),this.close(e)):a==="next"?(e.preventDefault(),this.next()):a==="prev"&&(e.preventDefault(),this.prev())}onWheel(e){const t=e.target;let i=this.option("wheel",e);t.closest(".fancybox__thumbs")&&(i="slide");const n=i==="slide",r=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(l,c){return Math.abs(c)>Math.abs(l)?c:l}),o=Math.max(-1,Math.min(1,r)),a=Date.now();this.pwt&&a-this.pwt<300?n&&e.preventDefault():(this.pwt=a,this.emit("wheel",e,o),e.defaultPrevented||(i==="close"?(e.preventDefault(),this.close(e)):i==="slide"&&(ds(t)||(e.preventDefault(),this[o>0?"prev":"next"]()))))}onKeydown(e){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();const t=e.key,i=this.option("keyboard");if(!i)return;const n=e.composedPath()[0],r=document.activeElement&&document.activeElement.classList,o=r&&r.contains("f-button")||n.dataset.carouselPage||n.dataset.carouselIndex;if(t!=="Escape"&&!o&&Me(n)&&(n.isContentEditable||["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(n.nodeName)!==-1)||(e.key==="Tab"?k(this.container,pn):J(this.container,pn),e.ctrlKey||e.altKey||e.shiftKey))return;this.emit("keydown",t,e);const a=i[t];a&&typeof this[a]=="function"&&(e.preventDefault(),this[a]())}onResize(){const e=this.container;if(!e)return;const t=this.isCompact;e.classList.toggle(Br,t),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(e){this.isTopmost()&&this.checkFocus(e)}onMousemove(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){document.visibilityState==="visible"?this.checkFocus():this.endIdle()}manageCloseBtn(e){const t=this.optionFor(e,"closeButton")||!1;if(t==="auto"){const n=this.plugins.Toolbar;if(n&&n.state===At.Ready)return}if(!t||!e.contentEl||e.closeBtnEl)return;const i=this.option("tpl.closeButton");if(i){const n=Ke(this.localize(i));e.closeBtnEl=e.contentEl.appendChild(n),e.el&&k(e.el,"has-close-btn")}}manageCaption(e=void 0){var t,i;const n="fancybox__caption",r=this.container;if(!r)return;J(r,Gi);const o=this.isCompact||this.option("commonCaption"),a=!o;if(this.caption&&this.stop(this.caption),a&&this.caption&&(this.caption.remove(),this.caption=null),o&&!this.caption)for(const u of((t=this.carousel)===null||t===void 0?void 0:t.slides)||[])u.captionEl&&(u.captionEl.remove(),u.captionEl=void 0,J(u.el,Gi),(i=u.el)===null||i===void 0||i.removeAttribute("aria-labelledby"));if(e||(e=this.getSlide()),!e||o&&!this.isCurrentSlide(e))return;const l=e.el;let c=this.optionFor(e,"caption","");if(!c)return void(o&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let h=null;if(a){if(h=e.captionEl||null,l&&!h){const u=n+`_${this.id}_${e.index}`;h=document.createElement("div"),k(h,n),h.setAttribute("id",u),e.captionEl=l.appendChild(h),k(l,Gi),l.setAttribute("aria-labelledby",u)}}else h=this.caption,h||(h=r.querySelector("."+n)),!h&&(h=document.createElement("div"),h.dataset.fancyboxCaption="",k(h,n),(this.footer||r).prepend(h)),k(r,Gi),this.caption=h;h&&(h.innerHTML="",ot(c)||typeof c=="number"?h.innerHTML=c+"":c instanceof HTMLElement&&h.appendChild(c))}checkFocus(e){this.focus(e)}focus(e){var t;if(this.ignoreFocusChange)return;const i=document.activeElement||null,n=e?.target||null,r=this.container,o=(t=this.carousel)===null||t===void 0?void 0:t.viewport;if(!r||!o||!e&&i&&r.contains(i))return;const a=this.getSlide(),l=a&&a.state===Ae.Ready?a.el:null;if(!l||l.contains(i)||r===i)return;e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;const c=Array.from(r.querySelectorAll(ln));let h=[],u=null;for(let f of c){const m=!f.offsetParent||!!f.closest('[aria-hidden="true"]'),g=l&&l.contains(f),y=!o.contains(f);if(f===r||(g||y)&&!m){h.push(f);const E=f.dataset.origTabindex;E!==void 0&&E&&(f.tabIndex=parseFloat(E)),f.removeAttribute("data-orig-tabindex"),!f.hasAttribute("autoFocus")&&u||(u=f)}else{const E=f.dataset.origTabindex===void 0?f.getAttribute("tabindex")||"":f.dataset.origTabindex;E&&(f.dataset.origTabindex=E),f.tabIndex=-1}}let d=null;e?(!n||h.indexOf(n)<0)&&(d=u||r,h.length&&(i===yt?d=h[0]:this.lastFocus!==r&&i!==De||(d=h[h.length-1]))):d=a&&a.type==="image"?r:u||r,d&&Tr(d),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){const e=this.carousel;e&&e.pages.length>1&&e.slideNext()}prev(){const e=this.carousel;e&&e.pages.length>1&&e.slidePrev()}jumpTo(...e){this.carousel&&this.carousel.slideTo(...e)}isTopmost(){var e;return((e=X.getInstance())===null||e===void 0?void 0:e.id)==this.id}animate(e=null,t="",i){if(!e||!t)return void(i&&i());this.stop(e);const n=r=>{r.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",n),delete e.dataset.animationName,i&&i(),J(e,t))};e.dataset.animationName=t,e.addEventListener("animationend",n),k(e,t)}stop(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}setContent(e,t="",i=!0){if(this.isClosing())return;const n=e.el;if(!n)return;let r=null;if(Me(t)?r=t:(r=Ke(t+""),Me(r)||(r=document.createElement("div"),r.innerHTML=t+"")),["img","picture","iframe","video","audio"].includes(r.nodeName.toLowerCase())){const o=document.createElement("div");o.appendChild(r),r=o}Me(r)&&e.filter&&!e.error&&(r=r.querySelector(e.filter)),r&&Me(r)?(k(r,"fancybox__content"),e.id&&r.setAttribute("id",e.id),r.style.display!=="none"&&getComputedStyle(r).getPropertyValue("display")!=="none"||(r.style.display=e.display||this.option("defaultDisplay")||"flex"),n.classList.add(`has-${e.error?"error":e.type||"unknown"}`),n.prepend(r),e.contentEl=r,i&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}")}revealContent(e,t){const i=e.el,n=e.contentEl;i&&n&&(this.emit("reveal",e),this.hideLoading(e),e.state=Ae.Opening,(t=this.isOpeningSlide(e)?t===void 0?this.optionFor(e,"showClass"):t:"f-fadeIn")?this.animate(n,t,()=>{this.done(e)}):this.done(e))}done(e){this.isClosing()||(e.state=Ae.Ready,this.emit("done",e),k(e.el,"is-done"),this.isCurrentSlide(e)&&this.option("autoFocus")&&queueMicrotask(()=>{var t;(t=e.panzoom)===null||t===void 0||t.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(e)&&(J(this.container,bn),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(e){const t=this.getSlide();return!(!e||!t)&&t.index===e.index}isOpeningSlide(e){var t,i;return((t=this.carousel)===null||t===void 0?void 0:t.prevPage)===null&&e&&e.index===((i=this.getSlide())===null||i===void 0?void 0:i.index)}showLoading(e){e.state=Ae.Loading;const t=e.el;t&&(k(t,_r),this.emit("loading",e),e.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!e.spinnerEl&&e.state===Ae.Loading){let i=Ke(Qn);k(i,"fancybox-spinner"),e.spinnerEl=i,t.prepend(i),this.animate(i,"f-fadeIn")}},250))}hideLoading(e){const t=e.el;if(!t)return;const i=e.spinnerEl;this.isClosing()?i?.remove():(J(t,_r),i&&this.animate(i,"f-fadeOut",()=>{i.remove()}),e.state===Ae.Loading&&(this.emit("loaded",e),e.state=Ae.Ready))}setError(e,t){if(this.isClosing())return;const i=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",i,e),i.defaultPrevented)return;e.error=t,this.hideLoading(e),this.clearContent(e);const n=document.createElement("div");n.classList.add("fancybox-error"),n.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,n)}clearContent(e){if(e.state===void 0)return;this.emit("clearContent",e),e.contentEl&&(e.contentEl.remove(),e.contentEl=void 0);const t=e.el;t&&(J(t,"has-error"),J(t,"has-unknown"),J(t,`has-${e.type||"unknown"}`)),e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0}getSlide(){var e;const t=this.carousel;return((e=t?.pages[t?.page])===null||e===void 0?void 0:e.slides[0])||void 0}close(e,t){if(this.isClosing())return;const i=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",i,e),i.defaultPrevented)return;e&&e.cancelable&&(e.preventDefault(),e.stopPropagation());const n=()=>{this.proceedClose(e,t)};this.startedFs&&_e&&_e.isFullscreen()?Promise.resolve(_e.exit()).then(()=>n()):n()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(e=!1){const t=()=>{this.clearIdle(),this.idle=!0,k(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(e)t();else{const i=this.option("idle");i&&(this.idleTimer=setTimeout(t,i))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,J(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){_e&&(_e.isFullscreen()?_e.exit():_e.request().then(()=>{this.startedFs=!0}))}isClosing(){return[ye.Closing,ye.CustomClosing,ye.Destroy].includes(this.state)}proceedClose(e,t){var i,n;this.state=ye.Closing,this.clearIdle(),this.detachEvents();const r=this.container,o=this.carousel,a=this.getSlide(),l=a&&this.option("placeFocusBack")?a.triggerEl||this.option("triggerEl"):null;if(l&&(go(l)?Tr(l):l.focus()),r&&(J(r,bn),k(r,"is-closing"),r.setAttribute(mn,"true"),this.option("animated")&&k(r,gn),r.style.pointerEvents="none"),o){o.clearTransitions(),(i=o.panzoom)===null||i===void 0||i.destroy(),(n=o.plugins.Navigation)===null||n===void 0||n.detach();for(const c of o.slides){c.state=Ae.Closing,this.hideLoading(c);const h=c.contentEl;h&&this.stop(h);const u=c?.panzoom;u&&(u.stop(),u.detachEvents(),u.detachObserver()),this.isCurrentSlide(c)||o.emit("removeSlide",c)}}this.emit("close",e),this.state!==ye.CustomClosing?(t===void 0&&a&&(t=this.optionFor(a,"hideClass")),t&&a?(this.animate(a.contentEl,t,()=>{o&&o.emit("removeSlide",a)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var e;if(this.state===ye.Destroy)return;this.state=ye.Destroy,(e=this.carousel)===null||e===void 0||e.destroy();const t=this.container;t&&t.remove(),hi.delete(this.id);const i=X.getInstance();i?i.focus():(De&&(De.remove(),De=null),yt&&(yt.remove(),yt=null),J(document.documentElement,kr),(()=>{if(!mi)return;const n=document,r=n.body;r.classList.remove(fn),r.style.setProperty(Ir,""),n.documentElement.style.setProperty(Fr,"")})(),this.emit("destroy"))}static bind(e,t,i){if(!mi)return;let n,r="",o={};if(e===void 0?n=document.body:ot(e)?(n=document.body,r=e,typeof t=="object"&&(o=t||{})):(n=e,ot(t)&&(r=t),typeof i=="object"&&(o=i||{})),!n||!Me(n))return;r=r||"[data-fancybox]";const a=X.openers.get(n)||new Map;a.set(r,o),X.openers.set(n,a),a.size===1&&n.addEventListener("click",X.fromEvent)}static unbind(e,t){let i,n="";if(ot(e)?(i=document.body,n=e):(i=e,ot(t)&&(n=t)),!i)return;const r=X.openers.get(i);r&&n&&r.delete(n),n&&r||(X.openers.delete(i),i.removeEventListener("click",X.fromEvent))}static destroy(){let e;for(;e=X.getInstance();)e.destroy();for(const t of X.openers.keys())t.removeEventListener("click",X.fromEvent);X.openers=new Map}static fromEvent(e){if(e.defaultPrevented||e.button&&e.button!==0||e.ctrlKey||e.metaKey||e.shiftKey)return;let t=e.composedPath()[0];const i=t.closest("[data-fancybox-trigger]");if(i){const m=i.dataset.fancyboxTrigger||"",g=document.querySelectorAll(`[data-fancybox="${m}"]`),y=parseInt(i.dataset.fancyboxIndex||"",10)||0;t=g[y]||t}if(!(t&&t instanceof Element))return;let n,r,o,a;if([...X.openers].reverse().find(([m,g])=>!(!m.contains(t)||![...g].reverse().find(([y,E])=>{let L=t.closest(y);return!!L&&(n=m,r=y,o=L,a=E,!0)}))),!n||!r||!o)return;a=a||{},e.preventDefault(),t=o;let l=[],c=Pe({},Mn,a);c.event=e,c.triggerEl=t,c.delegate=i;const h=c.groupAll,u=c.groupAttr,d=u&&t?t.getAttribute(`${u}`):"";if((!t||d||h)&&(l=[].slice.call(n.querySelectorAll(r))),t&&!h&&(l=d?l.filter(m=>m.getAttribute(`${u}`)===d):[t]),!l.length)return;const f=X.getInstance();return f&&f.options.triggerEl&&l.indexOf(f.options.triggerEl)>-1?void 0:(t&&(c.startIndex=l.indexOf(t)),X.fromNodes(l,c))}static fromSelector(e,t,i){let n=null,r="",o={};if(ot(e)?(n=document.body,r=e,typeof t=="object"&&(o=t||{})):e instanceof HTMLElement&&ot(t)&&(n=e,r=t,typeof i=="object"&&(o=i||{})),!n||!r)return!1;const a=X.openers.get(n);return!!a&&(o=Pe({},a.get(r)||{},o),!!o&&X.fromNodes(Array.from(n.querySelectorAll(r)),o))}static fromNodes(e,t){t=Pe({},Mn,t||{});const i=[];for(const n of e){const r=n.dataset||{},o=r[zt]||n.getAttribute(vn)||n.getAttribute("currentSrc")||n.getAttribute(zt)||void 0;let a;const l=t.delegate;let c;l&&i.length===t.startIndex&&(a=l instanceof HTMLImageElement?l:l.querySelector("img:not([aria-hidden])")),a||(a=n instanceof HTMLImageElement?n:n.querySelector("img:not([aria-hidden])")),a&&(c=a.currentSrc||a[zt]||void 0,!c&&a.dataset&&(c=a.dataset.lazySrc||a.dataset[zt]||void 0));const h={src:o,triggerEl:n,thumbEl:a,thumbElSrc:c,thumbSrc:c};for(const u in r){let d=r[u]+"";d=d!=="false"&&(d==="true"||d),h[u]=d}i.push(h)}return new X(i,t)}static getInstance(e){return e?hi.get(e):Array.from(hi.values()).reverse().find(t=>!t.isClosing()&&t)||null}static getSlide(){var e;return((e=X.getInstance())===null||e===void 0?void 0:e.getSlide())||null}static show(e=[],t={}){return new X(e,t)}static next(){const e=X.getInstance();e&&e.next()}static prev(){const e=X.getInstance();e&&e.prev()}static close(e=!0,...t){if(e)for(const i of hi.values())i.close(...t);else{const i=X.getInstance();i&&i.close(...t)}}}Object.defineProperty(X,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.33"}),Object.defineProperty(X,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Mn}),Object.defineProperty(X,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:ul}),Object.defineProperty(X,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});class ml{constructor(e,t,i){this.eventTarget=e,this.eventName=t,this.eventOptions=i,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){const t=pl(e);for(const i of this.bindings){if(t.immediatePropagationStopped)break;i.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{const i=e.index,n=t.index;return i<n?-1:i>n?1:0})}}function pl(s){if("immediatePropagationStopped"in s)return s;{const{stopImmediatePropagation:e}=s;return Object.assign(s,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}class gl{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,i={}){this.application.handleError(e,`Error ${t}`,i)}clearEventListenersForBinding(e){const t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){const{eventTarget:t,eventName:i,eventOptions:n}=e,r=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(i,n);r.delete(o),r.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){const{eventTarget:t,eventName:i,eventOptions:n}=e;return this.fetchEventListener(t,i,n)}fetchEventListener(e,t,i){const n=this.fetchEventListenerMapForEventTarget(e),r=this.cacheKey(t,i);let o=n.get(r);return o||(o=this.createEventListener(e,t,i),n.set(r,o)),o}createEventListener(e,t,i){const n=new ml(e,t,i);return this.started&&n.connect(),n}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){const i=[e];return Object.keys(t).sort().forEach(n=>{i.push(`${t[n]?"":"!"}${n}`)}),i.join(":")}}const bl={stop({event:s,value:e}){return e&&s.stopPropagation(),!0},prevent({event:s,value:e}){return e&&s.preventDefault(),!0},self({event:s,value:e,element:t}){return e?t===s.target:!0}},vl=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function yl(s){const t=s.trim().match(vl)||[];let i=t[2],n=t[3];return n&&!["keydown","keyup","keypress"].includes(i)&&(i+=`.${n}`,n=""),{eventTarget:wl(t[4]),eventName:i,eventOptions:t[7]?Sl(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||n}}function wl(s){if(s=="window")return window;if(s=="document")return document}function Sl(s){return s.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function El(s){if(s==window)return"window";if(s==document)return"document"}function er(s){return s.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function Pn(s){return er(s.replace(/--/g,"-").replace(/__/g,"_"))}function Fi(s){return s.charAt(0).toUpperCase()+s.slice(1)}function Oo(s){return s.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function Tl(s){return s.match(/[^\s]+/g)||[]}function jr(s){return s!=null}function xn(s,e){return Object.prototype.hasOwnProperty.call(s,e)}const Hr=["meta","ctrl","alt","shift"];class Al{constructor(e,t,i,n){this.element=e,this.index=t,this.eventTarget=i.eventTarget||e,this.eventName=i.eventName||Ll(e)||Yi("missing event name"),this.eventOptions=i.eventOptions||{},this.identifier=i.identifier||Yi("missing identifier"),this.methodName=i.methodName||Yi("missing method name"),this.keyFilter=i.keyFilter||"",this.schema=n}static forToken(e,t){return new this(e.element,e.index,yl(e.content),t)}toString(){const e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;const t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;const i=t.filter(n=>!Hr.includes(n))[0];return i?(xn(this.keyMappings,i)||Yi(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[i].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;const t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){const e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:i,value:n}of Array.from(this.element.attributes)){const r=i.match(t),o=r&&r[1];o&&(e[er(o)]=Cl(n))}return e}get eventTargetName(){return El(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){const[i,n,r,o]=Hr.map(a=>t.includes(a));return e.metaKey!==i||e.ctrlKey!==n||e.altKey!==r||e.shiftKey!==o}}const qr={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:s=>s.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function Ll(s){const e=s.tagName.toLowerCase();if(e in qr)return qr[e](s)}function Yi(s){throw new Error(s)}function Cl(s){try{return JSON.parse(s)}catch{return s}}class Ml{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){const t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){const e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){const{element:t}=this.action,{actionDescriptorFilters:i}=this.context.application,{controller:n}=this.context;let r=!0;for(const[o,a]of Object.entries(this.eventOptions))if(o in i){const l=i[o];r=r&&l({name:o,value:a,event:e,element:t,controller:n})}else continue;return r}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){const{target:t,currentTarget:i}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:i,action:this.methodName})}catch(n){const{identifier:r,controller:o,element:a,index:l}=this,c={identifier:r,controller:o,element:a,index:l,event:e};this.context.handleError(n,`invoking action "${this.action}"`,c)}}willBeInvokedByEvent(e){const t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class Ro{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const e=new Set(this.matchElementsInTree());for(const t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(const t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(const t of Array.from(e)){const i=this.elementFromNode(t);i&&this.processTree(i,this.removeElement)}}processAddedNodes(e){for(const t of Array.from(e)){const i=this.elementFromNode(t);i&&this.elementIsActive(i)&&this.processTree(i,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(const i of this.matchElementsInTree(e))t.call(this,i)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}}class ko{constructor(e,t,i){this.attributeName=t,this.delegate=i,this.elementObserver=new Ro(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){const t=this.matchElement(e)?[e]:[],i=Array.from(e.querySelectorAll(this.selector));return t.concat(i)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}}function Pl(s,e,t){Fo(s,e).add(t)}function xl(s,e,t){Fo(s,e).delete(t),Ol(s,e)}function Fo(s,e){let t=s.get(e);return t||(t=new Set,s.set(e,t)),t}function Ol(s,e){const t=s.get(e);t!=null&&t.size==0&&s.delete(e)}class Mt{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t.concat(Array.from(i)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t+i.size,0)}add(e,t){Pl(this.valuesByKey,e,t)}delete(e,t){xl(this.valuesByKey,e,t)}has(e,t){const i=this.valuesByKey.get(e);return i!=null&&i.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(i=>i.has(e))}getValuesForKey(e){const t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,i])=>i.has(e)).map(([t,i])=>t)}}class Rl{constructor(e,t,i,n){this._selector=t,this.details=n,this.elementObserver=new Ro(e,this),this.delegate=i,this.matchesByElement=new Mt}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){const{selector:t}=this;if(t){const i=e.matches(t);return this.delegate.selectorMatchElement?i&&this.delegate.selectorMatchElement(e,this.details):i}else return!1}matchElementsInTree(e){const{selector:t}=this;if(t){const i=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(t)).filter(r=>this.matchElement(r));return i.concat(n)}else return[]}elementMatched(e){const{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){const t=this.matchesByElement.getKeysForValue(e);for(const i of t)this.selectorUnmatched(e,i)}elementAttributeChanged(e,t){const{selector:i}=this;if(i){const n=this.matchElement(e),r=this.matchesByElement.has(i,e);n&&!r?this.selectorMatched(e,i):!n&&r&&this.selectorUnmatched(e,i)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}}class kl{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){const t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){const i=this.delegate.getStringMapKeyForAttribute(e);if(i!=null){this.stringMap.has(e)||this.stringMapKeyAdded(i,e);const n=this.element.getAttribute(e);if(this.stringMap.get(e)!=n&&this.stringMapValueChanged(n,i,t),n==null){const r=this.stringMap.get(e);this.stringMap.delete(e),r&&this.stringMapKeyRemoved(i,e,r)}else this.stringMap.set(e,n)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,i){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,i)}stringMapKeyRemoved(e,t,i){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,i)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class Io{constructor(e,t,i){this.attributeObserver=new ko(e,t,this),this.delegate=i,this.tokensByElement=new Mt}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){const[t,i]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(i)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){const t=this.tokensByElement.getValuesForKey(e),i=this.readTokensForElement(e),n=Il(t,i).findIndex(([r,o])=>!Bl(r,o));return n==-1?[[],[]]:[t.slice(n),i.slice(n)]}readTokensForElement(e){const t=this.attributeName,i=e.getAttribute(t)||"";return Fl(i,e,t)}}function Fl(s,e,t){return s.trim().split(/\s+/).filter(i=>i.length).map((i,n)=>({element:e,attributeName:t,content:i,index:n}))}function Il(s,e){const t=Math.max(s.length,e.length);return Array.from({length:t},(i,n)=>[s[n],e[n]])}function Bl(s,e){return s&&e&&s.index==e.index&&s.content==e.content}class Bo{constructor(e,t,i){this.tokenListObserver=new Io(e,t,this),this.delegate=i,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){const{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).set(e,i),this.delegate.elementMatchedValue(t,i))}tokenUnmatched(e){const{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,i))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}}class _l{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Bo(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){const t=new Ml(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){const t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){const t=Al.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}}class Dl{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new kl(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){const i=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,i.writer(this.receiver[e]),i.writer(i.defaultValue))}stringMapValueChanged(e,t,i){const n=this.valueDescriptorNameMap[t];e!==null&&(i===null&&(i=n.writer(n.defaultValue)),this.invokeChangedCallback(t,e,i))}stringMapKeyRemoved(e,t,i){const n=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,n.writer(this.receiver[e]),i):this.invokeChangedCallback(e,n.writer(n.defaultValue),i)}invokeChangedCallbacksForDefaultValues(){for(const{key:e,name:t,defaultValue:i,writer:n}of this.valueDescriptors)i!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,n(i),void 0)}invokeChangedCallback(e,t,i){const n=`${e}Changed`,r=this.receiver[n];if(typeof r=="function"){const o=this.valueDescriptorNameMap[e];try{const a=o.reader(t);let l=i;i&&(l=o.reader(i)),r.call(this.receiver,a,l)}catch(a){throw a instanceof TypeError&&(a.message=`Stimulus Value "${this.context.identifier}.${o.name}" - ${a.message}`),a}}}get valueDescriptors(){const{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){const e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{const i=this.valueDescriptorMap[t];e[i.name]=i}),e}hasValue(e){const t=this.valueDescriptorNameMap[e],i=`has${Fi(t.name)}`;return this.receiver[i]}}class Vl{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new Mt}start(){this.tokenListObserver||(this.tokenListObserver=new Io(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var i;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var i;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(const e of this.targetsByName.keys)for(const t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function Ii(s,e){const t=_o(s);return Array.from(t.reduce((i,n)=>(Nl(n,e).forEach(r=>i.add(r)),i),new Set))}function zl(s,e){return _o(s).reduce((i,n)=>(i.push(...jl(n,e)),i),[])}function _o(s){const e=[];for(;s;)e.push(s),s=Object.getPrototypeOf(s);return e.reverse()}function Nl(s,e){const t=s[e];return Array.isArray(t)?t:[]}function jl(s,e){const t=s[e];return t?Object.keys(t).map(i=>[i,t[i]]):[]}class Hl{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new Mt,this.outletElementsByName=new Mt,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:i}){const n=this.getOutlet(e,i);n&&this.connectOutlet(n,e,i)}selectorUnmatched(e,t,{outletName:i}){const n=this.getOutletFromMap(e,i);n&&this.disconnectOutlet(n,e,i)}selectorMatchElement(e,{outletName:t}){const i=this.selector(t),n=this.hasOutlet(e,t),r=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return i?n&&r&&e.matches(i):!1}elementMatchedAttribute(e,t){const i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}elementAttributeValueChanged(e,t){const i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}elementUnmatchedAttribute(e,t){const i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}connectOutlet(e,t,i){var n;this.outletElementsByName.has(i,t)||(this.outletsByName.add(i,e),this.outletElementsByName.add(i,t),(n=this.selectorObserverMap.get(i))===null||n===void 0||n.pause(()=>this.delegate.outletConnected(e,t,i)))}disconnectOutlet(e,t,i){var n;this.outletElementsByName.has(i,t)&&(this.outletsByName.delete(i,e),this.outletElementsByName.delete(i,t),(n=this.selectorObserverMap.get(i))===null||n===void 0||n.pause(()=>this.delegate.outletDisconnected(e,t,i)))}disconnectAllOutlets(){for(const e of this.outletElementsByName.keys)for(const t of this.outletElementsByName.getValuesForKey(e))for(const i of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(i,t,e)}updateSelectorObserverForOutlet(e){const t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){const t=this.selector(e),i=new Rl(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,i),i.start()}setupAttributeObserverForOutlet(e){const t=this.attributeNameForOutletName(e),i=new ko(this.scope.element,t,this);this.attributeObserverMap.set(e,i),i.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){const e=new Mt;return this.router.modules.forEach(t=>{const i=t.definition.controllerConstructor;Ii(i,"outlets").forEach(r=>e.add(r,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(i=>i.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}class ql{constructor(e,t){this.logDebugActivity=(i,n={})=>{const{identifier:r,controller:o,element:a}=this;n=Object.assign({identifier:r,controller:o,element:a},n),this.application.logDebugActivity(this.identifier,i,n)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new _l(this,this.dispatcher),this.valueObserver=new Dl(this,this.controller),this.targetObserver=new Vl(this,this),this.outletObserver=new Hl(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(i){this.handleError(i,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,i={}){const{identifier:n,controller:r,element:o}=this;i=Object.assign({identifier:n,controller:r,element:o},i),this.application.handleError(e,`Error ${t}`,i)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,i){this.invokeControllerMethod(`${Pn(i)}OutletConnected`,e,t)}outletDisconnected(e,t,i){this.invokeControllerMethod(`${Pn(i)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){const i=this.controller;typeof i[e]=="function"&&i[e](...t)}}function $l(s){return Wl(s,Ul(s))}function Wl(s,e){const t=Yl(s),i=Kl(s.prototype,e);return Object.defineProperties(t.prototype,i),t}function Ul(s){return Ii(s,"blessings").reduce((t,i)=>{const n=i(s);for(const r in n){const o=t[r]||{};t[r]=Object.assign(o,n[r])}return t},{})}function Kl(s,e){return Gl(e).reduce((t,i)=>{const n=Xl(s,e,i);return n&&Object.assign(t,{[i]:n}),t},{})}function Xl(s,e,t){const i=Object.getOwnPropertyDescriptor(s,t);if(!(i&&"value"in i)){const r=Object.getOwnPropertyDescriptor(e,t).value;return i&&(r.get=i.get||r.get,r.set=i.set||r.set),r}}const Gl=typeof Object.getOwnPropertySymbols=="function"?s=>[...Object.getOwnPropertyNames(s),...Object.getOwnPropertySymbols(s)]:Object.getOwnPropertyNames,Yl=(()=>{function s(t){function i(){return Reflect.construct(t,arguments,new.target)}return i.prototype=Object.create(t.prototype,{constructor:{value:i}}),Reflect.setPrototypeOf(i,t),i}function e(){const i=s(function(){this.a.call(this)});return i.prototype.a=function(){},new i}try{return e(),s}catch{return i=>class extends i{}}})();function Zl(s){return{identifier:s.identifier,controllerConstructor:$l(s.controllerConstructor)}}class Jl{constructor(e,t){this.application=e,this.definition=Zl(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){const t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){const t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new ql(this,e),this.contextsByScope.set(e,t)),t}}class Ql{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){const t=this.data.get(this.getDataKey(e))||"";return Tl(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}}class ec{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){const t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){const i=this.getAttributeNameForKey(e);return this.element.setAttribute(i,t),this.get(e)}has(e){const t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){const t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${Oo(e)}`}}class tc{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,i){let n=this.warnedKeysByObject.get(e);n||(n=new Set,this.warnedKeysByObject.set(e,n)),n.has(t)||(n.add(t),this.logger.warn(i,e))}}function On(s,e){return`[${s}~="${e}"]`}class ic{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findTarget(i)||this.findLegacyTarget(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllTargets(i),...this.findAllLegacyTargets(i)],[])}findTarget(e){const t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){const t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){const t=this.schema.targetAttributeForScope(this.identifier);return On(t,e)}findLegacyTarget(e){const t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){const t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(i=>this.deprecate(i,e))}getLegacySelectorForTargetName(e){const t=`${this.identifier}.${e}`;return On(this.schema.targetAttribute,t)}deprecate(e,t){if(e){const{identifier:i}=this,n=this.schema.targetAttribute,r=this.schema.targetAttributeForScope(i);this.guide.warn(e,`target:${t}`,`Please replace ${n}="${i}.${t}" with ${r}="${t}". The ${n} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}}class sc{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findOutlet(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllOutlets(i)],[])}getSelectorForOutletName(e){const t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){const t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){const t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(n=>this.matchesElement(n,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(n=>this.matchesElement(n,e,t))}matchesElement(e,t,i){const n=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&n.split(" ").includes(i)}}class tr{constructor(e,t,i,n){this.targets=new ic(this),this.classes=new Ql(this),this.data=new ec(this),this.containsElement=r=>r.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=i,this.guide=new tc(n),this.outlets=new sc(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return On(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new tr(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class nc{constructor(e,t,i){this.element=e,this.schema=t,this.delegate=i,this.valueListObserver=new Bo(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){const{element:t,content:i}=e;return this.parseValueForElementAndIdentifier(t,i)}parseValueForElementAndIdentifier(e,t){const i=this.fetchScopesByIdentifierForElement(e);let n=i.get(t);return n||(n=this.delegate.createScopeForElementAndIdentifier(e,t),i.set(t,n)),n}elementMatchedValue(e,t){const i=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,i),i==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){const i=this.scopeReferenceCounts.get(t);i&&(this.scopeReferenceCounts.set(t,i-1),i==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}}class rc{constructor(e){this.application=e,this.scopeObserver=new nc(this.element,this.schema,this),this.scopesByIdentifier=new Mt,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);const t=new Jl(this.application,e);this.connectModule(t);const i=e.controllerConstructor.afterLoad;i&&i.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){const t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){const i=this.modulesByIdentifier.get(t);if(i)return i.contexts.find(n=>n.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){const i=this.scopeObserver.parseValueForElementAndIdentifier(e,t);i?this.scopeObserver.elementMatchedValue(i.element,i):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,i){this.application.handleError(e,t,i)}createScopeForElementAndIdentifier(e,t){return new tr(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.connectContextForScope(i))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.disconnectContextForScope(i))}}const oc={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:s=>`data-${s}-target`,outletAttributeForScope:(s,e)=>`data-${s}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},$r("abcdefghijklmnopqrstuvwxyz".split("").map(s=>[s,s]))),$r("0123456789".split("").map(s=>[s,s])))};function $r(s){return s.reduce((e,[t,i])=>Object.assign(Object.assign({},e),{[t]:i}),{})}class ac{constructor(e=document.documentElement,t=oc){this.logger=console,this.debug=!1,this.logDebugActivity=(i,n,r={})=>{this.debug&&this.logFormattedMessage(i,n,r)},this.element=e,this.schema=t,this.dispatcher=new gl(this),this.router=new rc(this),this.actionDescriptorFilters=Object.assign({},bl)}static start(e,t){const i=new this(e,t);return i.start(),i}async start(){await lc(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(n=>{n.controllerConstructor.shouldLoad&&this.router.loadDefinition(n)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(n=>this.router.unloadIdentifier(n))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){const i=this.router.getContextForElementAndIdentifier(e,t);return i?i.controller:null}handleError(e,t,i){var n;this.logger.error(`%s

%o

%o`,t,e,i),(n=window.onerror)===null||n===void 0||n.call(window,t,"",0,0,e)}logFormattedMessage(e,t,i={}){i=Object.assign({application:this},i),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},i)),this.logger.groupEnd()}}function lc(){return new Promise(s=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>s()):s()})}function cc(s){return Ii(s,"classes").reduce((t,i)=>Object.assign(t,hc(i)),{})}function hc(s){return{[`${s}Class`]:{get(){const{classes:e}=this;if(e.has(s))return e.get(s);{const t=e.getAttributeName(s);throw new Error(`Missing attribute "${t}"`)}}},[`${s}Classes`]:{get(){return this.classes.getAll(s)}},[`has${Fi(s)}Class`]:{get(){return this.classes.has(s)}}}}function dc(s){return Ii(s,"outlets").reduce((t,i)=>Object.assign(t,uc(i)),{})}function Wr(s,e,t){return s.application.getControllerForElementAndIdentifier(e,t)}function Ur(s,e,t){let i=Wr(s,e,t);if(i||(s.application.router.proposeToConnectScopeForElementAndIdentifier(e,t),i=Wr(s,e,t),i))return i}function uc(s){const e=Pn(s);return{[`${e}Outlet`]:{get(){const t=this.outlets.find(s),i=this.outlets.getSelectorForOutletName(s);if(t){const n=Ur(this,t,s);if(n)return n;throw new Error(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${e}Outlets`]:{get(){const t=this.outlets.findAll(s);return t.length>0?t.map(i=>{const n=Ur(this,i,s);if(n)return n;console.warn(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`,i)}).filter(i=>i):[]}},[`${e}OutletElement`]:{get(){const t=this.outlets.find(s),i=this.outlets.getSelectorForOutletName(s);if(t)return t;throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(s)}},[`has${Fi(e)}Outlet`]:{get(){return this.outlets.has(s)}}}}function fc(s){return Ii(s,"targets").reduce((t,i)=>Object.assign(t,mc(i)),{})}function mc(s){return{[`${s}Target`]:{get(){const e=this.targets.find(s);if(e)return e;throw new Error(`Missing target element "${s}" for "${this.identifier}" controller`)}},[`${s}Targets`]:{get(){return this.targets.findAll(s)}},[`has${Fi(s)}Target`]:{get(){return this.targets.has(s)}}}}function pc(s){const e=zl(s,"values"),t={valueDescriptorMap:{get(){return e.reduce((i,n)=>{const r=Do(n,this.identifier),o=this.data.getAttributeNameForKey(r.key);return Object.assign(i,{[o]:r})},{})}}};return e.reduce((i,n)=>Object.assign(i,gc(n)),t)}function gc(s,e){const t=Do(s,e),{key:i,name:n,reader:r,writer:o}=t;return{[n]:{get(){const a=this.data.get(i);return a!==null?r(a):t.defaultValue},set(a){a===void 0?this.data.delete(i):this.data.set(i,o(a))}},[`has${Fi(n)}`]:{get(){return this.data.has(i)||t.hasCustomDefaultValue}}}}function Do([s,e],t){return wc({controller:t,token:s,typeDefinition:e})}function ms(s){switch(s){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function gi(s){switch(typeof s){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(s))return"array";if(Object.prototype.toString.call(s)==="[object Object]")return"object"}function bc(s){const{controller:e,token:t,typeObject:i}=s,n=jr(i.type),r=jr(i.default),o=n&&r,a=n&&!r,l=!n&&r,c=ms(i.type),h=gi(s.typeObject.default);if(a)return c;if(l)return h;if(c!==h){const u=e?`${e}.${t}`:t;throw new Error(`The specified default value for the Stimulus Value "${u}" must match the defined type "${c}". The provided default value of "${i.default}" is of type "${h}".`)}if(o)return c}function vc(s){const{controller:e,token:t,typeDefinition:i}=s,r=bc({controller:e,token:t,typeObject:i}),o=gi(i),a=ms(i),l=r||o||a;if(l)return l;const c=e?`${e}.${i}`:t;throw new Error(`Unknown value type "${c}" for "${t}" value`)}function yc(s){const e=ms(s);if(e)return Kr[e];const t=xn(s,"default"),i=xn(s,"type"),n=s;if(t)return n.default;if(i){const{type:r}=n,o=ms(r);if(o)return Kr[o]}return s}function wc(s){const{token:e,typeDefinition:t}=s,i=`${Oo(e)}-value`,n=vc(s);return{type:n,key:i,name:er(i),get defaultValue(){return yc(t)},get hasCustomDefaultValue(){return gi(t)!==void 0},reader:Sc[n],writer:Xr[n]||Xr.default}}const Kr={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},Sc={array(s){const e=JSON.parse(s);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${s}" of type "${gi(e)}"`);return e},boolean(s){return!(s=="0"||String(s).toLowerCase()=="false")},number(s){return Number(s.replace(/_/g,""))},object(s){const e=JSON.parse(s);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${s}" of type "${gi(e)}"`);return e},string(s){return s}},Xr={default:Ec,array:Gr,object:Gr};function Gr(s){return JSON.stringify(s)}function Ec(s){return`${s}`}class de{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:i={},prefix:n=this.identifier,bubbles:r=!0,cancelable:o=!0}={}){const a=n?`${n}:${e}`:e,l=new CustomEvent(a,{detail:i,bubbles:r,cancelable:o});return t.dispatchEvent(l),l}}de.blessings=[cc,fc,pc,dc],de.targets=[],de.outlets=[],de.values={};const ir=(s,...e)=>{const t=e.length;for(let i=0;i<t;i++){const n=e[i]||{};Object.entries(n).forEach(([r,o])=>{const a=Array.isArray(o)?[]:{};var l;s[r]||Object.assign(s,{[r]:a}),typeof(l=o)=="object"&&l!==null&&l.constructor===Object&&Object.prototype.toString.call(l)==="[object Object]"?Object.assign(s[r],ir(a,o)):Array.isArray(o)?Object.assign(s,{[r]:[...o]}):Object.assign(s,{[r]:o})})}return s},sr=s=>`${s||""}`.split(" ").filter(e=>!!e),Zi=(s,e)=>{s&&sr(e).forEach(t=>{s.classList.add(t)})},Yr=(s,e)=>{s&&sr(e).forEach(t=>{s.classList.remove(t)})},yn=function(s,e){return s.split(".").reduce((t,i)=>typeof t=="object"?t[i]:void 0,e)};class Rn{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(const t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}setOptions(e){this.options=e?ir({},this.constructor.defaults,e):{};for(const[t,i]of Object.entries(this.option("on")||{}))this.on(t,i)}option(e,...t){let i=yn(e,this.options);return i&&typeof i=="function"&&(i=i.call(this,this,...t)),i}optionFor(e,t,i,...n){let r=yn(t,e);var o;typeof(o=r)!="string"||isNaN(o)||isNaN(parseFloat(o))||(r=parseFloat(r)),r==="true"&&(r=!0),r==="false"&&(r=!1),r&&typeof r=="function"&&(r=r.call(this,this,e,...n));let a=yn(t,this.options);return a&&typeof a=="function"?r=a.call(this,this,e,...n,r):r===void 0&&(r=a),r===void 0?i:r}cn(e){const t=this.options.classes;return t&&t[e]||""}localize(e,t=[]){e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,(i,n,r)=>{let o="";return r?o=this.option(`${n[0]+n.toLowerCase().substring(1)}.l10n.${r}`):n&&(o=this.option(`l10n.${n}`)),o||(o=i),o});for(let i=0;i<t.length;i++)e=e.split(t[i][0]).join(t[i][1]);return e=e.replace(/\{\{(.*?)\}\}/g,(i,n)=>n)}on(e,t){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),this.events||(this.events=new Map),i.forEach(n=>{let r=this.events.get(n);r||(this.events.set(n,[]),r=[]),r.includes(t)||r.push(t),this.events.set(n,r)})}off(e,t){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),i.forEach(n=>{const r=this.events.get(n);if(Array.isArray(r)){const o=r.indexOf(t);o>-1&&r.splice(o,1)}})}emit(e,...t){[...this.events.get(e)||[]].forEach(i=>i(this,...t)),e!=="*"&&this.emit("*",e,...t)}}Object.defineProperty(Rn,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.33"}),Object.defineProperty(Rn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class Tc extends Rn{constructor(e,t){super(t),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}}var ps,kn;(function(s){s[s.Init=0]="Init",s[s.Error=1]="Error",s[s.Ready=2]="Ready",s[s.Panning=3]="Panning",s[s.Mousemove=4]="Mousemove",s[s.Destroy=5]="Destroy"})(ps||(ps={})),function(s){s[s.Init=0]="Init",s[s.Ready=1]="Ready",s[s.Destroy=2]="Destroy"}(kn||(kn={}));const Zr=(s,e=1e4)=>(s=parseFloat(s+"")||0,Math.round((s+Number.EPSILON)*e)/e),Ac={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var $t;(function(s){s[s.Init=0]="Init",s[s.Ready=1]="Ready",s[s.Hidden=2]="Hidden"})($t||($t={}));const Jr="isResting",Ji="thumbWidth",Nt="thumbHeight",We="thumbClipWidth";class Vo extends Tc{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:$t.Init})}get isModern(){return this.type==="modern"}onInitSlide(e,t){const i=t.el?t.el.dataset:void 0;i&&(t.thumbSrc=i.thumbSrc||t.thumbSrc||"",t[We]=parseFloat(i[We]||"")||t[We]||0,t[Nt]=parseFloat(i.thumbHeight||"")||t[Nt]||0),this.addSlide(t)}onInitSlides(){this.build()}onChange(){var e;if(!this.isModern)return;const t=this.container,i=this.instance,n=i.panzoom,r=this.carousel,o=r?r.panzoom:null,a=i.page;if(n&&r&&o){if(n.isDragging){Yr(t,this.cn(Jr));let u=((e=r.pages[a])===null||e===void 0?void 0:e.pos)||0;u+=i.getProgress(a)*(this[We]+this.thumbGap);let d=o.getBounds();-1*u>d.x.min&&-1*u<d.x.max&&o.panTo({x:-1*u,friction:.12})}else l=t,c=this.cn(Jr),h=n.isResting,l&&sr(c).forEach(u=>{l.classList.toggle(u,h||!1)});var l,c,h;this.shiftModern()}}onRefresh(){this.updateProps();for(const e of this.instance.slides||[])this.resizeModernSlide(e);this.shiftModern()}isDisabled(){const e=this.option("minCount")||0;if(e){const i=this.instance;let n=0;for(const r of i.slides||[])r.thumbSrc&&n++;if(n<e)return!0}const t=this.option("type");return["modern","classic"].indexOf(t)<0}getThumb(e){const t=this.option("thumbTpl")||"";return{html:this.instance.localize(t,[["%i",e.index],["%d",e.index+1],["%s",e.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(e){const t=this.carousel;t&&t.addSlide(e.index,this.getThumb(e))}getSlides(){const e=[];for(const t of this.instance.slides||[])e.push(this.getThumb(t));return e}resizeModernSlide(e){this.isModern&&(e[Ji]=e[We]&&e[Nt]?Math.round(this[Nt]*(e[We]/e[Nt])):this[Ji])}updateProps(){const e=this.container;if(!e)return;const t=i=>parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-"+i))||0;this.thumbGap=t("gap"),this.thumbExtraGap=t("extra-gap"),this[Ji]=t("width")||40,this[We]=t("clip-width")||40,this[Nt]=t("height")||40}build(){const e=this;if(e.state!==$t.Init)return;if(e.isDisabled())return void e.emit("disabled");const t=e.instance,i=t.container,n=e.getSlides(),r=e.option("type");e.type=r;const o=e.option("parentEl"),a=e.cn("container"),l=e.cn("track");let c=o?.querySelector("."+a);c||(c=document.createElement("div"),Zi(c,a),o?o.appendChild(c):i.after(c)),Zi(c,`is-${r}`),Zi(i,e.cn("hasThumbs")),e.container=c,e.updateProps();let h=c.querySelector("."+l);h||(h=document.createElement("div"),Zi(h,e.cn("track")),c.appendChild(h)),e.track=h;const u=ir({},{track:h,infinite:!1,center:!0,fill:r==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},e.option("Carousel")||{},{Sync:{target:t},slides:n}),d=new t.constructor(c,u);d.on("createSlide",(f,m)=>{e.setProps(m.index),e.emit("createSlide",m,m.el)}),d.on("ready",()=>{e.shiftModern(),e.emit("ready")}),d.on("refresh",()=>{e.shiftModern()}),d.on("Panzoom.click",(f,m,g)=>{e.onClick(g)}),e.carousel=d,e.state=$t.Ready}onClick(e){e.preventDefault(),e.stopPropagation();const t=this.instance,{pages:i,page:n}=t,r=y=>{if(y){const E=y.closest("[data-carousel-index]");if(E)return[parseInt(E.dataset.carouselIndex||"",10)||0,E]}return[-1,void 0]},o=(y,E)=>{const L=document.elementFromPoint(y,E);return L?r(L):[-1,void 0]};let[a,l]=r(e.target);if(a>-1)return;const c=this[We],h=e.clientX,u=e.clientY;let[d,f]=o(h-c,u),[m,g]=o(h+c,u);f&&g?(a=Math.abs(h-f.getBoundingClientRect().right)<Math.abs(h-g.getBoundingClientRect().left)?d:m,a===n&&(a=a===d?m:d)):f?a=d:g&&(a=m),a>-1&&i[a]&&t.slideTo(a)}getShift(e){var t;const i=this,{instance:n}=i,r=i.carousel;if(!n||!r)return 0;const o=i[Ji],a=i[We],l=i.thumbGap,c=i.thumbExtraGap;if(!(!((t=r.slides[e])===null||t===void 0)&&t.el))return 0;const h=.5*(o-a),u=n.pages.length-1;let d=n.getProgress(0),f=n.getProgress(u),m=n.getProgress(e,!1,!0),g=0,y=h+c+l;const E=d<0&&d>-1,L=f>0&&f<1;return e===0?(g=y*Math.abs(d),L&&d===1&&(g-=y*Math.abs(f))):e===u?(g=y*Math.abs(f)*-1,E&&f===-1&&(g+=y*Math.abs(d))):E||L?(g=-1*y,g+=y*Math.abs(d),g+=y*(1-Math.abs(f))):g=y*m,g}setProps(e){var t;const i=this;if(!i.isModern)return;const{instance:n}=i,r=i.carousel;if(n&&r){const o=(t=r.slides[e])===null||t===void 0?void 0:t.el;if(o&&o.childNodes.length){let a=Zr(1-Math.abs(n.getProgress(e))),l=Zr(i.getShift(e));o.style.setProperty("--progress",a?a+"":""),o.style.setProperty("--shift",l+"")}}}shiftModern(){const e=this;if(!e.isModern)return;const{instance:t,track:i}=e,n=t.panzoom,r=e.carousel;if(!(t&&i&&n&&r)||n.state===ps.Init||n.state===ps.Destroy)return;for(const a of t.slides)e.setProps(a.index);let o=(e[We]+e.thumbGap)*(r.slides.length||0);i.style.setProperty("--width",o+"")}cleanup(){const e=this;e.carousel&&e.carousel.destroy(),e.carousel=null,e.container&&e.container.remove(),e.container=null,e.track&&e.track.remove(),e.track=null,e.state=$t.Init,Yr(e.instance.container,e.cn("hasThumbs"))}attach(){const e=this,t=e.instance;t.on("initSlide",e.onInitSlide),t.state===kn.Init?t.on("initSlides",e.onInitSlides):e.onInitSlides(),t.on(["change","Panzoom.afterTransform"],e.onChange),t.on("Panzoom.refresh",e.onRefresh)}detach(){const e=this,t=e.instance;t.off("initSlide",e.onInitSlide),t.off("initSlides",e.onInitSlides),t.off(["change","Panzoom.afterTransform"],e.onChange),t.off("Panzoom.refresh",e.onRefresh),e.cleanup()}}Object.defineProperty(Vo,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Ac});class is extends de{connect(){if(this.hasContainerTarget&&this.initiatedValue==!1){let e={},t={maxCount:this.dotsValue};this.dotsValue==0&&(t=!1);let i=!1;this.thumbsValue==!0&&(i={type:"classic",Carousel:{classes:{container:"f-thumbs f-carousel__thumbs bg-theme1-background-darker",slide:"f-thumbs__slide bg-theme1-darkest"},center:!1,slidesPerPage:"auto"}},e={Thumbs:Vo}),this.hasSyncOutlet&&this.syncOutlet.carousel;let n="auto";this.slidesValue>0&&(n=this.slidesValue),this.carouselValue=new ft(this.containerTarget,{friction:.6,Dots:t,Navigation:this.navigationValue,infinite:this.infiniteValue,preload:this.preloadValue,Thumbs:i,Sync:this.syncOptions,slidesPerPage:n},e),this.initiatedValue=!0}}}S(is,"values",{dots:{type:Number,default:0},infinite:{type:Boolean,default:!0},navigation:{type:Boolean,default:!1},preload:{type:Number,default:2},thumbs:{type:Boolean,default:!1},carousel:{type:Object},slides:{type:Number,default:0},initiated:{type:Boolean,default:!1}}),S(is,"targets",["container","slide"]),S(is,"outlets",["sync"]);const Lc=Object.freeze(Object.defineProperty({__proto__:null,default:is},Symbol.toStringTag,{value:"Module"}));class Fn extends de{connect(){document.getElementById("cart_page")!=null&&(this.isCartPageValue=!0)}itemTargetConnected(e){let t=0;for(const i of this.itemTargets)t+=parseInt(i.dataset.quantity);this.countValue=t;for(const i of document.querySelectorAll(".cart-item-count"))i.innerHTML=this.countValue}decreaseQuantity(e){const t=e.target.parentElement.querySelector(".quantity-input");let i=parseInt(t.value);t.value=i-1,t.dispatchEvent(new Event("change",{bubbles:!0}))}increaseQuantity(e){const t=e.target.parentElement.querySelector(".quantity-input");let i=parseInt(t.value);t.value=i+1,t.dispatchEvent(new Event("change",{bubbles:!0}))}removeItem(e){const t=e.target.closest("li");t.classList.add("disabled");const i=t.querySelector(".quantity-input");i.value=0,i.dispatchEvent(new Event("change",{bubbles:!0}))}setQuantity(e){const t=e.target;t.parentElement.classList.add("disabled");let i=parseInt(t.value);const n=t.max;i>n&&(i=n,t.value=n);const r={id:t.dataset.vid,quantity:parseInt(t.value),sections:"cart-header,cart-items,cart-footer,cart-sale"},o=`${window.Shopify.routes.root}cart/change`;fetch(o,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then(a=>(a.ok||(console.error("Error updating quantity"),console.error(a)),a.json())).then(a=>{const l=document.getElementById("shopify-section-cart-header"),c=document.getElementById("shopify-section-cart-items"),h=document.getElementById("shopify-section-cart-footer"),u=document.getElementById("shopify-section-cart-sale"),d=document.getElementById("shopify-section-cart-recommendations");if(l!=null&&(document.getElementById("shopify-section-cart-header").innerHTML=a.sections["cart-header"]),c!=null&&(document.getElementById("shopify-section-cart-items").innerHTML=a.sections["cart-items"]),h!=null&&(document.getElementById("shopify-section-cart-footer").innerHTML=a.sections["cart-footer"]),u!=null&&(document.getElementById("shopify-section-cart-sale").innerHTML=a.sections["cart-sale"]),d!=null&&(document.getElementById("shopify-section-cart-recommendations").innerHTML=""),this.isCartPageValue==!0&&(document.getElementById("cart_items_container").classList.add("big-cart"),document.getElementById("cart_footer").classList.add("big-cart")),a.item_count==0)for(const f of document.querySelectorAll(".cart-item-count"))f.innerHTML=""})}preorderConfirmationTargetConnected(e){e.classList.remove("hidden"),this.hasCheckoutButtonsTarget&&this.checkoutButtonsTarget.classList.add("disabled")}preorderConfirm(e){e.target.checked?this.hasCheckoutButtonsTarget&&this.checkoutButtonsTarget.classList.remove("disabled"):e.hasCheckoutButtonsTarget&&this.checkoutButtonsTarget.classList.add("disabled")}addAddonToCart(e){e.target.classList.add("disabled"),e.target.setAttribute("disabled","true"),e.target.innerHTML="Adding...";const n={id:e.target.closest(".cart-addon").querySelector(".cart-addon-variant").value,quantity:1,sections:"cart-header,cart-items,cart-footer,cart-sale"},r=`${window.Shopify.routes.root}cart/add`;fetch(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(o=>(o.ok||(console.error("Error adding addon"),console.error(o)),o.json())).then(o=>{const a=document.getElementById("shopify-section-cart-header"),l=document.getElementById("shopify-section-cart-items"),c=document.getElementById("shopify-section-cart-footer"),h=document.getElementById("shopify-section-cart-sale");a!=null&&(document.getElementById("shopify-section-cart-header").innerHTML=o.sections["cart-header"]),l!=null&&(document.getElementById("shopify-section-cart-items").innerHTML=o.sections["cart-items"]),c!=null&&(document.getElementById("shopify-section-cart-footer").innerHTML=o.sections["cart-footer"]),h!=null&&(document.getElementById("shopify-section-cart-sale").innerHTML=o.sections["cart-sale"]),this.isCartPageValue==!0&&(document.getElementById("cart_items_container").classList.add("big-cart"),document.getElementById("cart_footer").classList.add("big-cart"))})}}S(Fn,"values",{count:{type:Number,default:0},isCartPage:{type:Boolean,default:!1}}),S(Fn,"targets",["checkoutButtons","item","preorderConfirmation"]);const Cc=Object.freeze(Object.defineProperty({__proto__:null,default:Fn},Symbol.toStringTag,{value:"Module"}));class In extends de{toggle(){this.openValue=!this.openValue}close(){this.openValue=!1}openValueChanged(){this.openValue==!0?(this.hasButtonTarget&&(this.buttonTarget.classList.add("open"),this.buttonTarget.setAttribute("aria-expanded","true")),this.hasCollapseTarget&&(this.collapseTarget.classList.add("open"),this.collapseTarget.classList.remove("hidden"))):(this.hasButtonTarget&&(this.buttonTarget.classList.remove("open"),this.buttonTarget.setAttribute("aria-expanded","false")),this.hasCollapseTarget&&(this.collapseTarget.classList.add("hidden"),this.collapseTarget.classList.remove("open")))}}S(In,"values",{open:{type:Boolean,default:!1}}),S(In,"targets",["button","collapse"]);const Mc=Object.freeze(Object.defineProperty({__proto__:null,default:In},Symbol.toStringTag,{value:"Module"})),zo=(s,e,t)=>{let i=s;return t===!0?i=`${e.identifier}:${s}`:typeof t=="string"&&(i=`${t}:${s}`),i},Pc=(s,e,t)=>{const{bubbles:i,cancelable:n,composed:r}=e||{bubbles:!0,cancelable:!0,composed:!0};return e&&Object.assign(t,{originalEvent:e}),new CustomEvent(s,{bubbles:i,cancelable:n,composed:r,detail:t})};function xc(s){const e=s.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth,n=e.top<=t&&e.top+e.height>0,r=e.left<=i&&e.left+e.width>0;return n&&r}function Oc(s,e){var t={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(t[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(s);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(s,i[n])&&(t[i[n]]=s[i[n]]);return t}const wn={debug:!1,logger:console,dispatchEvent:!0,eventPrefix:!0};class No{constructor(e,t={}){var i,n,r;this.log=(l,c)=>{this.debug&&(this.logger.groupCollapsed(`%c${this.controller.identifier} %c#${l}`,"color: #3B82F6","color: unset"),this.logger.log(Object.assign({controllerId:this.controllerId},c)),this.logger.groupEnd())},this.warn=l=>{this.logger.warn(`%c${this.controller.identifier} %c${l}`,"color: #3B82F6; font-weight: bold","color: unset")},this.dispatch=(l,c={})=>{if(this.dispatchEvent){const{event:h}=c,u=Oc(c,["event"]),d=this.extendedEvent(l,h||null,u);this.targetElement.dispatchEvent(d),this.log("dispatchEvent",Object.assign({eventName:d.type},u))}},this.call=(l,c={})=>{const h=this.controller[l];if(typeof h=="function")return h.call(this.controller,c)},this.extendedEvent=(l,c,h)=>{const{bubbles:u,cancelable:d,composed:f}=c||{bubbles:!0,cancelable:!0,composed:!0};return c&&Object.assign(h,{originalEvent:c}),new CustomEvent(this.composeEventName(l),{bubbles:u,cancelable:d,composed:f,detail:h})},this.composeEventName=l=>{let c=l;return this.eventPrefix===!0?c=`${this.controller.identifier}:${l}`:typeof this.eventPrefix=="string"&&(c=`${this.eventPrefix}:${l}`),c},this.debug=(n=(i=t?.debug)!==null&&i!==void 0?i:e.application.stimulusUseDebug)!==null&&n!==void 0?n:wn.debug,this.logger=(r=t?.logger)!==null&&r!==void 0?r:wn.logger,this.controller=e,this.controllerId=e.element.id||e.element.dataset.id,this.targetElement=t?.element||e.element;const{dispatchEvent:o,eventPrefix:a}=Object.assign({},wn,t);Object.assign(this,{dispatchEvent:o,eventPrefix:a}),this.controllerInitialize=e.initialize.bind(e),this.controllerConnect=e.connect.bind(e),this.controllerDisconnect=e.disconnect.bind(e)}}const Sn={eventPrefix:!0,bubbles:!0,cancelable:!0};class Rc extends No{constructor(e,t={}){var i,n,r,o;super(e,t),this.dispatch=(a,l={})=>{const{controller:c,targetElement:h,eventPrefix:u,bubbles:d,cancelable:f,log:m,warn:g}=this;Object.assign(l,{controller:c});const y=zo(a,this.controller,u),E=new CustomEvent(y,{detail:l,bubbles:d,cancelable:f});return h.dispatchEvent(E),g("`useDispatch()` is deprecated. Please use the built-in `this.dispatch()` function from Stimulus. You can find more information on how to upgrade at: https://stimulus-use.github.io/stimulus-use/#/use-dispatch"),m("dispatch",{eventName:y,detail:l,bubbles:d,cancelable:f}),E},this.targetElement=(i=t.element)!==null&&i!==void 0?i:e.element,this.eventPrefix=(n=t.eventPrefix)!==null&&n!==void 0?n:Sn.eventPrefix,this.bubbles=(r=t.bubbles)!==null&&r!==void 0?r:Sn.bubbles,this.cancelable=(o=t.cancelable)!==null&&o!==void 0?o:Sn.cancelable,this.enhanceController()}enhanceController(){Object.assign(this.controller,{dispatch:this.dispatch})}}const kc=(s,e={})=>new Rc(s,e),Fc={overwriteDispatch:!0},Ic=(s,e={})=>{const{overwriteDispatch:t}=Object.assign({},Fc,e);Object.defineProperty(s,"isPreview",{get(){return document.documentElement.hasAttribute("data-turbolinks-preview")||document.documentElement.hasAttribute("data-turbo-preview")}}),Object.defineProperty(s,"isConnected",{get(){return!!Array.from(this.context.module.connectedContexts).find(i=>i===this.context)}}),Object.defineProperty(s,"csrfToken",{get(){return this.metaValue("csrf-token")}}),t&&kc(s,e),Object.assign(s,{metaValue(i){const n=document.head.querySelector(`meta[name="${i}"]`);return n&&n.getAttribute("content")}})};class jo extends de{constructor(e){super(e),this.isPreview=!1,this.isConnected=!1,this.csrfToken="",Ic(this,this.options)}}const Bc={events:["click","touchend"],onlyVisible:!0,dispatchEvent:!0,eventPrefix:!0},Ho=(s,e={})=>{const t=s,{onlyVisible:i,dispatchEvent:n,events:r,eventPrefix:o}=Object.assign({},Bc,e),a=u=>{const d=e?.element||t.element;if(!(d.contains(u.target)||!xc(d)&&i)&&(t.clickOutside&&t.clickOutside(u),n)){const f=zo("click:outside",t,o),m=Pc(f,u,{controller:t});d.dispatchEvent(m)}},l=()=>{r?.forEach(u=>{window.addEventListener(u,a,!0)})},c=()=>{r?.forEach(u=>{window.removeEventListener(u,a,!0)})},h=t.disconnect.bind(t);return Object.assign(t,{disconnect(){c(),h()}}),l(),[l,c]};class _c extends de{}_c.debounces=[];class Dc extends No{constructor(e,t={}){super(e,t),this.observe=()=>{this.targetElement.addEventListener("mouseenter",this.onEnter),this.targetElement.addEventListener("mouseleave",this.onLeave)},this.unobserve=()=>{this.targetElement.removeEventListener("mouseenter",this.onEnter),this.targetElement.removeEventListener("mouseleave",this.onLeave)},this.onEnter=i=>{this.call("mouseEnter",i),this.log("mouseEnter",{hover:!0}),this.dispatch("mouseEnter",{hover:!1})},this.onLeave=i=>{this.call("mouseLeave",i),this.log("mouseLeave",{hover:!1}),this.dispatch("mouseLeave",{hover:!1})},this.controller=e,this.enhanceController(),this.observe()}enhanceController(){const e=this.controller.disconnect.bind(this.controller),t=()=>{this.unobserve(),e()};Object.assign(this.controller,{disconnect:t})}}const Vc=(s,e={})=>{const t=s,i=new Dc(t,e);return[i.observe,i.unobserve]};class zc extends de{}zc.throttles=[];class ss extends jo{connect(){if(window.location.hash){const e=["games","studios","partners","artists"],t=window.location.hash.replace("#","");e.includes(t)&&(this.filterValue=t)}}filter(e){this.filterValue=e.params.type}filterValueChanged(){for(const e of this.collectionTargets)e.classList.contains(this.filterValue)?e.classList.remove("hidden"):e.classList.add("hidden");for(const e of this.filterButtonTargets)e.dataset.collectionsTypeParam==this.filterValue?e.classList.add("active"):e.classList.remove("active");this.clearSearch()}search(e){const t=e.target.value.toLowerCase();if(t.length>=2)for(const i of this.collectionTargets)i.dataset.title.includes(t)?(i.classList.add("matched"),i.classList.remove("not-matched")):(i.classList.add("not-matched"),i.classList.remove("matched"));else t.length==0&&this.clearSearch();this.hasClearButtonTarget&&(t.length>0?this.clearButtonTarget.classList.remove("hidden"):this.clearButtonTarget.classList.add("hidden"))}clearSearch(){if(this.hasSearchTarget){this.searchTarget.value="";const t=this.searchTarget.getAttribute("placeholder").split(" ")[0]+" "+this.filterValue;this.searchTarget.setAttribute("placeholder",t)}this.hasClearButtonTarget&&this.clearButtonTarget.classList.add("hidden");for(const e of this.collectionTargets)e.classList.remove("matched","not-matched")}}S(ss,"debounces",["search"]),S(ss,"values",{filter:{type:String,default:"games"}}),S(ss,"targets",["clearButton","collection","filterButton","search"]);const Nc=Object.freeze(Object.defineProperty({__proto__:null,default:ss},Symbol.toStringTag,{value:"Module"}));class qo extends de{formTargetConnected(e){for(const t of e.querySelectorAll("form"))t.setAttribute("data-turbo",!1)}}S(qo,"targets",["form"]);const jc=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"}));class Bn extends de{expand(e){this.expandedValue=e.params.element}expandById({detail:{element:e}}){this.expandedValue=e}close(){this.expandedValue=""}expandedValueChanged(){if(this.expandedValue!=""){for(const e of this.menuTargets)e.id.includes(this.expandedValue)?(e.classList.add("active","transform-none"),e.classList.remove("-translate-x-full"),e.setAttribute("aria-modal","true"),e.setAttribute("aria-hidden","false")):(e.classList.remove("active","transform-none"),e.classList.add("-translate-x-full"),e.setAttribute("aria-modal","false"),e.setAttribute("aria-hidden","true"));for(const e of this.buttonTargets)e.id.includes(this.expandedValue)?(e.classList.add("active"),e.setAttribute("aria-expanded","true")):(e.classList.remove("active"),e.setAttribute("aria-expanded","false"));this.hasBackdropTarget&&(this.backdropTarget.classList.add("active"),this.backdropTarget.classList.remove("hidden")),document.body.classList.add("overflow-hidden"),this.menuTarget.children[0].focus()}else{for(const e of this.menuTargets)e.classList.remove("active","transform-none"),e.classList.add("-translate-x-full"),e.setAttribute("aria-modal","false"),e.setAttribute("aria-hidden","true");for(const e of this.buttonTargets)e.classList.remove("active"),e.setAttribute("aria-expanded","false");this.hasBackdropTarget&&(this.backdropTarget.classList.remove("active"),this.backdropTarget.classList.add("hidden")),document.body.classList.remove("overflow-hidden")}}}S(Bn,"values",{expanded:{type:String,default:""}}),S(Bn,"targets",["backdrop","button","closeButton","menu"]);const Hc=Object.freeze(Object.defineProperty({__proto__:null,default:Bn},Symbol.toStringTag,{value:"Module"}));class _n extends de{prepForLoad(e=!0){this.element.classList.add("loading"),e&&this.element.scrollIntoView({behavior:"smooth",block:"start"})}loadFade(){this.element.classList.add("loading")}loadProductGridFade(){this.productGridTarget.classList.add("loading")}productTargetConnected(e){if(e.setAttribute("data-turbo-frame","_top"),this.collectionHandleValue!=""){const t=e.getAttribute("href");if(t.includes("/collections/")){const i=t.split("/")[2];i!=this.collectionHandleValue&&e.setAttribute("href",t.replace(i,this.collectionHandleValue))}}}sortParamsTargetConnected(e){e.innerHTML="";const t=window.location.search.slice(1).split("&");for(const i of t){const n=i.split("="),r=n[0],o=decodeURIComponent(n[1]).replaceAll("+"," ");r!="sort_by"&&(e.innerHTML+=`<input type="hidden" name="${r}" value="${o}" />`)}}sort(e){this.prepForLoad(!1),e.target.form.requestSubmit()}checkFilters(){let e=!1;for(const t of this.filterTargets)(t.checked&&!t.classList.contains("active")||!t.checked&&t.classList.contains("active"))&&(e=!0);this.hasFilterButtonTarget&&this.hasFilterButtonContainerTarget&&(e==!0?(this.filterButtonTarget.removeAttribute("disabled"),this.filterButtonContainerTarget.classList.add("active")):(this.filterButtonTarget.setAttribute("disabled","disabled"),this.filterButtonContainerTarget.classList.remove("active")))}submitFilters(){this.menuTarget.classList.contains("active")?this.checkFilters():(this.loadProductGridFade(),this.filterFormTarget.requestSubmit())}}S(_n,"targets",["filter","filterForm","filterButton","filterButtonContainer","menu","product","productGrid","sortParams"]),S(_n,"values",{collectionHandle:{type:String}});const qc=Object.freeze(Object.defineProperty({__proto__:null,default:_n},Symbol.toStringTag,{value:"Module"}));class Dn extends de{connect(){Ho(this,{element:this.navTarget}),Vc(this,{element:this.navTarget})}clickToggle(e){this.toggledValue==e.params.element?(this.toggle(""),this.expand("")):this.toggle(e.params.element)}hoverToggle(e){this.expandedValue==""?this.expandTimeout=setTimeout(()=>{this.expand(e.target.getAttribute("data-megamenu-element-param"))},this.hoverCountdownValue):this.expand(e.target.getAttribute("data-megamenu-element-param"))}unhoverToggle(e){e.relatedTarget&&!e.relatedTarget.classList.contains("menu")&&(this.expandedValue==""?window.clearTimeout(this.expandTimeout):this.menuTimeout=setTimeout(()=>{this.expand("")},this.hoverCountdownValue))}hoverMenu(e){window.clearTimeout(this.menuTimeout)}clickOutside(){this.toggle(""),this.expand("")}mouseLeave(){this.expandedValue==""?window.clearTimeout(this.expandTimeout):this.menuTimeout=setTimeout(()=>{this.expand("")},this.hoverCountdownValue)}toggle(e){this.toggledValue=e}toggledValueChanged(){this.expandedValueChanged()}expand(e){this.toggledValue==""&&(this.expandedValue=e)}expandedValueChanged(){var e=this.expandedValue;this.toggledValue!=""&&(e=this.toggledValue);for(const t of this.buttonTargets)e!=""&&t.id.includes(e)?(t.classList.add("active"),t.setAttribute("aria-expanded","true"),this.toggledValue!=""&&t.id.includes(e)?(t.classList.add("toggled"),document.getElementById(this.toggledValue).getElementsByTagName("li")[0].focus()):t.classList.remove("toggled")):(t.classList.remove("active"),t.classList.remove("toggled"),t.setAttribute("aria-expanded","false"));for(const t of this.menuTargets)e!=""&&t.id.includes(e)?t.classList.remove("hidden"):t.classList.add("hidden")}}S(Dn,"values",{hoverCountdown:{type:Number,default:100},expanded:{type:String,default:""},toggled:{type:String,default:""}}),S(Dn,"targets",["nav","button","menu"]);const $c=Object.freeze(Object.defineProperty({__proto__:null,default:Dn},Symbol.toStringTag,{value:"Module"}));class $o extends de{connect(){const e=this.element.closest("turbo-frame");e!==void 0&&(this.frameValue=e.id)}loadInPlace(e){if(this.sectionValue!=""){const i=e.target.getAttribute("href")+"&section_id="+this.sectionValue;this.frameValue!=""?Turbo.visit(i,{frame:this.frameValue}):Turbo.visit(i)}else Turbo.visit(e.target.getAttribute("href"))}}S($o,"values",{frame:{type:String},section:{type:String}});const Wc=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"}));class Wo extends de{sendEvent(){if(window.plausibleloaded){let e={};this.titleValue!=""&&(e={props:{title:this.titleValue}}),window.plausible(this.eventValue,e)}}}S(Wo,"values",{event:{type:String,default:"Click"},title:{type:String,default:""}});const Uc=Object.freeze(Object.defineProperty({__proto__:null,default:Wo},Symbol.toStringTag,{value:"Module"}));function Kc(s,e){s.indexOf(e)===-1&&s.push(e)}const Uo=(s,e,t)=>Math.min(Math.max(t,s),e),Ve={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},gs=s=>typeof s=="number",Xt=s=>Array.isArray(s)&&!gs(s[0]),Xc=(s,e,t)=>{const i=e-s;return((t-s)%i+i)%i+s};function Gc(s,e){return Xt(s)?s[Xc(0,s.length,e)]:s}const Ko=(s,e,t)=>-t*s+t*e+s,Xo=()=>{},mt=s=>s,nr=(s,e,t)=>e-s===0?1:(t-s)/(e-s);function Go(s,e){const t=s[s.length-1];for(let i=1;i<=e;i++){const n=nr(0,e,i);s.push(Ko(t,1,n))}}function Yc(s){const e=[0];return Go(e,s-1),e}function Zc(s,e=Yc(s.length),t=mt){const i=s.length,n=i-e.length;return n>0&&Go(e,n),r=>{let o=0;for(;o<i-2&&!(r<e[o+1]);o++);let a=Uo(0,1,nr(e[o],e[o+1],r));return a=Gc(t,o)(a),Ko(s[o],s[o+1],a)}}const Yo=s=>Array.isArray(s)&&gs(s[0]),Vn=s=>typeof s=="object"&&!!s.createAnimation,oi=s=>typeof s=="function",Jc=s=>typeof s=="string",pi={ms:s=>s*1e3,s:s=>s/1e3},Zo=(s,e,t)=>(((1-3*t+3*e)*s+(3*t-6*e))*s+3*e)*s,Qc=1e-7,eh=12;function th(s,e,t,i,n){let r,o,a=0;do o=e+(t-e)/2,r=Zo(o,i,n)-s,r>0?t=o:e=o;while(Math.abs(r)>Qc&&++a<eh);return o}function ui(s,e,t,i){if(s===e&&t===i)return mt;const n=r=>th(r,0,1,s,t);return r=>r===0||r===1?r:Zo(n(r),e,i)}const ih=(s,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const i=t*s,n=e==="end"?Math.floor(i):Math.ceil(i);return Uo(0,1,n/s)},Qr={ease:ui(.25,.1,.25,1),"ease-in":ui(.42,0,1,1),"ease-in-out":ui(.42,0,.58,1),"ease-out":ui(0,0,.58,1)},sh=/\((.*?)\)/;function eo(s){if(oi(s))return s;if(Yo(s))return ui(...s);if(Qr[s])return Qr[s];if(s.startsWith("steps")){const e=sh.exec(s);if(e){const t=e[1].split(",");return ih(parseFloat(t[0]),t[1].trim())}}return mt}class Jo{constructor(e,t=[0,1],{easing:i,duration:n=Ve.duration,delay:r=Ve.delay,endDelay:o=Ve.endDelay,repeat:a=Ve.repeat,offset:l,direction:c="normal",autoplay:h=!0}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=mt,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((d,f)=>{this.resolve=d,this.reject=f}),i=i||Ve.easing,Vn(i)){const d=i.createAnimation(t);i=d.easing,t=d.keyframes||t,n=d.duration||n}this.repeat=a,this.easing=Xt(i)?mt:eo(i),this.updateDuration(n);const u=Zc(t,l,Xt(i)?i.map(eo):mt);this.tick=d=>{var f;r=r;let m=0;this.pauseTime!==void 0?m=this.pauseTime:m=(d-this.startTime)*this.rate,this.t=m,m/=1e3,m=Math.max(m-r,0),this.playState==="finished"&&this.pauseTime===void 0&&(m=this.totalDuration);const g=m/this.duration;let y=Math.floor(g),E=g%1;!E&&g>=1&&(E=1),E===1&&y--;const L=y%2;(c==="reverse"||c==="alternate"&&L||c==="alternate-reverse"&&!L)&&(E=1-E);const P=m>=this.totalDuration?1:Math.min(E,1),D=u(this.easing(P));e(D),this.pauseTime===void 0&&(this.playState==="finished"||m>=this.totalDuration+o)?(this.playState="finished",(f=this.resolve)===null||f===void 0||f.call(this,D)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},h&&this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}class nh{setAnimation(e){this.animation=e,e?.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const En=new WeakMap;function Qo(s){return En.has(s)||En.set(s,{transforms:[],values:new Map}),En.get(s)}function rh(s,e){return s.has(e)||s.set(e,new nh),s.get(e)}const oh=["","X","Y","Z"],ah=["translate","scale","rotate","skew"],bs={x:"translateX",y:"translateY",z:"translateZ"},to={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:s=>s+"deg"},lh={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:s=>s+"px"},rotate:to,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:mt},skew:to},bi=new Map,rr=s=>`--motion-${s}`,vs=["x","y","z"];ah.forEach(s=>{oh.forEach(e=>{vs.push(s+e),bi.set(rr(s+e),lh[s])})});const ch=(s,e)=>vs.indexOf(s)-vs.indexOf(e),hh=new Set(vs),ea=s=>hh.has(s),dh=(s,e)=>{bs[e]&&(e=bs[e]);const{transforms:t}=Qo(s);Kc(t,e),s.style.transform=uh(t)},uh=s=>s.sort(ch).reduce(fh,"").trim(),fh=(s,e)=>`${s} ${e}(var(${rr(e)}))`,zn=s=>s.startsWith("--"),io=new Set;function mh(s){if(!io.has(s)){io.add(s);try{const{syntax:e,initialValue:t}=bi.has(s)?bi.get(s):{};CSS.registerProperty({name:s,inherits:!1,syntax:e,initialValue:t})}catch{}}}const Tn=(s,e)=>document.createElement("div").animate(s,e),so={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Tn({opacity:[1]})}catch{return!1}return!0},finished:()=>!!Tn({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{Tn({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},An={},Wt={};for(const s in so)Wt[s]=()=>(An[s]===void 0&&(An[s]=so[s]()),An[s]);const ph=.015,gh=(s,e)=>{let t="";const i=Math.round(e/ph);for(let n=0;n<i;n++)t+=s(nr(0,i-1,n))+", ";return t.substring(0,t.length-2)},no=(s,e)=>oi(s)?Wt.linearEasing()?`linear(${gh(s,e)})`:Ve.easing:Yo(s)?bh(s):s,bh=([s,e,t,i])=>`cubic-bezier(${s}, ${e}, ${t}, ${i})`;function vh(s,e){for(let t=0;t<s.length;t++)s[t]===null&&(s[t]=t?s[t-1]:e());return s}const yh=s=>Array.isArray(s)?s:[s];function Nn(s){return bs[s]&&(s=bs[s]),ea(s)?rr(s):s}const Qi={get:(s,e)=>{e=Nn(e);let t=zn(e)?s.style.getPropertyValue(e):getComputedStyle(s)[e];if(!t&&t!==0){const i=bi.get(e);i&&(t=i.initialValue)}return t},set:(s,e,t)=>{e=Nn(e),zn(e)?s.style.setProperty(e,t):s.style[e]=t}};function ta(s,e=!0){if(!(!s||s.playState==="finished"))try{s.stop?s.stop():(e&&s.commitStyles(),s.cancel())}catch{}}function wh(s,e){var t;let i=e?.toDefaultUnit||mt;const n=s[s.length-1];if(Jc(n)){const r=((t=n.match(/(-?[\d.]+)([a-z%]*)/))===null||t===void 0?void 0:t[2])||"";r&&(i=o=>o+r)}return i}function Sh(){return window.__MOTION_DEV_TOOLS_RECORD}function Eh(s,e,t,i={},n){const r=Sh(),o=i.record!==!1&&r;let a,{duration:l=Ve.duration,delay:c=Ve.delay,endDelay:h=Ve.endDelay,repeat:u=Ve.repeat,easing:d=Ve.easing,persist:f=!1,direction:m,offset:g,allowWebkitAcceleration:y=!1,autoplay:E=!0}=i;const L=Qo(s),P=ea(e);let D=Wt.waapi();P&&dh(s,e);const G=Nn(e),he=rh(L.values,G),z=bi.get(G);return ta(he.animation,!(Vn(d)&&he.generator)&&i.record!==!1),()=>{const oe=()=>{var K,me;return(me=(K=Qi.get(s,G))!==null&&K!==void 0?K:z?.initialValue)!==null&&me!==void 0?me:0};let U=vh(yh(t),oe);const Se=wh(U,z);if(Vn(d)){const K=d.createAnimation(U,e!=="opacity",oe,G,he);d=K.easing,U=K.keyframes||U,l=K.duration||l}if(zn(G)&&(Wt.cssRegisterProperty()?mh(G):D=!1),P&&!Wt.linearEasing()&&(oi(d)||Xt(d)&&d.some(oi))&&(D=!1),D){z&&(U=U.map(be=>gs(be)?z.toDefaultUnit(be):be)),U.length===1&&(!Wt.partialKeyframes()||o)&&U.unshift(oe());const K={delay:pi.ms(c),duration:pi.ms(l),endDelay:pi.ms(h),easing:Xt(d)?void 0:no(d,l),direction:m,iterations:u+1,fill:"both"};a=s.animate({[G]:U,offset:g,easing:Xt(d)?d.map(be=>no(be,l)):void 0},K),a.finished||(a.finished=new Promise((be,Ye)=>{a.onfinish=be,a.oncancel=Ye}));const me=U[U.length-1];a.finished.then(()=>{f||(Qi.set(s,G,me),a.cancel())}).catch(Xo),y||(a.playbackRate=1.000001)}else if(n&&P)U=U.map(K=>typeof K=="string"?parseFloat(K):K),U.length===1&&U.unshift(parseFloat(oe())),a=new n(K=>{Qi.set(s,G,Se?Se(K):K)},U,Object.assign(Object.assign({},i),{duration:l,easing:d}));else{const K=U[U.length-1];Qi.set(s,G,z&&gs(K)?z.toDefaultUnit(K):K)}return o&&r(s,e,U,{duration:l,delay:c,easing:d,repeat:u,offset:g},"motion-one"),he.setAnimation(a),a&&!E&&a.pause(),a}}const Th=(s,e)=>s[e]?Object.assign(Object.assign({},s),s[e]):Object.assign({},s);function Ah(s,e){var t;return typeof s=="string"?e?((t=e[s])!==null&&t!==void 0||(e[s]=document.querySelectorAll(s)),s=e[s]):s=document.querySelectorAll(s):s instanceof Element&&(s=[s]),Array.from(s||[])}const Lh=s=>s(),ia=(s,e,t=Ve.duration)=>new Proxy({animations:s.map(Lh).filter(Boolean),duration:t,options:e},Mh),Ch=s=>s.animations[0],Mh={get:(s,e)=>{const t=Ch(s);switch(e){case"duration":return s.duration;case"currentTime":return pi.s(t?.[e]||0);case"playbackRate":case"playState":return t?.[e];case"finished":return s.finished||(s.finished=Promise.all(s.animations.map(Ph)).catch(Xo)),s.finished;case"stop":return()=>{s.animations.forEach(i=>ta(i))};case"forEachNative":return i=>{s.animations.forEach(n=>i(n,s))};default:return typeof t?.[e]>"u"?void 0:()=>s.animations.forEach(i=>i[e]())}},set:(s,e,t)=>{switch(e){case"currentTime":t=pi.ms(t);case"playbackRate":for(let i=0;i<s.animations.length;i++)s.animations[i][e]=t;return!0}return!1}},Ph=s=>s.finished;function xh(s,e,t){return oi(s)?s(e,t):s}function Oh(s){return function(t,i,n={}){t=Ah(t);const r=t.length,o=[];for(let a=0;a<r;a++){const l=t[a];for(const c in i){const h=Th(n,c);h.delay=xh(h.delay,a,r);const u=Eh(l,c,i[c],h,s);o.push(u)}}return ia(o,n,n.duration)}}const Rh=Oh(Jo);function kh(s,e={}){return ia([()=>{const t=new Jo(s,[0,1],e);return t.finished.catch(()=>{}),t}],e,e.duration)}function Fh(s,e,t){return(oi(s)?kh:Rh)(s,e,t)}class ns extends de{connect(){this.hasVariantTarget&&(this.variantTargets.length>1?this.selectedValue=0:(this.selectedValue=this.variantTarget.dataset.productVidParam,this.selectedVariantValue=JSON.parse(this.variantTarget.dataset.productVariantParam)))}scrollToReviews(){document.getElementById("product_reviews").scrollIntoView({behavior:"smooth",block:"start"})}priceFieldTargetConnected(e){e.setAttribute("data-original-value",e.innerHTML)}selectVariant(e){this.selectedValue=e.params.vid,this.selectedVariantValue=e.params.variant}selectedValueChanged(){if(this.hasSelectedValue&&this.selectedValue!=0){this.hasVariantSelectTarget&&(this.variantSelectTarget.value=this.selectedValue);for(const t of this.variantTargets)t.dataset.productVidParam==this.selectedValue?(t.classList.add("active"),t.setAttribute("aria-checked","true")):(t.classList.remove("active"),t.setAttribute("aria-checked","false"));const e="feature__variant-"+this.selectedValue;for(const t of document.querySelectorAll(".feature__variant"))t.classList.contains(e)?t.classList.remove("hidden"):t.classList.add("hidden");if(this.hasPriceFieldTarget){let t=this.selectedVariantValue.price;if(this.moneyFormatValue.includes("$")||this.moneyFormatValue.includes("\u20AC")?(t=parseFloat(t/100).toFixed(2).toString().replace(".00",""),this.moneyFormatValue.includes("\u20AC")&&(t=t.replace(".",","))):t=t.toString(),this.showStrikeValue==!0&&this.selectedVariantValue.compare_at_price!=""){let n=this.selectedVariantValue.compare_at_price;n=parseFloat(n/100).toFixed(2).toString().replace(".00",""),this.moneyFormatValue.includes("\u20AC")&&(n=n.replace(".",",")),t+=`<strike class='font-medium text-lg ml-2 text-theme1-muted'>${this.moneyFormatValue[0]}${n}</strike>`}let i=this.moneyFormatValue.replace("{{amount}}",t);this.priceFieldTarget.innerHTML=i}this.hasWishlistFormTarget&&(this.wishlistFormTarget.classList.remove("disabled","toggled"),this.wishlistValue.includes(this.selectedValue.toString())?(this.wishlistFormTarget.classList.add("on-wishlist"),this.wishlistFormTarget.classList.remove("not-on-wishlist")):(this.wishlistFormTarget.classList.add("not-on-wishlist"),this.wishlistFormTarget.classList.remove("on-wishlist")))}else{this.hasVariantSelectTarget&&(this.variantSelectTarget.selectedIndex=null);for(const e of this.variantTargets)e.classList.remove("active"),e.setAttribute("aria-checked","false");for(const e of document.querySelectorAll(".feature__variant"))e.classList.add("hidden");this.hasPriceFieldTarget&&"originalValue"in this.priceFieldTarget.dataset&&(this.priceFieldTarget.innerHTML=this.priceFieldTarget.dataset.originalValue),this.hasWishlistFormTarget&&this.wishlistFormTarget.classList.add("disabled")}this.updateFeatureList()}selectedVariantValueChanged(){Object.keys(this.selectedVariantValue).length>0?this.selectedVariantValue.available=="true"?(this.buttonDisabledValue=!1,this.buttonTextValue=this.enabledTextValue,this.hasSignupsTarget&&this.signupsTarget.classList.add("hidden")):(this.buttonDisabledValue=!0,this.buttonTextValue=this.soldOutTextValue,this.hasSignupsTarget&&this.signupsTarget.classList.remove("hidden")):(this.buttonDisabledValue=!0,this.buttonTextValue=this.disabledTextValue,this.hasSignupsTarget&&this.signupsTarget.classList.remove("add"))}updateFeatureList(){if(this.hasFeatureListTarget){let e=0,t="";for(const i of document.querySelectorAll(".feature"))!i.classList.contains("hidden")&&"title"in i.dataset&&(e+=1,t+=`<li class="text-lg mt-1 flex"><span class="text-theme1-green-500 font-bold mr-1" aria-hidden="true">+</span><a href="#${i.id}" class="flex-grow font-bold text-theme1-link hover:text-theme1-link-hover" data-action="product#scrollFeatureIntoView:prevent" data-turbo="false">${i.dataset.title}</a></li>`);t!=this.featureListTarget.innerHTML&&(this.featureListTarget.innerHTML=t),e>0?this.featureListTarget.parentElement.classList.remove("hidden"):this.featureListTarget.parentElement.classList.add("hidden")}}scrollFeatureIntoView(e){const t=document.getElementById(e.target.getAttribute("href").replace("#",""));t.classList.remove("animate-ring"),t.offsetWidth,t.classList.add("animate-ring"),t.scrollIntoView({behavior:"smooth",block:"start"})}openCart(){this.dispatch("openDrawer",{detail:{element:"nav_drawer_cart"}})}clearCart(e){e.target.innerHTML="<span class='icon-[fa6-solid--circle-notch] animate-spin'></span>",fetch("/cart/clear").then(()=>location.reload())}signupModal(e){if(this.signupsEndpointValue!=""){e.preventDefault();let t=`${this.signupsEndpointValue}/products/${this.idValue}/${this.selectedValue}/signup.embed`;X.show([{src:t,type:"iframe",preload:!1,width:400,height:600}])}}signupVariantModal(e){if(this.signupsEndpointValue!=""){e.preventDefault();let t=`${this.signupsEndpointValue}/products/${e.params.pid}/${e.params.vid}/signup.embed`;X.show([{src:t,type:"iframe",preload:!1,width:400,height:600}])}}selectAddon(e){const t=e.target;t.classList.add("active"),t.setAttribute("aria-checked","true");for(const i of this.addonTargets)i.dataset.productPidParam==e.params.pid&&i.dataset.productVidParam!=e.params.vid&&(i.classList.remove("active"),i.setAttribute("aria-checked","false"));if(this.hasAddonSelectTarget)for(const i of this.addonSelectTargets)i.dataset.pid==t.dataset.productPidParam&&(i.value=t.dataset.productVidParam)}animateStar(e){const t=document.createElement("span");t.classList.add("icon-[fg--star]","absolute","text-theme1-green","pointer-events-none","motion-reduce:hidden"),t.style.left="48%",t.setAttribute("aria-hidden","true"),e.prepend(t);let i=Math.max(100,Math.min(200,window.screen.width/6));e.getBoundingClientRect().right+i>window.screen.width&&(i=30);const r=Math.max(-450,-(window.pageYOffset+e.getBoundingClientRect().top));Fh(t,{x:[0,0,0,i],y:[0,-60,-70,r],opacity:[0,1,1,0],scale:[0,3.5,3,1],rotate:[-30,0,0,300]},{duration:.8,offset:[0,.15,.4,1]}),setTimeout(()=>{t.remove()},1e3)}addSelectedToCart(e){if(e.preventDefault(),this.selectedValue!=0){this.buttonDisabledValue=!0,this.buttonTextValue=this.addingTextValue,this.animateStar(this.addButtonTarget.parentElement);let t=[],i={id:this.selectedValue,quantity:this.quantityValue};this.hasPreorderPropertyTarget&&(i.properties={_Preorder:this.preorderPropertyTarget.value}),t.push(i);for(const o of this.addonSelectTargets)o.value!=""&&t.push({id:o.value,quantity:1});const n={items:t,sections:"cart-header,cart-items,cart-footer"},r=`${window.Shopify.routes.root}cart/add`;fetch(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(o=>(o.ok||(console.error("Error adding to cart"),console.error(o)),o.json())).then(o=>{this.hasAddedToCartTarget&&this.addedToCartTarget.classList.remove("hidden"),document.getElementById("shopify-section-cart-header").innerHTML=o.sections["cart-header"],document.getElementById("shopify-section-cart-items").innerHTML=o.sections["cart-items"],document.getElementById("shopify-section-cart-footer").innerHTML=o.sections["cart-footer"],document.getElementById("shopify-section-cart-recommendations").innerHTML="";let a=document.getElementById("nav_cart_icon");a.classList.remove("animate-cartdunk"),a.offsetWidth,a.classList.add("animate-cartdunk"),setTimeout(()=>{a.classList.remove("animate-cartdunk")},1e3);for(const c of t)document.getElementById(`cart_item_${c.id}`).classList.add("animate-bgflash");this.openCart();const l=`${window.Shopify.routes.root}recommendations/products?product_id=${o.items[0].product_id}&section_id=cart-recommendations&limit=8`;fetch(l).then(c=>c.text()).then(c=>{document.getElementById("shopify-section-cart-recommendations").innerHTML=c}),this.buttonDisabledValue=!1,this.buttonTextValue=this.enabledTextValue})}}addComboProductToCart(e){const t=e.target,i=this.element.closest("turbo-frame");let n="build_a_combo";i!==null&&(n=i.id),t.classList.add("disabled"),t.setAttribute("disabled","true"),t.innerHTML=this.addingTextValue,this.animateStar(t.parentElement);let r=[];const o=e.params.vid.toString().split(",");for(const c of o){let h={id:c,quantity:1};this.hasPreorderPropertyTarget&&(h.properties={_Preorder:this.preorderPropertyTarget.value}),r.push(h)}const a={items:r,sections:"cart-header,cart-items,cart-footer"},l=`${window.Shopify.routes.root}cart/add`;fetch(l,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(c=>(c.ok||(console.error("Error adding to cart"),console.error(c)),c.json())).then(c=>{document.getElementById("shopify-section-cart-header").innerHTML=c.sections["cart-header"],document.getElementById("shopify-section-cart-items").innerHTML=c.sections["cart-items"],document.getElementById("shopify-section-cart-footer").innerHTML=c.sections["cart-footer"];let h=document.getElementById("nav_cart_icon");h.classList.remove("animate-cartdunk"),h.offsetWidth,h.classList.add("animate-cartdunk"),Turbo.visit(`${window.location.href.split("?")[0]}?section_id=${this.sectionIdValue}`,{frame:n})})}replaceRuleTargetConnected(e){if("find"in e.dataset&&"replace"in e.dataset){const t=document.getElementById("product_breadcrumbs"),i=document.getElementById("product_title"),n=document.getElementById("product_description"),r=document.getElementById("product_features");t!=null&&(t.innerHTML=t.innerHTML.replaceAll(e.dataset.find,e.dataset.replace)),i!=null&&(i.innerHTML=i.innerHTML.replaceAll(e.dataset.find,e.dataset.replace)),n!=null&&(n.innerHTML=n.innerHTML.replaceAll(e.dataset.find,e.dataset.replace)),r!=null&&(r.innerHTML=r.innerHTML.replaceAll(e.dataset.find,e.dataset.replace))}}loadEditionInPlace(e){this.element.classList.add("loading"),window.shouldPreserveScroll=!0}wishlistFormConnected(e){this.selectedValue!=0&&e.classList.remove("disabled")}toggleWishlistSelected(e){this.wishlistFormTarget.classList.add("loading"),this.wishlistFormTarget.classList.remove("on-wishlist","not-on-wishlist","toggled");const t=this.wishlistEndpointValue,i={id:this.selectedValue,customer_id:this.customerIdValue,customer_key:this.customerKeyValue,shop:this.shopDomainValue};fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(n=>(n.ok||(console.error("Error wishlisting"),console.error(n)),n.json())).then(n=>{this.wishlistValue=n.wish_list,this.wishlistFormTarget.classList.remove("loading"),this.wishlistValue.includes(this.selectedValue.toString())?this.wishlistFormTarget.classList.add("on-wishlist","toggled"):this.wishlistFormTarget.classList.add("not-on-wishlist")})}decreaseQuantity(e){const t=e.target.parentElement.querySelector(".quantity-input");let i=parseInt(t.value);t.value=i-parseInt(t.getAttribute("step")),t.dispatchEvent(new Event("change",{bubbles:!0}))}increaseQuantity(e){const t=e.target.parentElement.querySelector(".quantity-input");let i=parseInt(t.value);t.value=i+parseInt(t.getAttribute("step")),t.dispatchEvent(new Event("change",{bubbles:!0}))}setQuantity(e){const t=e.target;let i=parseInt(t.value);const n=t.max;i>n&&(i=n,t.value=n),this.quantityValue=i;const r=e.target.parentElement.querySelector(".quantity-minus");i>t.min?r.removeAttribute("disabled"):r.setAttribute("disabled",!0);const o=e.target.parentElement.querySelector(".quantity-plus");i<n?o.removeAttribute("disabled"):o.setAttribute("disabled",!0)}cartOutletConnected(e,t){this.overLimitValue=!1,this.buttonTextValue==this.overLimitTextValue&&(this.buttonDisabledValue=!1,this.buttonTextValue=this.enabledTextValue);for(const i of e.itemTargets)if(i.dataset.pid==this.idValue){const n=parseInt(i.dataset.quantity),r=parseInt(i.dataset.max);n>=r&&(this.overLimitValue=!0,this.buttonDisabledValue=!0,this.buttonTextValue=this.overLimitTextValue)}}buttonDisabledValueChanged(){this.hasAddButtonTarget&&(this.buttonDisabledValue==!0||this.overLimitValue==!0?(this.addButtonTarget.classList.add("disabled"),this.addButtonTarget.setAttribute("disabled","true"),this.overLimitValue==!0&&(this.buttonTextValue=this.overLimitTextValue)):(this.addButtonTarget.classList.remove("disabled"),this.addButtonTarget.removeAttribute("disabled")))}buttonTextValueChanged(){this.hasAddButtonTarget&&this.addButtonTarget.setAttribute("value",this.buttonTextValue)}}S(ns,"targets",["priceField","sizes","variantSelect","variant","addButton","description","inventoryAlert","signups","addonSelect","addon","featureList","preorderProperty","addedToCart","comboProduct","comboProgress","comboTier","replaceRule","wishlistForm"]),S(ns,"outlets",["cart"]),S(ns,"values",{id:{type:Number,default:0},selected:{type:Number,default:0},selectedVariant:{type:Object,default:{}},addingText:{type:String,default:"Adding..."},enabledText:{type:String,default:"Add to Cart"},soldOutText:{type:String,default:"Restocking Soon!"},disabledText:{type:String,default:"Select an Option"},overLimitText:{type:String,default:"Max Reached"},signupsEndpoint:{type:String,default:""},wishlistEndpoint:{type:String,default:""},shopDomain:{type:String,default:""},customerId:{type:String,default:""},customerKey:{type:String,default:""},moneyFormat:{type:String,default:"${{amount}}"},wishlist:{type:String,default:""},showStrike:{type:Boolean,default:!1},quantity:{type:Number,default:1},buttonDisabled:{type:Boolean,default:!1},buttonText:{type:String,default:"Add to Cart"},overLimit:{type:Boolean,default:!1},sectionId:{type:String,default:"product-main"}});const Ih=Object.freeze(Object.defineProperty({__proto__:null,default:ns},Symbol.toStringTag,{value:"Module"}));class jn extends de{connect(){this.hasButtonTarget&&this.hasBodyTarget&&(this.bodyTarget.innerHTML.length>this.maxLengthValue?this.buttonTarget.classList.remove("hidden"):(this.buttonTarget.classList.add("hidden"),this.bodyTarget.classList.add("!line-clamp-none")))}toggle(){this.openValue=!this.openValue}close(){this.openValue=!1}openValueChanged(){this.openValue==!0?(this.hasButtonTarget&&(this.buttonTarget.classList.add("open"),this.buttonTarget.innerHTML=this.closeTextValue,this.buttonTarget.setAttribute("aria-expanded","true")),this.hasBodyTarget&&this.bodyTarget.classList.add("!line-clamp-none")):(this.hasButtonTarget&&(this.buttonTarget.classList.remove("open"),this.buttonTarget.innerHTML=this.openTextValue,this.buttonTarget.setAttribute("aria-expanded","false")),this.hasBodyTarget&&this.bodyTarget.classList.remove("!line-clamp-none"))}}S(jn,"values",{open:{type:Boolean,default:!1},maxLength:{type:Number,default:300},openText:{type:String,default:"Read more \u2193"},closeText:{type:String,default:"Read less \u2191"}}),S(jn,"targets",["button","body"]);const Bh=Object.freeze(Object.defineProperty({__proto__:null,default:jn},Symbol.toStringTag,{value:"Module"}));class Hn extends de{reviewsTargetConnected(){if(this.countValue>0&&!this.reviewsTarget.classList.contains("initialized")){if(this.hasKeyValue&&this.hasPidValue)try{const e="https://api.juniphq.com/v1/product_reviews?page[size]=5&include=customer&filter[product_remote_id]="+this.pidValue;fetch(e,{headers:{"Junip-Store-Key":this.keyValue}}).then(t=>t.json()).then(t=>{this.reviewsTarget.classList.add("initialized"),this.loadReviews(t)})}catch(e){console.error(`Error fetching from Junip: ${e.message}`)}}else this.countValue==0&&this.hasEmptyTarget&&this.emptyTarget.classList.remove("hidden")}loadNext(){if(this.element.setAttribute("disabled","true"),this.element.classList.add("disabled"),this.nextValue!=""&&this.hasKeyValue&&this.hasPidValue)try{const e="https://api.juniphq.com/v1/product_reviews?page[size]=5&include=customer&filter[product_remote_id]="+this.pidValue+"&page[after]="+this.nextValue;fetch(e,{headers:{"Junip-Store-Key":this.keyValue}}).then(t=>t.json()).then(t=>{this.element.removeAttribute("disabled"),this.loadReviews(t)})}catch(e){console.error(`Error fetching next from Junip: ${e.message}`),this.element.removeAttribute("disabled"),this.element.classList.remove("disabled")}}loadReviews(e){const t=e.meta.page.after,i=e.product_reviews;if(t?(this.nextValue=t,this.hasNextTarget&&this.nextTarget.classList.remove("hidden")):(this.nextValue="",this.hasNextTarget&&this.nextTarget.classList.add("hidden")),this.hasReviewsTarget&&this.hasTemplateTarget)for(const n of i){const r=this.templateTarget.content.firstElementChild.cloneNode(!0);let o=n.customer.first_name;n.customer.last_name!=null&&(o+=" "+n.customer.last_name),r.querySelector(".review-author").innerHTML=o,n.verified_buyer&&r.querySelector(".review-verified").classList.remove("hidden");let a="";for(let l=1;l<=5;l++)l<=n.rating?a+="<span class='icon-[fg--review-star-full]'></span>":a+="<span class='icon-[fg--review-star-empty]'></span>";if(r.querySelector(".review-stars").innerHTML=a,r.querySelector(".review-title").innerHTML=n.title,r.querySelector(".review-body").innerHTML=n.body,r.querySelector(".review-date").innerHTML=new Intl.DateTimeFormat("en-US").format(new Date(n.created_at)),n.response!=null&&(r.querySelector(".review-response").innerHTML+=n.response,r.querySelector(".review-response").classList.remove("hidden")),n.photo_urls.length>0){r.querySelector(".review-images").classList.remove("hidden");for(const l of n.photo_urls){const c=`<a href='${l.large}' class='block overflow-hidden' data-fancybox='review_${n.id}'><img data-src='${l.thumbnail}' class='lazyload object-cover aspect-3/2 rounded hover:scale-105 !duration-150 !transition-all' width='150' height='100' alt='Review image for ${n.title}' /></a>`;r.querySelector(".review-images").innerHTML+=c}}this.reviewsTarget.append(r)}}featuredReviewsTargetConnected(e){if(!e.classList.contains("initialized")&&this.hasKeyValue&&this.hasPidValue)try{fetch("https://api.juniphq.com/v1/product_reviews?page[size]=8&include=customer,product&filter[media_only]=true&filter[rating]=5",{headers:{"Junip-Store-Key":this.keyValue}}).then(i=>i.json()).then(i=>{e.classList.add("initialized"),this.loadFeaturedReviews(i)})}catch(t){console.error(`Error fetching featured reviews from Junip: ${t.message}`),this.element.destroy()}}loadFeaturedReviews(e){const t=e.meta.page.after,i=e.product_reviews;let n=0;if(t?(this.nextValue=t,this.hasNextTarget&&this.nextTarget.classList.remove("hidden")):(this.nextValue="",this.hasNextTarget&&this.nextTarget.classList.add("hidden")),this.hasFeaturedReviewsTarget&&this.hasTemplateTarget)for(const r of i){if(r.photo_urls.length==0)continue;const o=this.templateTarget.content.firstElementChild.cloneNode(!0);let a=r.customer.first_name;r.customer.last_name!=null&&(a+=" "+r.customer.last_name),o.querySelector(".review-author").innerHTML=a;let l="";for(let h=1;h<=5;h++)h<=r.rating?l+="<span class='h-4 w-4 icon-[fg--review-star-full]'></span>":l+="<span class='h-4 w-4 icon-[fg--review-star-empty]'></span>";o.querySelector(".review-stars").innerHTML=l,o.querySelector(".review-title").innerHTML=r.title,r.product!==null&&(o.querySelector(".review-product").innerHTML=`<a class='font-bold text-theme1-link hover:text-theme1-link-hover' href='/products/${r.product.remote_handle}'>${r.product.title}</a>`),o.querySelector(".review-body").innerHTML=r.body,o.querySelector(".review-date").innerHTML=new Intl.DateTimeFormat("en-US").format(new Date(r.created_at));const c=r.photo_urls[0];if(o.querySelector(".review-image").innerHTML=`<a href='${c.large}' class='block overflow-hidden' data-fancybox='review_${r.id}'><img data-src='${c.thumbnail}' class='lazyload object-cover h-full w-full aspect-3/2 shadow hover:scale-105 !duration-150 !transition-all' width='300' height='150' alt='Review image for ${r.title}' /></a>`,this.featuredReviewsTarget.append(o),n+=1,n>=6)break}}loadNextFeatured(){if(this.element.setAttribute("disabled","true"),this.element.classList.add("disabled"),this.nextValue!=""&&this.hasKeyValue)try{const e="https://api.juniphq.com/v1/product_reviews?page[size]=8&include=customer,product&filter[media_only]=true&filter[rating]=5&page[after]="+this.nextValue;fetch(e,{headers:{"Junip-Store-Key":this.keyValue}}).then(t=>t.json()).then(t=>{this.element.removeAttribute("disabled"),this.loadFeaturedReviews(t)})}catch(e){console.error(`Error fetching next featured from Junip: ${e.message}`),this.element.removeAttribute("disabled"),this.element.classList.remove("disabled")}}}S(Hn,"values",{count:{type:Number},average:{type:Number},key:{type:String},pid:{type:Number},next:{type:String}}),S(Hn,"targets",["review","reviews","template","empty","next","featuredReviews"]);const _h=Object.freeze(Object.defineProperty({__proto__:null,default:Hn},Symbol.toStringTag,{value:"Module"}));class rs extends jo{connect(){Ho(this,{element:this.element})}clickOutside(){this.hide()}hide(){this.resultsBoxTarget.classList.add("hidden")}search(e){const t=this.queryFieldTarget.value.trim();t.length>=2?(this.clearButtonTarget.classList.remove("hidden"),this.searchButtonTarget.classList.add("active"),t!=this.lastQueryValue||this.resultsListTarget.innerHTML==""?this.predictiveSearch(t):this.resultsBoxTarget.classList.remove("hidden")):(this.clearButtonTarget.classList.add("hidden"),this.resultsBoxTarget.classList.add("hidden"),this.searchButtonTarget.classList.remove("active"))}predictiveSearch(e){this.resultsBoxTarget.classList.remove("hidden"),this.hasResultTarget||this.loaderTarget.classList.remove("hidden");try{const t=`/search/suggest?q=${e}&section_id=predictive-search`;fetch(t).then(i=>{if(!i.ok)throw new Error(i.status);return i.text()}).then(i=>{this.lastQueryValue=e,this.loaderTarget.classList.add("hidden");const n=new DOMParser().parseFromString(i,"text/html").querySelector("#shopify-section-predictive-search").innerHTML;this.resultsListTarget.innerHTML=n})}catch(t){console.error(`Error searching Shopify: ${t.message}`)}}fullSearch(e){this.queryFieldTarget.value.trim().length<2&&(e.preventDefault(),this.queryFieldTarget.focus())}clearSearch(){this.queryFieldTarget.value="",this.resultsBoxTarget.classList.add("hidden"),this.loaderTarget.classList.add("hidden"),this.clearButtonTarget.classList.add("hidden"),this.searchButtonTarget.classList.remove("active"),this.resultsListTarget.innerHTML="",this.queryFieldTarget.focus()}prevResult(e){e.preventDefault();const t=this.resultTargets.indexOf(e.target);document.activeElement==this.fallbackSearchButtonTarget&&this.hasResultTarget?this.resultTargets[this.resultTargets.length-1].focus():t!=-1&&this.resultTargets[t-1]!=null?this.resultTargets[t-1].focus():this.hasQueryFieldTarget&&this.queryFieldTarget.focus()}nextResult(e){e.preventDefault();const t=this.resultTargets.indexOf(e.target);document.activeElement==this.queryFieldTarget&&this.hasResultTarget?this.resultTarget.focus():t!=-1&&this.resultTargets[t+1]!=null?this.resultTargets[t+1].focus():this.hasFallbackSearchButtonTarget&&this.fallbackSearchButtonTarget.focus()}}S(rs,"debounces",[{name:"search",wait:100}]),S(rs,"values",{lastQuery:{type:String}}),S(rs,"targets",["clearButton","fallbackSearchButton","loader","result","resultsBox","resultsList","queryField","searchButton"]);const Dh=Object.freeze(Object.defineProperty({__proto__:null,default:rs},Symbol.toStringTag,{value:"Module"}));class qn extends de{timerTargetConnected(){this.endValue!=""&&(this.hasTimerHeaderTarget&&(this.timerTargetHeader.innerHTML="Time Remaining:"),this.updateTimer())}updateTimer(){const e=+new Date(this.endValue)-+new Date;let t="Time's up!";if(e>0){const i={days:Math.floor(e/864e5),hours:Math.floor(e/36e5%24),minutes:Math.floor(e/1e3/60%60)};t=Object.keys(i).map(n=>`${i[n]}<span class='text-theme1-green-700 uppercase text-xs'>${n[0]}</span>`).join(" ")}this.timerTarget.innerHTML=t}}S(qn,"values",{end:{type:String,default:""}}),S(qn,"targets",["timer","header"]);const Vh=Object.freeze(Object.defineProperty({__proto__:null,default:qn},Symbol.toStringTag,{value:"Module"}));class sa extends de{connect(){for(const e of this.element.querySelectorAll("video"))e.setAttribute("data-video-target","video")}playVideo(e){this.hasVideoTarget&&this.hasPlayButtonTarget&&(this.videoTarget.play(),this.videoTarget.setAttribute("controls",!0),this.playButtonTarget.classList.add("hidden"),this.videoTarget.focus())}playExternalVideo(e){this.hasContainerTarget&&(e.preventDefault(),this.containerTarget.innerHTML=`<iframe class="w-full aspect-video" src="https://www.youtube-nocookie.com/embed/${e.params.ytid}?autoplay=1" credentialless allowfullscreen referrerpolicy="no-referrer" sandbox="allow-scripts allow-same-origin" csp="sandbox allow-scripts allow-same-origin;" frameborder="0" allow="accelerometer 'none'; ambient-light-sensor 'none'; autoplay 'none'; battery 'none'; browsing-topics 'none'; camera 'none'; display-capture 'none'; domain-agent 'none'; document-domain 'none'; encrypted-media 'none'; execution-while-not-rendered 'none'; execution-while-out-of-viewport ''; gamepad 'none'; geolocation 'none'; gyroscope 'none'; hid 'none'; identity-credentials-get 'none'; idle-detection 'none'; local-fonts 'none'; magnetometer 'none'; microphone 'none'; midi 'none'; otp-credentials 'none'; payment 'none'; picture-in-picture 'none'; publickey-credentials-create 'none'; publickey-credentials-get 'none'; screen-wake-lock 'none'; serial 'none'; speaker-selection 'none'; usb 'none'; window-management 'none'; xr-spatial-tracking 'none'"></iframe>`)}}S(sa,"targets",["container","playButton","video"]);const zh=Object.freeze(Object.defineProperty({__proto__:null,default:sa},Symbol.toStringTag,{value:"Module"}));class $n extends de{productTargetConnected(e){const t=`${window.Shopify.routes.root}products/${e.dataset.handle}.js`;fetch(t).then(i=>i.status!=200?!1:i.json()).then(i=>{if(e.classList.remove("loader"),i!=!1){e.querySelector(".wishlist-title").innerHTML=i.title,e.querySelector(".wishlist-image").setAttribute("src",i.images[0].replace(".png","_x120.png"));for(const l of e.querySelectorAll(".wishlist-link"))l.setAttribute("href",i.url);let n=!1;for(const l of i.variants)l.id.toString()==e.dataset.vid&&(n=l);n.title.includes("Default")||(e.querySelector(".wishlist-variant").innerHTML=n.title);let r=n.price;this.moneyFormatValue.includes("$")||this.moneyFormatValue.includes("\u20AC")?(r=parseFloat(r/100).toFixed(2).toString().replace(".00",""),this.moneyFormatValue.includes("\u20AC")&&(r=r.replace(".",","))):r=r.toString(),e.querySelector(".wishlist-price").innerHTML=this.moneyFormatValue.replace("{{amount}}",r);const o=e.querySelector(".wishlist-add");n.inventory_policy=="deny"&&n.inventory_quantity<=0?(o.classList.add("disabled"),o.setAttribute("disabled",!0),o.innerHTML=this.disabledTextValue):this.cartValue.includes(n.id.toString())?(o.classList.add("disabled"),o.setAttribute("disabled",!0),o.innerHTML=this.inCartTextValue):(o.classList.remove("disabled"),o.removeAttribute("disabled"),o.innerHTML=this.enabledTextValue,o.setAttribute("data-wishlist-vid-param",n.id));const a=e.querySelector(".wishlist-remove");a!==null&&a.setAttribute("data-wishlist-vid-param",n.id),e.classList.add("loaded")}else e.remove()})}publicWishlistTargetConnected(e){const t=new URLSearchParams(document.location.search);if(t.has("title")){const i=t.get("title");this.element.querySelector(".wishlist-main-title").innerHTML=i}if(t.has("items")){const i=t.get("items").split(";");for(const n of i){const r=n.split(","),o=r[0],a=r[1],l=this.productTemplateTarget.content.firstElementChild.cloneNode(!0);l.setAttribute("data-handle",o),l.setAttribute("data-vid",a),l.querySelector(".wishlist-add").setAttribute("data-wishlist-vid-param",a),this.publicWishlistTarget.append(l),this.productTargetConnected(l)}}}publicAddToCart(e){const t=e.target;t.classList.add("disabled"),t.setAttribute("disabled","true"),t.innerHTML=this.addingTextValue;const n={items:[{id:e.params.vid.toString(),quantity:1}],sections:"cart-header,cart-items,cart-footer"},r=`${window.Shopify.routes.root}cart/add`;fetch(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(o=>(o.ok||(console.error("Error adding to cart"),console.error(o)),o.json())).then(o=>{document.getElementById("shopify-section-cart-header").innerHTML=o.sections["cart-header"],document.getElementById("shopify-section-cart-items").innerHTML=o.sections["cart-items"],document.getElementById("shopify-section-cart-footer").innerHTML=o.sections["cart-footer"],t.parentElement.querySelector(".added-to-cart").classList.remove("hidden"),t.classList.remove("disabled"),t.removeAttribute("disabled"),t.innerHTML=this.enabledTextValue})}addToCart(e){const t=e.target;t.classList.add("disabled"),t.setAttribute("disabled","true"),t.innerHTML=this.addingTextValue,t.parentElement.querySelector(".wishlist-remove").classList.add("hidden");const n={items:[{id:e.params.vid.toString(),quantity:1}],sections:"cart-items,cart-footer"},r=`${window.Shopify.routes.root}cart/add`;fetch(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(o=>(o.ok||(console.error("Error adding to cart"),console.error(o)),o.json())).then(o=>{document.getElementById("shopify-section-cart-items").innerHTML=o.sections["cart-items"],document.getElementById("shopify-section-cart-footer").innerHTML=o.sections["cart-footer"],this.isCartPageValue==!0&&(document.getElementById("cart_items_container").classList.add("big-cart"),document.getElementById("cart_footer").classList.add("big-cart")),t.parentElement.querySelector(".added-to-cart").classList.remove("hidden"),t.classList.remove("disabled"),t.removeAttribute("disabled"),t.innerHTML=this.enabledTextValue})}remove(e){const t=e.target.closest(".wishlist-item");t.classList.add("interacting");const i=this.wishlistEndpointValue,n={id:e.params.vid,customer_id:this.customerIdValue,customer_key:this.customerKeyValue,shop:this.shopDomainValue};fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(r=>(r.ok||(console.error("Error wishlisting"),console.error(r)),r.json())).then(r=>{this.wishlistValue=r.wish_list,t.remove()})}}S($n,"targets",["product","productTemplate","publicWishlist"]),S($n,"values",{cart:{type:String,default:""},moneyFormat:{type:String,default:"${{amount}}"},wishlist:{type:String,default:""},wishlistEndpoint:{type:String,default:""},shopDomain:{type:String,default:""},customerId:{type:String,default:""},customerKey:{type:String,default:""},addingText:{type:String,default:"Adding..."},inCartText:{type:String,default:"In Cart"},enabledText:{type:String,default:"Add to Cart"},disabledText:{type:String,default:"Unavailable"},isCartPage:{type:Boolean,default:!1}});const Nh=Object.freeze(Object.defineProperty({__proto__:null,default:$n},Symbol.toStringTag,{value:"Module"}));var jh=/^(?:.*?(?:controllers|components)\/|\.?\.\/)?(.+)(?:[/_-]controller\..+?)$/;function Hh(s,e){s.load(qh(e))}function qh(s){return Object.entries(s).map($h).filter(e=>e)}function $h([s,e]){var t;const i=Wh(s),n=(t=e.default)!=null?t:e;if(i&&typeof n=="function")return{identifier:i,controllerConstructor:n}}function Wh(s){const e=(s.match(jh)||[])[1];if(e)return e.replace(/_/g,"-").replace(/\//g,"--")}const Uh=ac.start(),Kh=Object.assign({"./carousel_controller.js":Lc,"./cart_controller.js":Cc,"./collapse_controller.js":Mc,"./collections_controller.js":Nc,"./deturbo_controller.js":jc,"./drawer_controller.js":Hc,"./grid_controller.js":qc,"./megamenu_controller.js":$c,"./pagination_controller.js":Wc,"./plausible_controller.js":Uc,"./product_controller.js":Ih,"./readmore_controller.js":Bh,"./reviews_controller.js":_h,"./search_controller.js":Dh,"./timer_controller.js":Vh,"./video_controller.js":zh,"./wishlist_controller.js":Nh});Hh(Uh,Kh);/*!
Turbo 8.0.4
Copyright  2024 37signals LLC
 */(function(s){if(typeof s.requestSubmit=="function")return;s.requestSubmit=function(i){i?(e(i,this),i.click()):(i=document.createElement("input"),i.type="submit",i.hidden=!0,this.appendChild(i),i.click(),this.removeChild(i))};function e(i,n){i instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),i.type=="submit"||t(TypeError,"The specified element is not a submit button"),i.form==n||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}function t(i,n,r){throw new i("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+n+".",r)}})(HTMLFormElement.prototype);const na=new WeakMap;function Xh(s){const e=s instanceof Element?s:s instanceof Node?s.parentElement:null,t=e?e.closest("input, button"):null;return t?.type=="submit"?t:null}function Gh(s){const e=Xh(s.target);e&&e.form&&na.set(e.form,e)}(function(){if("submitter"in Event.prototype)return;let s=window.Event.prototype;if("SubmitEvent"in window){const e=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in e))s=e;else return}addEventListener("click",Gh,!0),Object.defineProperty(s,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return na.get(this.target)}})})();const Ut={eager:"eager",lazy:"lazy"},Ts=class Ts2 extends HTMLElement{constructor(){super(),S(this,"loaded",Promise.resolve()),this.delegate=new Ts2.delegateConstructor(this)}static get observedAttributes(){return["disabled","loading","src"]}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(t){t=="loading"?this.delegate.loadingStyleChanged():t=="src"?this.delegate.sourceURLChanged():t=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(t){t?this.setAttribute("refresh",t):this.removeAttribute("refresh")}get loading(){return Yh(this.getAttribute("loading")||"")}set loading(t){t?this.setAttribute("loading",t):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(t){t?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var t,i;return(i=(t=this.ownerDocument)==null?void 0:t.documentElement)==null?void 0:i.hasAttribute("data-turbo-preview")}};S(Ts,"delegateConstructor");let Ge=Ts;function Yh(s){switch(s.toLowerCase()){case"lazy":return Ut.lazy;default:return Ut.eager}}function we(s){return new URL(s.toString(),document.baseURI)}function Pt(s){let e;if(s.hash)return s.hash.slice(1);if(e=s.href.match(/#(.*)$/))return e[1]}function or(s,e){const t=e?.getAttribute("formaction")||s.getAttribute("action")||s.action;return we(t)}function Zh(s){return(id(s).match(/\.[^.]*$/)||[])[0]||""}function Jh(s){return!!Zh(s).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}function Qh(s,e){const t=sd(e);return s.href===we(t).href||s.href.startsWith(t)}function at(s,e){return Qh(s,e)&&Jh(s)}function Wn(s){const e=Pt(s);return e!=null?s.href.slice(0,-(e.length+1)):s.href}function es(s){return Wn(s)}function ed(s,e){return we(s).href==we(e).href}function td(s){return s.pathname.split("/").slice(1)}function id(s){return td(s).slice(-1)[0]}function sd(s){return nd(s.origin+s.pathname)}function nd(s){return s.endsWith("/")?s:s+"/"}class ar{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return we(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}}function vi(s){if(s.getAttribute("data-turbo-eval")=="false")return s;{const e=document.createElement("script"),t=ai("csp-nonce");return t&&(e.nonce=t),e.textContent=s.textContent,e.async=!1,rd(e,s),e}}function rd(s,e){for(const{name:t,value:i}of e.attributes)s.setAttribute(t,i)}function od(s){const e=document.createElement("template");return e.innerHTML=s,e.content}function ce(s,{target:e,cancelable:t,detail:i}={}){const n=new CustomEvent(s,{cancelable:t,bubbles:!0,composed:!0,detail:i});return e&&e.isConnected?e.dispatchEvent(n):document.documentElement.dispatchEvent(n),n}function Gt(){return document.visibilityState==="hidden"?oa():ra()}function ra(){return new Promise(s=>requestAnimationFrame(()=>s()))}function oa(){return new Promise(s=>setTimeout(()=>s(),0))}function ad(){return Promise.resolve()}function aa(s=""){return new DOMParser().parseFromString(s,"text/html")}function la(s,...e){const t=ld(s,e).replace(/^\n/,"").split(`
`),i=t[0].match(/^\s+/),n=i?i[0].length:0;return t.map(r=>r.slice(n)).join(`
`)}function ld(s,e){return s.reduce((t,i,n)=>{const r=e[n]==null?"":e[n];return t+i+r},"")}function pt(){return Array.from({length:36}).map((s,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function ys(s,...e){for(const t of e.map(i=>i?.getAttribute(s)))if(typeof t=="string")return t;return null}function cd(s,...e){return e.some(t=>t&&t.hasAttribute(s))}function ws(...s){for(const e of s)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function Ss(...s){for(const e of s)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function hd(s,e=2e3){return new Promise(t=>{const i=()=>{s.removeEventListener("error",i),s.removeEventListener("load",i),t()};s.addEventListener("load",i,{once:!0}),s.addEventListener("error",i,{once:!0}),setTimeout(t,e)})}function ca(s){switch(s){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function dd(s){return s=="advance"||s=="replace"||s=="restore"}function xt(...s){const e=ys("data-turbo-action",...s);return dd(e)?e:null}function ha(s){return document.querySelector(`meta[name="${s}"]`)}function ai(s){const e=ha(s);return e&&e.content}function ud(s,e){let t=ha(s);return t||(t=document.createElement("meta"),t.setAttribute("name",s),document.head.appendChild(t)),t.setAttribute("content",e),t}function Yt(s,e){var t;if(s instanceof Element)return s.closest(e)||Yt(s.assignedSlot||((t=s.getRootNode())==null?void 0:t.host),e)}function lr(s){return!!s&&s.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof s.focus=="function"}function da(s){return Array.from(s.querySelectorAll("[autofocus]")).find(lr)}async function fd(s,e){const t=e();s(),await ra();const i=e();return[t,i]}function md(s){if(s.hasAttribute("target")){for(const e of document.getElementsByName(s.target))if(e instanceof HTMLIFrameElement)return!1}return!0}function pd(s){return Yt(s,"a[href]:not([target^=_]):not([download])")}function ua(s){return we(s.getAttribute("href")||"")}function gd(s,e){let t=null;return(...i)=>{const n=()=>s.apply(this,i);clearTimeout(t),t=setTimeout(n,e)}}class bd extends Set{constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){const i=this.values().next().value;this.delete(i)}super.add(e)}}const fa=new bd(20),vd=window.fetch;function ma(s,e={}){const t=new Headers(e.headers||{}),i=pt();return fa.add(i),t.append("X-Turbo-Request-Id",i),vd(s,{...e,headers:t})}function cr(s){switch(s.toLowerCase()){case"get":return ze.get;case"post":return ze.post;case"put":return ze.put;case"patch":return ze.patch;case"delete":return ze.delete}}const ze={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function yd(s){switch(s.toLowerCase()){case Et.multipart:return Et.multipart;case Et.plain:return Et.plain;default:return Et.urlEncoded}}const Et={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"};var yi,As,pa,Ls,ga;class Bi{constructor(e,t,i,n=new URLSearchParams,r=null,o=Et.urlEncoded){O(this,As),O(this,Ls),S(this,"abortController",new AbortController),O(this,yi,e2=>{});var c;const[a,l]=ro(we(i),t,n,o);this.delegate=e,this.url=a,this.target=r,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:t,headers:{...this.defaultHeaders},body:l,signal:this.abortSignal,referrer:(c=this.delegate.referrer)==null?void 0:c.href},this.enctype=o}get method(){return this.fetchOptions.method}set method(e){const t=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,i=cr(e)||ze.get;this.url.search="";const[n,r]=ro(this.url,i,t,this.enctype);this.url=n,this.fetchOptions.body=r,this.fetchOptions.method=i}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:e}=this;this.delegate.prepareRequest(this);const t=await B(this,As,pa).call(this,e);try{this.delegate.requestStarted(this),t.detail.fetchRequest?this.response=t.detail.fetchRequest.response:this.response=ma(this.url.href,e);const i=await this.response;return await this.receive(i)}catch(i){if(i.name!=="AbortError")throw B(this,Ls,ga).call(this,i)&&this.delegate.requestErrored(this,i),i}finally{this.delegate.requestFinished(this)}}async receive(e){const t=new ar(e);return ce("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return hr(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}}yi=new WeakMap,As=new WeakSet,pa=async function(e){const t=new Promise(n=>re(this,yi,n)),i=ce("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:_(this,yi)},target:this.target});return this.url=i.detail.url,i.defaultPrevented&&await t,i},Ls=new WeakSet,ga=function(e){return!ce("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented};function hr(s){return cr(s)==ze.get}function ro(s,e,t,i){const n=Array.from(t).length>0?new URLSearchParams(ba(t)):s.searchParams;return hr(e)?[wd(s,n),null]:i==Et.urlEncoded?[s,n]:[s,t]}function ba(s){const e=[];for(const[t,i]of s)i instanceof File||e.push([t,i]);return e}function wd(s,e){const t=new URLSearchParams(ba(e));return s.search=t.toString(),s}class Sd{constructor(e,t){S(this,"started",!1),S(this,"intersect",e2=>{const t2=e2.slice(-1)[0];t2!=null&&t2.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)}),this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class Rt{static wrap(e){return typeof e=="string"?new this(od(e)):e}constructor(e){this.fragment=Ed(e)}}S(Rt,"contentType","text/vnd.turbo-stream.html");function Ed(s){for(const e of s.querySelectorAll("turbo-stream")){const t=document.importNode(e,!0);for(const i of t.templateElement.content.querySelectorAll("script"))i.replaceWith(vi(i));e.replaceWith(t)}return s}const Td=100;var Lt,st;class Ad{constructor(){O(this,Lt,null),O(this,st,null)}get(e){if(_(this,st)&&_(this,st).url===e&&_(this,st).expire>Date.now())return _(this,st).request}setLater(e,t,i){this.clear(),re(this,Lt,setTimeout(()=>{t.perform(),this.set(e,t,i),re(this,Lt,null)},Td))}set(e,t,i){re(this,st,{url:e,request:t,expire:new Date(new Date().getTime()+i)})}clear(){_(this,Lt)&&clearTimeout(_(this,Lt)),re(this,st,null)}}Lt=new WeakMap,st=new WeakMap;const Ld=10*1e3,Kt=new Ad,jt={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"};class _i{constructor(e,t,i,n=!1){S(this,"state",jt.initialized);const r=Rd(t,i),o=Od(xd(t,i),r),a=Cd(t,i),l=kd(t,i);this.delegate=e,this.formElement=t,this.submitter=i,this.fetchRequest=new Bi(this,r,o,a,t,l),this.mustRedirect=n}static confirmMethod(e,t,i){return Promise.resolve(confirm(e))}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=we(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){const{initialized:e,requesting:t}=jt,i=ys("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof i=="string"&&!await _i.confirmMethod(i,this.formElement,this.submitter))&&this.state==e)return this.state=t,this.fetchRequest.perform()}stop(){const{stopping:e,stopped:t}=jt;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){const t=Md(ai("csrf-param"))||ai("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(Rt.contentType)}requestStarted(e){var t;this.state=jt.waiting,(t=this.submitter)==null||t.setAttribute("disabled",""),this.setSubmitsWith(),ws(this.formElement),ce("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){Kt.clear(),this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError){this.delegate.formSubmissionFailedWithResponse(this,t);return}if(Kt.clear(),this.requestMustRedirect(e)&&Pd(t)){const i=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,i)}else this.state=jt.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){var t;this.state=jt.stopped,(t=this.submitter)==null||t.removeAttribute("disabled"),this.resetSubmitterText(),Ss(this.formElement),ce("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){const e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||cd("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var e;return(e=this.submitter)==null?void 0:e.getAttribute("data-turbo-submits-with")}}function Cd(s,e){const t=new FormData(s),i=e?.getAttribute("name"),n=e?.getAttribute("value");return i&&t.append(i,n||""),t}function Md(s){if(s!=null){const t=(document.cookie?document.cookie.split("; "):[]).find(i=>i.startsWith(s));if(t){const i=t.split("=").slice(1).join("=");return i?decodeURIComponent(i):void 0}}}function Pd(s){return s.statusCode==200&&!s.redirected}function xd(s,e){const t=typeof s.action=="string"?s.action:null;return e!=null&&e.hasAttribute("formaction")?e.getAttribute("formaction")||"":s.getAttribute("action")||t||""}function Od(s,e){const t=we(s);return hr(e)&&(t.search=""),t}function Rd(s,e){const t=e?.getAttribute("formmethod")||s.getAttribute("method")||"";return cr(t.toLowerCase())||ze.get}function kd(s,e){return yd(e?.getAttribute("formenctype")||s.enctype)}class Qs{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return da(this.element)}get permanentElements(){return ya(this.element)}getPermanentElementById(e){return va(this.element,e)}getPermanentElementMapForSnapshot(e){const t={};for(const i of this.permanentElements){const{id:n}=i,r=e.getPermanentElementById(n);r&&(t[n]=[i,r])}return t}}function va(s,e){return s.querySelector(`#${e}[data-turbo-permanent]`)}function ya(s){return s.querySelectorAll("[id][data-turbo-permanent]")}class dr{constructor(e,t){S(this,"started",!1),S(this,"submitCaptured",()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)}),S(this,"submitBubbled",e2=>{if(!e2.defaultPrevented){const t2=e2.target instanceof HTMLFormElement?e2.target:void 0,i=e2.submitter||void 0;t2&&Fd(t2,i)&&Id(t2,i)&&this.delegate.willSubmitForm(t2,i)&&(e2.preventDefault(),e2.stopImmediatePropagation(),this.delegate.formSubmitted(t2,i))}}),this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}function Fd(s,e){return(e?.getAttribute("formmethod")||s.getAttribute("method"))!="dialog"}function Id(s,e){if(e!=null&&e.hasAttribute("formtarget")||s.hasAttribute("target")){const t=e?.getAttribute("formtarget")||s.target;for(const i of document.getElementsByName(t))if(i instanceof HTMLIFrameElement)return!1;return!0}else return!0}var wi,Si;class wa{constructor(e,t){O(this,wi,e2=>{}),O(this,Si,e2=>{}),this.delegate=e,this.element=t}scrollToAnchor(e){const t=this.snapshot.getElementForAnchor(e);t?(this.scrollToElement(t),this.focusElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(Pt(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){const{isPreview:t,shouldRender:i,willRender:n,newSnapshot:r}=e,o=n;if(i)try{this.renderPromise=new Promise(h=>re(this,wi,h)),this.renderer=e,await this.prepareToRenderSnapshot(e);const a=new Promise(h=>re(this,Si,h)),l={resume:_(this,Si),render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(r,l)||await a,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(r,t,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,_(this,wi).call(this,void 0),delete this.renderPromise}else o&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(e){this.element.setAttribute("data-turbo-visit-direction",e)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}}wi=new WeakMap,Si=new WeakMap;class Bd extends wa{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new Qs(this.element)}}class Sa{constructor(e,t){S(this,"clickBubbled",e2=>{this.respondsToEventTarget(e2.target)?this.clickEvent=e2:delete this.clickEvent}),S(this,"linkClicked",e2=>{this.clickEvent&&this.respondsToEventTarget(e2.target)&&e2.target instanceof Element&&this.delegate.shouldInterceptLinkClick(e2.target,e2.detail.url,e2.detail.originalEvent)&&(this.clickEvent.preventDefault(),e2.preventDefault(),this.delegate.linkClickIntercepted(e2.target,e2.detail.url,e2.detail.originalEvent)),delete this.clickEvent}),S(this,"willVisit",e2=>{delete this.clickEvent}),this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(e){const t=e instanceof Element?e:e instanceof Node?e.parentElement:null;return t&&t.closest("turbo-frame, html")==this.element}}class Ea{constructor(e,t){S(this,"started",!1),S(this,"clickCaptured",()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)}),S(this,"clickBubbled",e2=>{if(e2 instanceof MouseEvent&&this.clickEventIsSignificant(e2)){const t2=e2.composedPath&&e2.composedPath()[0]||e2.target,i=pd(t2);if(i&&md(i)){const n=ua(i);this.delegate.willFollowLinkToLocation(i,n,e2)&&(e2.preventDefault(),this.delegate.followedLinkToLocation(i,n))}}}),this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}}class Ta{constructor(e,t){this.delegate=e,this.linkInterceptor=new Ea(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,t){return!1}prefetchAndCacheRequestToLocation(e,t){}willFollowLinkToLocation(e,t,i){return this.delegate.willSubmitFormLinkToLocation(e,t,i)&&(e.hasAttribute("data-turbo-method")||e.hasAttribute("data-turbo-stream"))}followedLinkToLocation(e,t){const i=document.createElement("form"),n="hidden";for(const[u,d]of t.searchParams)i.append(Object.assign(document.createElement("input"),{type:n,name:u,value:d}));const r=Object.assign(t,{search:""});i.setAttribute("data-turbo","true"),i.setAttribute("action",r.href),i.setAttribute("hidden","");const o=e.getAttribute("data-turbo-method");o&&i.setAttribute("method",o);const a=e.getAttribute("data-turbo-frame");a&&i.setAttribute("data-turbo-frame",a);const l=xt(e);l&&i.setAttribute("data-turbo-action",l);const c=e.getAttribute("data-turbo-confirm");c&&i.setAttribute("data-turbo-confirm",c),e.hasAttribute("data-turbo-stream")&&i.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,i),document.body.appendChild(i),i.addEventListener("turbo:submit-end",()=>i.remove(),{once:!0}),requestAnimationFrame(()=>i.requestSubmit())}}class Aa{static async preservingPermanentElements(e,t,i){const n=new this(e,t);n.enter(),await i(),n.leave()}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(const e in this.permanentElementMap){const[t,i]=this.permanentElementMap[e];this.delegate.enteringBardo(t,i),this.replaceNewPermanentElementWithPlaceholder(i)}}leave(){for(const e in this.permanentElementMap){const[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){const t=_d(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){const t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){const t=this.getPlaceholderById(e.id);t?.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}function _d(s){const e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",s.id),e}var nt;class ur{constructor(e,t,i,n,r=!0){O(this,nt,null),this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=n,this.willRender=r,this.renderElement=i,this.promise=new Promise((o,a)=>this.resolvingFunctions={resolve:o,reject:a})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await Aa.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){const e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}enteringBardo(e){_(this,nt)||e.contains(this.currentSnapshot.activeElement)&&re(this,nt,this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(_(this,nt))&&_(this,nt)instanceof HTMLElement&&(_(this,nt).focus(),re(this,nt,null))}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}}nt=new WeakMap;class Un extends ur{static renderElement(e,t){var o;const i=document.createRange();i.selectNodeContents(e),i.deleteContents();const n=t,r=(o=n.ownerDocument)==null?void 0:o.createRange();r&&(r.selectNodeContents(n),e.appendChild(r.extractContents()))}constructor(e,t,i,n,r,o=!0){super(t,i,n,r,o),this.delegate=e}get shouldRender(){return!0}async render(){await Gt(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await Gt(),this.focusFirstAutofocusableElement(),await Gt(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const e=this.currentElement.firstElementChild,t=Dd(this.currentElement.getAttribute("data-autoscroll-block"),"end"),i=Vd(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:t,behavior:i}),!0}return!1}activateScriptElements(){for(const e of this.newScriptElements){const t=vi(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}function Dd(s,e){return s=="end"||s=="start"||s=="center"||s=="nearest"?s:e}function Vd(s,e){return s=="auto"||s=="smooth"?s:e}const it=class it2{constructor(){S(this,"hiding",!1),S(this,"value",0),S(this,"visible",!1),S(this,"trickle",()=>{this.setValue(this.value+Math.random()/100)}),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return la`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${it2.animationDuration}ms ease-out,
          opacity ${it2.animationDuration/2}ms ${it2.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,it2.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,it2.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){const e=document.createElement("style");return e.type="text/css",e.textContent=it2.defaultCSS,this.cspNonce&&(e.nonce=this.cspNonce),e}createProgressElement(){const e=document.createElement("div");return e.className="turbo-progress-bar",e}get cspNonce(){return ai("csp-nonce")}};S(it,"animationDuration",300);let Kn=it;class zd extends Qs{constructor(){super(...arguments),S(this,"detailsByOuterHTML",this.children.filter(t=>!qd(t)).map(t=>Ud(t)).reduce((t,i)=>{const{outerHTML:n}=i,r=n in t?t[n]:{type:Nd(i),tracked:jd(i),elements:[]};return{...t,[n]:{...r,elements:[...r.elements,i]}}},{}))}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(t=>this.detailsByOuterHTML[t].tracked).join("")}getScriptElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("script",t)}getStylesheetElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",t)}getElementsMatchingTypeNotInSnapshot(t,i){return Object.keys(this.detailsByOuterHTML).filter(n=>!(n in i.detailsByOuterHTML)).map(n=>this.detailsByOuterHTML[n]).filter(({type:n})=>n==t).map(({elements:[n]})=>n)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((t,i)=>{const{type:n,tracked:r,elements:o}=this.detailsByOuterHTML[i];return n==null&&!r?[...t,...o]:o.length>1?[...t,...o.slice(1)]:t},[])}getMetaValue(t){const i=this.findMetaElementByName(t);return i?i.getAttribute("content"):null}findMetaElementByName(t){return Object.keys(this.detailsByOuterHTML).reduce((i,n)=>{const{elements:[r]}=this.detailsByOuterHTML[n];return Wd(r,t)?r:i},void 0|void 0)}}function Nd(s){if(Hd(s))return"script";if($d(s))return"stylesheet"}function jd(s){return s.getAttribute("data-turbo-track")=="reload"}function Hd(s){return s.localName=="script"}function qd(s){return s.localName=="noscript"}function $d(s){const e=s.localName;return e=="style"||e=="link"&&s.getAttribute("rel")=="stylesheet"}function Wd(s,e){return s.localName=="meta"&&s.getAttribute("name")==e}function Ud(s){return s.hasAttribute("nonce")&&s.setAttribute("nonce",""),s}class je extends Qs{static fromHTMLString(e=""){return this.fromDocument(aa(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:t,head:i}){return new this(e,t,new zd(i))}constructor(e,t,i){super(t),this.documentElement=e,this.headSnapshot=i}clone(){const e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),i=e.querySelectorAll("select");for(const[n,r]of t.entries()){const o=i[n];for(const a of o.selectedOptions)a.selected=!1;for(const a of r.selectedOptions)o.options[a.index].selected=!0}for(const n of e.querySelectorAll('input[type="password"]'))n.value="";return new je(this.documentElement,e,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){const e=this.getSetting("root")??"/";return we(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}}var Ei,lt;class Kd{constructor(){O(this,Ei,!1),O(this,lt,Promise.resolve())}renderChange(e,t){return e&&this.viewTransitionsAvailable&&!_(this,Ei)?(re(this,Ei,!0),re(this,lt,_(this,lt).then(async()=>{await document.startViewTransition(t).finished}))):re(this,lt,_(this,lt).then(t)),_(this,lt)}get viewTransitionsAvailable(){return document.startViewTransition}}Ei=new WeakMap,lt=new WeakMap;const Xd={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},ts={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},tt={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},Zt={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},Gd={advance:"forward",restore:"back",replace:"none"};class Yd{constructor(e,t,i,n={}){S(this,"identifier",pt()),S(this,"timingMetrics",{}),S(this,"followedRedirect",!1),S(this,"historyChanged",!1),S(this,"scrolled",!1),S(this,"shouldCacheSnapshot",!0),S(this,"acceptsStreamResponse",!1),S(this,"snapshotCached",!1),S(this,"state",tt.initialized),S(this,"viewTransitioner",new Kd),this.delegate=e,this.location=t,this.restorationIdentifier=i||pt();const{action:r,historyChanged:o,referrer:a,snapshot:l,snapshotHTML:c,response:h,visitCachedSnapshot:u,willRender:d,updateHistory:f,shouldCacheSnapshot:m,acceptsStreamResponse:g,direction:y}={...Xd,...n};this.action=r,this.historyChanged=o,this.referrer=a,this.snapshot=l,this.snapshotHTML=c,this.response=h,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=u,this.willRender=d,this.updateHistory=f,this.scrolled=!d,this.shouldCacheSnapshot=m,this.acceptsStreamResponse=g,this.direction=y||Gd[r]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==tt.initialized&&(this.recordTimingMetric(ts.visitStart),this.state=tt.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==tt.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=tt.canceled)}complete(){this.state==tt.started&&(this.recordTimingMetric(ts.visitEnd),this.adapter.visitCompleted(this),this.state=tt.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==tt.started&&(this.state=tt.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){var e;if(!this.historyChanged&&this.updateHistory){const t=this.location.href===((e=this.referrer)==null?void 0:e.href)?"replace":this.action,i=ca(t);this.history.update(i,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Bi(this,ze.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(ts.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){const{statusCode:t}=e;oo(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(ts.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:e,responseHTML:t}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,oo(e)&&t!=null){const i=je.fromHTMLString(t);await this.renderPageSnapshot(i,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(je.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){const e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!Pt(this.location)||e.hasAnchor(Pt(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return je.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){const e=this.getCachedSnapshot();if(e){const t=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,t),this.adapter.visitRendered(this),t||this.complete())})}}followRedirect(){var e;this.redirectedToLocation&&!this.followedRedirect&&(e=this.response)!=null&&e.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(Rt.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){const i=await t.responseHTML,{redirected:n,statusCode:r}=t;i==null?this.recordResponse({statusCode:Zt.contentTypeMismatch,redirected:n}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:r,responseHTML:i,redirected:n}))}async requestFailedWithResponse(e,t){const i=await t.responseHTML,{redirected:n,statusCode:r}=t;i==null?this.recordResponse({statusCode:Zt.contentTypeMismatch,redirected:n}):this.recordResponse({statusCode:r,responseHTML:i,redirected:n})}requestErrored(e,t){this.recordResponse({statusCode:Zt.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){const e=Pt(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}getHistoryMethodForAction(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),this.frame=await Gt(),await e(),delete this.frame}async renderPageSnapshot(e,t){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,t,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function oo(s){return s>=200&&s<300}class Zd{constructor(e){S(this,"progressBar",new Kn),S(this,"showProgressBar",()=>{this.progressBar.show()}),this.session=e}visitProposedToLocation(e,t){at(e,this.navigator.rootLocation)?this.navigator.startVisit(e,t?.restorationIdentifier||pt(),t):window.location.href=e.toString()}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,t){switch(t){case Zt.networkFailure:case Zt.timeoutFailure:case Zt.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(e){var t;ce("turbo:reload",{detail:e}),window.location.href=((t=this.location)==null?void 0:t.toString())||window.location.href}get navigator(){return this.session.navigator}}class Jd{constructor(){S(this,"selector","[data-turbo-temporary]"),S(this,"deprecatedSelector","[data-turbo-cache=false]"),S(this,"started",!1),S(this,"removeTemporaryElements",e=>{for(const t of this.temporaryElements)t.remove()})}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}}var Cs,La,Jt,os,Qt,as;class Qd{constructor(e,t){O(this,Cs),O(this,Jt),O(this,Qt),this.session=e,this.element=t,this.linkInterceptor=new Sa(this,t),this.formSubmitObserver=new dr(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,i){return B(this,Jt,os).call(this,e)}linkClickIntercepted(e,t,i){const n=B(this,Qt,as).call(this,e);n&&n.delegate.linkClickIntercepted(e,t,i)}willSubmitForm(e,t){return e.closest("turbo-frame")==null&&B(this,Cs,La).call(this,e,t)&&B(this,Jt,os).call(this,e,t)}formSubmitted(e,t){const i=B(this,Qt,as).call(this,e,t);i&&i.delegate.formSubmitted(e,t)}}Cs=new WeakSet,La=function(e,t){const i=or(e,t),n=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),r=we(n?.content??"/");return B(this,Jt,os).call(this,e,t)&&at(i,r)},Jt=new WeakSet,os=function(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){const n=B(this,Qt,as).call(this,e,t);return n?n!=e.closest("turbo-frame"):!1}else return!1},Qt=new WeakSet,as=function(e,t){const i=t?.getAttribute("data-turbo-frame")||e.getAttribute("data-turbo-frame");if(i&&i!="_top"){const n=this.element.querySelector(`#${i}:not([disabled])`);if(n instanceof Ge)return n}};class eu{constructor(e){S(this,"location"),S(this,"restorationIdentifier",pt()),S(this,"restorationData",{}),S(this,"started",!1),S(this,"pageLoaded",!1),S(this,"currentIndex",0),S(this,"onPopState",e2=>{if(this.shouldHandlePopState()){const{turbo:t}=e2.state||{};if(t){this.location=new URL(window.location.href);const{restorationIdentifier:i,restorationIndex:n}=t;this.restorationIdentifier=i;const r=n>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,i,r),this.currentIndex=n}}}),S(this,"onPageLoad",async e2=>{await ad(),this.pageLoaded=!0}),this.delegate=e}start(){var e,t;this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=((t=(e=history.state)==null?void 0:e.turbo)==null?void 0:t.restorationIndex)||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,i=pt()){e===history.pushState&&++this.currentIndex;const n={turbo:{restorationIdentifier:i,restorationIndex:this.currentIndex}};e.call(history,n,"",t.href),this.location=t,this.restorationIdentifier=i}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){const{restorationIdentifier:t}=this,i=this.restorationData[t];this.restorationData[t]={...i,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}}var ei,Ti,Ai,Li,Ms,Ci,Ps,Ca,xs,Ma;class tu{constructor(e,t){O(this,Ps),O(this,xs),S(this,"started",!1),O(this,ei,null),O(this,Ti,()=>{this.eventTarget.addEventListener("mouseenter",_(this,Ai),{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",_(this,Li),{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",_(this,Ci),!0),this.started=!0}),O(this,Ai,e2=>{if(ai("turbo-prefetch")==="false")return;const t2=e2.target;if(t2.matches&&t2.matches("a[href]:not([target^=_]):not([download])")&&B(this,xs,Ma).call(this,t2)){const n=t2,r=ua(n);if(this.delegate.canPrefetchRequestToLocation(n,r)){re(this,ei,n);const o=new Bi(this,ze.get,r,new URLSearchParams,t2);Kt.setLater(r.toString(),o,_(this,Ps,Ca))}}}),O(this,Li,e2=>{e2.target===_(this,ei)&&_(this,Ms).call(this)}),O(this,Ms,()=>{Kt.clear(),re(this,ei,null)}),O(this,Ci,e2=>{if(e2.target.tagName!=="FORM"&&e2.detail.fetchOptions.method==="get"){const t2=Kt.get(e2.detail.url.toString());t2&&(e2.detail.fetchRequest=t2),Kt.clear()}}),this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",_(this,Ti),{once:!0}):_(this,Ti).call(this))}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",_(this,Ai),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",_(this,Li),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",_(this,Ci),!0),this.started=!1)}prepareRequest(e){const t=e.target;e.headers["X-Sec-Purpose"]="prefetch";const i=t.closest("turbo-frame"),n=t.getAttribute("data-turbo-frame")||i?.getAttribute("target")||i?.id;n&&n!=="_top"&&(e.headers["Turbo-Frame"]=n)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}}ei=new WeakMap,Ti=new WeakMap,Ai=new WeakMap,Li=new WeakMap,Ms=new WeakMap,Ci=new WeakMap,Ps=new WeakSet,Ca=function(){return Number(ai("turbo-prefetch-cache-time"))||Ld},xs=new WeakSet,Ma=function(e){return!(!e.getAttribute("href")||iu(e)||su(e)||nu(e)||ru(e)||au(e))};const iu=s=>s.origin!==document.location.origin||!["http:","https:"].includes(s.protocol)||s.hasAttribute("target"),su=s=>s.pathname+s.search===document.location.pathname+document.location.search||s.href.startsWith("#"),nu=s=>{if(s.getAttribute("data-turbo-prefetch")==="false"||s.getAttribute("data-turbo")==="false")return!0;const e=Yt(s,"[data-turbo-prefetch]");return!!(e&&e.getAttribute("data-turbo-prefetch")==="false")},ru=s=>{const e=s.getAttribute("data-turbo-method");return!!(e&&e.toLowerCase()!=="get"||ou(s)||s.hasAttribute("data-turbo-confirm")||s.hasAttribute("data-turbo-stream"))},ou=s=>s.hasAttribute("data-remote")||s.hasAttribute("data-behavior")||s.hasAttribute("data-confirm")||s.hasAttribute("data-method"),au=s=>ce("turbo:before-prefetch",{target:s,cancelable:!0}).defaultPrevented;var Os,Pa,Rs,xa;class lu{constructor(e){O(this,Os),O(this,Rs),this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&this.delegate.visitProposedToLocation(e,t)}startVisit(e,t,i={}){this.stop(),this.currentVisit=new Yd(this,we(e),t,{referrer:this.location,...i}),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new _i(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){const i=await t.responseHTML;if(i){const n=e.isSafe;n||this.view.clearSnapshotCache();const{statusCode:r,redirected:o}=t,l={action:B(this,Os,Pa).call(this,e,t),shouldCacheSnapshot:n,response:{statusCode:r,responseHTML:i,redirected:o}};this.proposeVisit(t.location,l)}}}async formSubmissionFailedWithResponse(e,t){const i=await t.responseHTML;if(i){const n=je.fromHTMLString(i);t.serverError?await this.view.renderError(n,this.currentVisit):await this.view.renderPage(n,!1,!0,this.currentVisit),n.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e)}locationWithActionIsSamePage(e,t){const i=Pt(e),n=Pt(this.view.lastRenderedLocation),r=t==="restore"&&typeof i>"u";return t!=="replace"&&Wn(e)===Wn(this.view.lastRenderedLocation)&&(r||i!=null&&i!==n)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}}Os=new WeakSet,Pa=function(e,t){const{submitter:i,formElement:n}=e;return xt(i,n)||B(this,Rs,xa).call(this,t)},Rs=new WeakSet,xa=function(e){var i;return e.redirected&&e.location.href===((i=this.location)==null?void 0:i.href)?"replace":"advance"};const wt={initial:0,loading:1,interactive:2,complete:3};class cu{constructor(e){S(this,"stage",wt.initial),S(this,"started",!1),S(this,"interpretReadyState",()=>{const{readyState:e2}=this;e2=="interactive"?this.pageIsInteractive():e2=="complete"&&this.pageIsComplete()}),S(this,"pageWillUnload",()=>{this.delegate.pageWillUnload()}),this.delegate=e}start(){this.started||(this.stage==wt.initial&&(this.stage=wt.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==wt.loading&&(this.stage=wt.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==wt.interactive&&(this.stage=wt.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class hu{constructor(e){S(this,"started",!1),S(this,"onScroll",()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})}),this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(e){this.delegate.scrollPositionChanged(e)}}class du{render({fragment:e}){Aa.preservingPermanentElements(this,uu(e),()=>{fu(e,()=>{mu(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}}function uu(s){const e=ya(document.documentElement),t={};for(const i of e){const{id:n}=i;for(const r of s.querySelectorAll("turbo-stream")){const o=va(r.templateElement.content,n);o&&(t[n]=[i,o])}}return t}async function fu(s,e){const t=`turbo-stream-autofocus-${pt()}`,i=s.querySelectorAll("turbo-stream"),n=pu(i);let r=null;if(n&&(n.id?r=n.id:r=t,n.id=r),e(),await Gt(),(document.activeElement==null||document.activeElement==document.body)&&r){const a=document.getElementById(r);lr(a)&&a.focus(),a&&a.id==t&&a.removeAttribute("id")}}async function mu(s){const[e,t]=await fd(s,()=>document.activeElement),i=e&&e.id;if(i){const n=document.getElementById(i);lr(n)&&n!=t&&n.focus()}}function pu(s){for(const e of s){const t=da(e.templateElement.content);if(t)return t}return null}var ct;class gu{constructor(e){S(this,"sources",new Set),O(this,ct,!1),S(this,"inspectFetchResponse",e2=>{const t=bu(e2);t&&vu(t)&&(e2.preventDefault(),this.receiveMessageResponse(t))}),S(this,"receiveMessageEvent",e2=>{_(this,ct)&&typeof e2.data=="string"&&this.receiveMessageHTML(e2.data)}),this.delegate=e}start(){_(this,ct)||(re(this,ct,!0),addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){_(this,ct)&&(re(this,ct,!1),removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}async receiveMessageResponse(e){const t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(Rt.wrap(e))}}ct=new WeakMap;function bu(s){var t;const e=(t=s.detail)==null?void 0:t.fetchResponse;if(e instanceof ar)return e}function vu(s){return(s.contentType??"").startsWith(Rt.contentType)}class ao extends ur{static renderElement(e,t){const{documentElement:i,body:n}=document;i.replaceChild(t,n)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(const e of this.scriptElements){const t=e.parentNode;if(t){const i=vi(e);t.replaceChild(i,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}var yu=function(){let s=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:d,afterNodeAdded:d,beforeNodeMorphed:d,afterNodeMorphed:d,beforeNodeRemoved:d,afterNodeRemoved:d,beforeAttributeUpdated:d},head:{style:"merge",shouldPreserve:function(v){return v.getAttribute("im-preserve")==="true"},shouldReAppend:function(v){return v.getAttribute("im-re-append")==="true"},shouldRemove:d,afterHeadMorphed:d}};function t(v,b,p={}){v instanceof Document&&(v=v.documentElement),typeof b=="string"&&(b=D(b));let w=G(b),T=m(v,w,p);return i(v,w,T)}function i(v,b,p){if(p.head.block){let w=v.querySelector("head"),T=b.querySelector("head");if(w&&T){let C=u(T,w,p);Promise.all(C).then(function(){i(v,b,Object.assign(p,{head:{block:!1,ignore:!0}}))});return}}if(p.morphStyle==="innerHTML")return o(b,v,p),v.children;if(p.morphStyle==="outerHTML"||p.morphStyle==null){let w=z(b,v,p),T=w?.previousSibling,C=w?.nextSibling,x=r(v,w,p);return w?he(T,x,C):[]}else throw"Do not understand how to morph style "+p.morphStyle}function n(v,b){return b.ignoreActiveValue&&v===document.activeElement&&v!==document.body}function r(v,b,p){if(!(p.ignoreActive&&v===document.activeElement))return b==null?p.callbacks.beforeNodeRemoved(v)===!1?v:(v.remove(),p.callbacks.afterNodeRemoved(v),null):y(v,b)?(p.callbacks.beforeNodeMorphed(v,b)===!1||(v instanceof HTMLHeadElement&&p.head.ignore||(v instanceof HTMLHeadElement&&p.head.style!=="morph"?u(b,v,p):(l(b,v,p),n(v,p)||o(b,v,p))),p.callbacks.afterNodeMorphed(v,b)),v):p.callbacks.beforeNodeRemoved(v)===!1||p.callbacks.beforeNodeAdded(b)===!1?v:(v.parentElement.replaceChild(b,v),p.callbacks.afterNodeAdded(b),p.callbacks.afterNodeRemoved(v),b)}function o(v,b,p){let w=v.firstChild,T=b.firstChild,C;for(;w;){if(C=w,w=C.nextSibling,T==null){if(p.callbacks.beforeNodeAdded(C)===!1)return;b.appendChild(C),p.callbacks.afterNodeAdded(C),me(p,C);continue}if(g(C,T,p)){r(T,C,p),T=T.nextSibling,me(p,C);continue}let x=L(v,b,C,T,p);if(x){T=E(T,x,p),r(x,C,p),me(p,C);continue}let F=P(v,b,C,T,p);if(F){T=E(T,F,p),r(F,C,p),me(p,C);continue}if(p.callbacks.beforeNodeAdded(C)===!1)return;b.insertBefore(C,T),p.callbacks.afterNodeAdded(C),me(p,C)}for(;T!==null;){let x=T;T=T.nextSibling,U(x,p)}}function a(v,b,p,w){return v==="value"&&w.ignoreActiveValue&&b===document.activeElement?!0:w.callbacks.beforeAttributeUpdated(v,b,p)===!1}function l(v,b,p){let w=v.nodeType;if(w===1){const T=v.attributes,C=b.attributes;for(const x of T)a(x.name,b,"update",p)||b.getAttribute(x.name)!==x.value&&b.setAttribute(x.name,x.value);for(let x=C.length-1;0<=x;x--){const F=C[x];a(F.name,b,"remove",p)||v.hasAttribute(F.name)||b.removeAttribute(F.name)}}(w===8||w===3)&&b.nodeValue!==v.nodeValue&&(b.nodeValue=v.nodeValue),n(b,p)||h(v,b,p)}function c(v,b,p,w){if(v[p]!==b[p]){let T=a(p,b,"update",w);T||(b[p]=v[p]),v[p]?T||b.setAttribute(p,v[p]):a(p,b,"remove",w)||b.removeAttribute(p)}}function h(v,b,p){if(v instanceof HTMLInputElement&&b instanceof HTMLInputElement&&v.type!=="file"){let w=v.value,T=b.value;c(v,b,"checked",p),c(v,b,"disabled",p),v.hasAttribute("value")?w!==T&&(a("value",b,"update",p)||(b.setAttribute("value",w),b.value=w)):a("value",b,"remove",p)||(b.value="",b.removeAttribute("value"))}else if(v instanceof HTMLOptionElement)c(v,b,"selected",p);else if(v instanceof HTMLTextAreaElement&&b instanceof HTMLTextAreaElement){let w=v.value,T=b.value;if(a("value",b,"update",p))return;w!==T&&(b.value=w),b.firstChild&&b.firstChild.nodeValue!==w&&(b.firstChild.nodeValue=w)}}function u(v,b,p){let w=[],T=[],C=[],x=[],F=p.head.style,Q=new Map;for(const N of v.children)Q.set(N.outerHTML,N);for(const N of b.children){let ne=Q.has(N.outerHTML),ue=p.head.shouldReAppend(N),Ce=p.head.shouldPreserve(N);ne||Ce?ue?T.push(N):(Q.delete(N.outerHTML),C.push(N)):F==="append"?ue&&(T.push(N),x.push(N)):p.head.shouldRemove(N)!==!1&&T.push(N)}x.push(...Q.values());let Y=[];for(const N of x){let ne=document.createRange().createContextualFragment(N.outerHTML).firstChild;if(p.callbacks.beforeNodeAdded(ne)!==!1){if(ne.href||ne.src){let ue=null,Ce=new Promise(function(Ft){ue=Ft});ne.addEventListener("load",function(){ue()}),Y.push(Ce)}b.appendChild(ne),p.callbacks.afterNodeAdded(ne),w.push(ne)}}for(const N of T)p.callbacks.beforeNodeRemoved(N)!==!1&&(b.removeChild(N),p.callbacks.afterNodeRemoved(N));return p.head.afterHeadMorphed(b,{added:w,kept:C,removed:T}),Y}function d(){}function f(v){let b={};return Object.assign(b,e),Object.assign(b,v),b.callbacks={},Object.assign(b.callbacks,e.callbacks),Object.assign(b.callbacks,v.callbacks),b.head={},Object.assign(b.head,e.head),Object.assign(b.head,v.head),b}function m(v,b,p){return p=f(p),{target:v,newContent:b,config:p,morphStyle:p.morphStyle,ignoreActive:p.ignoreActive,ignoreActiveValue:p.ignoreActiveValue,idMap:kt(v,b),deadIds:new Set,callbacks:p.callbacks,head:p.head}}function g(v,b,p){return v==null||b==null?!1:v.nodeType===b.nodeType&&v.tagName===b.tagName?v.id!==""&&v.id===b.id?!0:be(p,v,b)>0:!1}function y(v,b){return v==null||b==null?!1:v.nodeType===b.nodeType&&v.tagName===b.tagName}function E(v,b,p){for(;v!==b;){let w=v;v=v.nextSibling,U(w,p)}return me(p,b),b.nextSibling}function L(v,b,p,w,T){let C=be(T,p,b),x=null;if(C>0){let F=w,Q=0;for(;F!=null;){if(g(p,F,T))return F;if(Q+=be(T,F,v),Q>C)return null;F=F.nextSibling}}return x}function P(v,b,p,w,T){let C=w,x=p.nextSibling,F=0;for(;C!=null;){if(be(T,C,v)>0)return null;if(y(p,C))return C;if(y(x,C)&&(F++,x=x.nextSibling,F>=2))return null;C=C.nextSibling}return C}function D(v){let b=new DOMParser,p=v.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(p.match(/<\/html>/)||p.match(/<\/head>/)||p.match(/<\/body>/)){let w=b.parseFromString(v,"text/html");if(p.match(/<\/html>/))return w.generatedByIdiomorph=!0,w;{let T=w.firstChild;return T?(T.generatedByIdiomorph=!0,T):null}}else{let T=b.parseFromString("<body><template>"+v+"</template></body>","text/html").body.querySelector("template").content;return T.generatedByIdiomorph=!0,T}}function G(v){if(v==null)return document.createElement("div");if(v.generatedByIdiomorph)return v;if(v instanceof Node){const b=document.createElement("div");return b.append(v),b}else{const b=document.createElement("div");for(const p of[...v])b.append(p);return b}}function he(v,b,p){let w=[],T=[];for(;v!=null;)w.push(v),v=v.previousSibling;for(;w.length>0;){let C=w.pop();T.push(C),b.parentElement.insertBefore(C,b)}for(T.push(b);p!=null;)w.push(p),T.push(p),p=p.nextSibling;for(;w.length>0;)b.parentElement.insertBefore(w.pop(),b.nextSibling);return T}function z(v,b,p){let w;w=v.firstChild;let T=w,C=0;for(;w;){let x=oe(w,b,p);x>C&&(T=w,C=x),w=w.nextSibling}return T}function oe(v,b,p){return y(v,b)?.5+be(p,v,b):0}function U(v,b){me(b,v),b.callbacks.beforeNodeRemoved(v)!==!1&&(v.remove(),b.callbacks.afterNodeRemoved(v))}function Se(v,b){return!v.deadIds.has(b)}function K(v,b,p){return(v.idMap.get(p)||s).has(b)}function me(v,b){let p=v.idMap.get(b)||s;for(const w of p)v.deadIds.add(w)}function be(v,b,p){let w=v.idMap.get(b)||s,T=0;for(const C of w)Se(v,C)&&K(v,C,p)&&++T;return T}function Ye(v,b){let p=v.parentElement,w=v.querySelectorAll("[id]");for(const T of w){let C=T;for(;C!==p&&C!=null;){let x=b.get(C);x==null&&(x=new Set,b.set(C,x)),x.add(T.id),C=C.parentElement}}}function kt(v,b){let p=new Map;return Ye(v,p),Ye(b,p),p}return{morph:t,defaults:e}}(),ks,Oa;class Es extends ur{constructor(){super(...arguments),O(this,ks)}static renderElement(t,i){document.body&&i instanceof HTMLBodyElement?document.body.replaceWith(i):document.documentElement.appendChild(i)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){B(this,ks,Oa).call(this),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const t=this.mergeProvisionalElements(),i=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await t,await i,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const t=[];for(const i of this.newHeadStylesheetElements)t.push(hd(i)),document.head.appendChild(i);await Promise.all(t)}copyNewHeadScriptElements(){for(const t of this.newHeadScriptElements)document.head.appendChild(vi(t))}removeUnusedDynamicStylesheetElements(){for(const t of this.unusedDynamicStylesheetElements)document.head.removeChild(t)}async mergeProvisionalElements(){const t=[...this.newHeadProvisionalElements];for(const i of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(i,t)||document.head.removeChild(i);for(const i of t)document.head.appendChild(i)}isCurrentElementInElementList(t,i){for(const[n,r]of i.entries()){if(t.tagName=="TITLE"){if(r.tagName!="TITLE")continue;if(t.innerHTML==r.innerHTML)return i.splice(n,1),!0}if(r.isEqualNode(t))return i.splice(n,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(const t of this.currentHeadProvisionalElements)document.head.removeChild(t)}copyNewHeadProvisionalElements(){for(const t of this.newHeadProvisionalElements)document.head.appendChild(t)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const t of this.newBodyScriptElements){const i=vi(t);t.replaceWith(i)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(t=>t.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}ks=new WeakSet,Oa=function(){const{documentElement:t}=this.currentSnapshot,{lang:i}=this.newSnapshot;i?t.setAttribute("lang",i):t.removeAttribute("lang")};var Fs,Ra,Mi,Xn,Is,Pi,Bs,_s,Ds,Vs,ka,zs,Fa,Ns,ti,ls,js,Ia;class wu extends Es{constructor(){super(...arguments),O(this,Fs),O(this,Mi),O(this,Vs),O(this,zs),O(this,ti),O(this,js),O(this,Is,t=>!(t.id&&t.hasAttribute("data-turbo-permanent")&&document.getElementById(t.id))),O(this,Pi,(t,i)=>{if(t instanceof HTMLElement)return!t.hasAttribute("data-turbo-permanent")&&(this.isMorphingTurboFrame||!B(this,ti,ls).call(this,t))?!ce("turbo:before-morph-element",{cancelable:!0,target:t,detail:{newElement:i}}).defaultPrevented:!1}),O(this,Bs,(t,i,n)=>!ce("turbo:before-morph-attribute",{cancelable:!0,target:i,detail:{attributeName:t,mutationType:n}}).defaultPrevented),O(this,_s,(t,i)=>{i instanceof HTMLElement&&ce("turbo:morph-element",{target:t,detail:{newElement:i}})}),O(this,Ds,t=>_(this,Pi).call(this,t)),O(this,Ns,(t,i)=>{ce("turbo:before-frame-morph",{target:t,detail:{currentElement:t,newElement:i}}),B(this,Mi,Xn).call(this,t,i.children,"innerHTML")})}async render(){this.willRender&&await B(this,Fs,Ra).call(this)}get renderMethod(){return"morph"}}Fs=new WeakSet,Ra=async function(){B(this,Mi,Xn).call(this,this.currentElement,this.newElement),B(this,Vs,ka).call(this),ce("turbo:morph",{detail:{currentElement:this.currentElement,newElement:this.newElement}})},Mi=new WeakSet,Xn=function(t,i,n="outerHTML"){this.isMorphingTurboFrame=B(this,ti,ls).call(this,t),yu.morph(t,i,{morphStyle:n,callbacks:{beforeNodeAdded:_(this,Is),beforeNodeMorphed:_(this,Pi),beforeAttributeUpdated:_(this,Bs),beforeNodeRemoved:_(this,Ds),afterNodeMorphed:_(this,_s)}})},Is=new WeakMap,Pi=new WeakMap,Bs=new WeakMap,_s=new WeakMap,Ds=new WeakMap,Vs=new WeakSet,ka=function(){B(this,js,Ia).call(this).forEach(t=>{B(this,ti,ls).call(this,t)&&(B(this,zs,Fa).call(this,t),t.reload())})},zs=new WeakSet,Fa=function(t){t.addEventListener("turbo:before-frame-render",i=>{i.detail.render=_(this,Ns)},{once:!0})},Ns=new WeakMap,ti=new WeakSet,ls=function(t){return t.src&&t.refresh==="morph"},js=new WeakSet,Ia=function(){return Array.from(document.querySelectorAll("turbo-frame[src]")).filter(t=>!t.closest("[data-turbo-permanent]"))};class Su{constructor(e){S(this,"keys",[]),S(this,"snapshots",{}),this.size=e}has(e){return es(e)in this.snapshots}get(e){if(this.has(e)){const t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[es(e)]}write(e,t){this.snapshots[es(e)]=t}touch(e){const t=es(e),i=this.keys.indexOf(t);i>-1&&this.keys.splice(i,1),this.keys.unshift(t),this.trim()}trim(){for(const e of this.keys.splice(this.size))delete this.snapshots[e]}}class Eu extends wa{constructor(){super(...arguments),S(this,"snapshotCache",new Su(10)),S(this,"lastRenderedLocation",new URL(location.href)),S(this,"forceReloaded",!1)}shouldTransitionTo(t){return this.snapshot.prefersViewTransitions&&t.prefersViewTransitions}renderPage(t,i=!1,n=!0,r){const a=this.isPageRefresh(r)&&this.snapshot.shouldMorphPage?wu:Es,l=new a(this.snapshot,t,Es.renderElement,i,n);return l.shouldRender?r?.changeHistory():this.forceReloaded=!0,this.render(l)}renderError(t,i){i?.changeHistory();const n=new ao(this.snapshot,t,ao.renderElement,!1);return this.render(n)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(t=this.snapshot){if(t.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:i}=this;await oa();const n=t.clone();return this.snapshotCache.put(i,n),n}}getCachedSnapshotForLocation(t){return this.snapshotCache.get(t)}isPageRefresh(t){return!t||this.lastRenderedLocation.pathname===t.location.pathname&&t.action==="replace"}shouldPreserveScrollPosition(t){return this.isPageRefresh(t)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return je.fromElement(this.element)}}var xi;class Tu{constructor(e,t){S(this,"selector","a[data-turbo-preload]"),O(this,xi,()=>{this.preloadOnLoadLinksForView(document.body)}),this.delegate=e,this.snapshotCache=t}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",_(this,xi)):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",_(this,xi))}preloadOnLoadLinksForView(e){for(const t of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(t)&&this.preloadURL(t)}async preloadURL(e){const t=new URL(e.href);this.snapshotCache.has(t)||await new Bi(this,ze.get,t,new URLSearchParams,e).perform()}prepareRequest(e){e.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(e,t){try{const i=await t.responseHTML,n=je.fromHTMLString(i);this.snapshotCache.put(e.url,n)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}}xi=new WeakMap;var ii,cs;class Au{constructor(e){O(this,ii),this.session=e}clear(){this.session.clearCache()}resetCacheControl(){B(this,ii,cs).call(this,"")}exemptPageFromCache(){B(this,ii,cs).call(this,"no-cache")}exemptPageFromPreview(){B(this,ii,cs).call(this,"no-preview")}}ii=new WeakSet,cs=function(e){ud("turbo-cache-control",e)};var Oi;class Lu{constructor(e){S(this,"navigator",new lu(this)),S(this,"history",new eu(this)),S(this,"view",new Eu(this,document.documentElement)),S(this,"adapter",new Zd(this)),S(this,"pageObserver",new cu(this)),S(this,"cacheObserver",new Jd),S(this,"linkPrefetchObserver",new tu(this,document)),S(this,"linkClickObserver",new Ea(this,window)),S(this,"formSubmitObserver",new dr(this,document)),S(this,"scrollObserver",new hu(this)),S(this,"streamObserver",new gu(this)),S(this,"formLinkClickObserver",new Ta(this,document.documentElement)),S(this,"frameRedirector",new Qd(this,document.documentElement)),S(this,"streamMessageRenderer",new du),S(this,"cache",new Au(this)),S(this,"drive",!0),S(this,"enabled",!0),S(this,"progressBarDelay",500),S(this,"started",!1),S(this,"formMode","on"),O(this,Oi,150),this.recentRequests=e,this.preloader=new Tu(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){const i=t.frame?document.getElementById(t.frame):null;if(i instanceof Ge){const n=t.action||xt(i);i.delegate.proposeVisitIfNavigatedWithAction(i,n),i.src=e.toString()}else this.navigator.proposeVisit(we(e),t)}refresh(e,t){t&&this.recentRequests.has(t)||this.visit(e,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(Rt.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){this.progressBarDelay=e}setFormMode(e){this.formMode=e}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return _(this,Oi)}set pageRefreshDebouncePeriod(e){this.refresh=gd(this.debouncedRefresh.bind(this),e),re(this,Oi,e)}shouldPreloadLink(e){const t=e.hasAttribute("data-turbo-method"),i=e.hasAttribute("data-turbo-stream"),n=e.getAttribute("data-turbo-frame"),r=n=="_top"?null:document.getElementById(n)||Yt(e,"turbo-frame:not([disabled])");if(t||i||r instanceof Ge)return!1;{const o=new URL(e.href);return this.elementIsNavigatable(e)&&at(o,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,t,i){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0,direction:i}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&at(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,t){return this.elementIsNavigatable(e)&&at(t,this.snapshot.rootLocation)}willFollowLinkToLocation(e,t,i){return this.elementIsNavigatable(e)&&at(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,i)}followedLinkToLocation(e,t){const i=this.getActionForLink(e),n=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:i,acceptsStreamResponse:n})}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){lo(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||(ws(document.documentElement),this.view.markVisitDirection(e.direction)),lo(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),Ss(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){const i=or(e,t);return this.submissionIsNavigatable(e,t)&&at(we(i),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){var e;(e=this.navigator.currentVisit)!=null&&e.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){const i=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:n,detail:{render:r}}=i;return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!n}viewRenderedSnapshot(e,t,i){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(i)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,i){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,i).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,i){return ce("turbo:click",{target:e,detail:{url:t.href,originalEvent:i},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return ce("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return ce("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return ce("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return ce("turbo:before-render",{detail:{newBody:e,...t},cancelable:!0})}notifyApplicationAfterRender(e){return ce("turbo:render",{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return ce("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return ce("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return ce("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(this.formMode=="off")return!1;{const i=t?this.elementIsNavigatable(t):!0;return this.formMode=="optin"?i&&e.closest('[data-turbo="true"]')!=null:i&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){const t=Yt(e,"[data-turbo]"),i=Yt(e,"turbo-frame");return this.drive||i?t?t.getAttribute("data-turbo")!="false":!0:t?t.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return xt(e)||"advance"}get snapshot(){return this.view.snapshot}}Oi=new WeakMap;function lo(s){Object.defineProperties(s,Cu)}const Cu={absoluteURL:{get(){return this.toString()}}},le=new Lu(fa),{cache:Mu,navigator:Tt}=le;function Ba(){le.start()}function Pu(s){le.registerAdapter(s)}function xu(s,e){le.visit(s,e)}function _a(s){le.connectStreamSource(s)}function Da(s){le.disconnectStreamSource(s)}function Ou(s){le.renderStreamMessage(s)}function Ru(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),le.clearCache()}function ku(s){le.setProgressBarDelay(s)}function Fu(s){_i.confirmMethod=s}function Iu(s){le.setFormMode(s)}var Bu=Object.freeze({__proto__:null,navigator:Tt,session:le,cache:Mu,PageRenderer:Es,PageSnapshot:je,FrameRenderer:Un,fetch:ma,start:Ba,registerAdapter:Pu,visit:xu,connectStreamSource:_a,disconnectStreamSource:Da,renderStreamMessage:Ou,clearCache:Ru,setProgressBarDelay:ku,setConfirmMethod:Fu,setFormMode:Iu});class _u extends Error{}var si,Ue,ht,Ri,ni,dt,Ht,Hs,Va,qs,za,$s,Na,Ws,ja,Us,Ha,Ks,qa,Xs,$a,ki,Gn,ut,qt,Gs,Wa,ri,hs,Ys,Ua,Zs,Ka,Js,Xa;class Du{constructor(e){O(this,dt),O(this,Hs),O(this,qs),O(this,$s),O(this,Ws),O(this,Us),O(this,Ks),O(this,Xs),O(this,ki),O(this,ut),O(this,Gs),O(this,ri),O(this,Ys),O(this,Zs),O(this,Js),S(this,"fetchResponseLoaded",e2=>Promise.resolve()),O(this,si,null),O(this,Ue,()=>{}),O(this,ht,!1),O(this,Ri,!1),O(this,ni,new Set),S(this,"action",null),S(this,"visitCachedSnapshot",({element:e2})=>{const t=e2.querySelector("#"+this.element.id);t&&this.previousFrameElement&&t.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement}),this.element=e,this.view=new Bd(this,this.element),this.appearanceObserver=new Sd(this,this.element),this.formLinkClickObserver=new Ta(this,this.element),this.linkInterceptor=new Sa(this,this.element),this.restorationIdentifier=pt(),this.formSubmitObserver=new dr(this,this.element)}connect(){_(this,ht)||(re(this,ht,!0),this.loadingStyle==Ut.lazy?this.appearanceObserver.start():B(this,dt,Ht).call(this),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){_(this,ht)&&(re(this,ht,!1),this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==Ut.eager&&B(this,dt,Ht).call(this)}sourceURLChanged(){B(this,Ys,Ua).call(this,"src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==Ut.eager||_(this,Ri))&&B(this,dt,Ht).call(this))}sourceURLReloaded(){const{src:e}=this.element;return this.element.removeAttribute("complete"),this.element.src=null,this.element.src=e,this.element.loaded}loadingStyleChanged(){this.loadingStyle==Ut.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),B(this,dt,Ht).call(this))}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{const t=await e.responseHTML;if(t){const i=aa(t);je.fromDocument(i).isVisitable?await B(this,Hs,Va).call(this,e,i):await B(this,Ws,ja).call(this,e)}}finally{this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,xt(e)),B(this,dt,Ht).call(this)}willSubmitFormLinkToLocation(e){return B(this,ri,hs).call(this,e)}submittedFormLinkToLocation(e,t,i){const n=B(this,ut,qt).call(this,e);n&&i.setAttribute("data-turbo-frame",n.id)}shouldInterceptLinkClick(e,t,i){return B(this,ri,hs).call(this,e)}linkClickIntercepted(e,t){B(this,$s,Na).call(this,e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&B(this,ri,hs).call(this,e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new _i(this,e,t);const{fetchRequest:i}=this.formSubmission;this.prepareRequest(i),this.formSubmission.start()}prepareRequest(e){var t;e.headers["Turbo-Frame"]=this.id,(t=this.currentNavigationElement)!=null&&t.hasAttribute("data-turbo-stream")&&e.acceptResponseType(Rt.contentType)}requestStarted(e){ws(this.element)}requestPreventedHandlingResponse(e,t){_(this,Ue).call(this)}async requestSucceededWithResponse(e,t){await this.loadResponse(t),_(this,Ue).call(this)}async requestFailedWithResponse(e,t){await this.loadResponse(t),_(this,Ue).call(this)}requestErrored(e,t){console.error(t),_(this,Ue).call(this)}requestFinished(e){Ss(this.element)}formSubmissionStarted({formElement:e}){ws(e,B(this,ut,qt).call(this,e))}formSubmissionSucceededWithResponse(e,t){const i=B(this,ut,qt).call(this,e.formElement,e.submitter);i.delegate.proposeVisitIfNavigatedWithAction(i,xt(e.submitter,e.formElement,i)),i.delegate.loadResponse(t),e.isSafe||le.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),le.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){Ss(e,B(this,ut,qt).call(this,e))}allowsImmediateRender({element:e},t){const i=ce("turbo:before-frame-render",{target:this.element,detail:{newFrame:e,...t},cancelable:!0}),{defaultPrevented:n,detail:{render:r}}=i;return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!n}viewRenderedSnapshot(e,t,i){}preloadOnLoadLinksForView(e){le.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}proposeVisitIfNavigatedWithAction(e,t=null){if(this.action=t,this.action){const i=je.fromElement(e).clone(),{visitCachedSnapshot:n}=e.delegate;e.delegate.fetchResponseLoaded=async r=>{if(e.src){const{statusCode:o,redirected:a}=r,l=await r.responseHTML,h={response:{statusCode:o,redirected:a,responseHTML:l},visitCachedSnapshot:n,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:i};this.action&&(h.action=this.action),le.visit(e.src,h)}}}}changeHistory(){if(this.action){const e=ca(this.action);le.history.update(e,we(this.element.src||""),this.restorationIdentifier)}}async extractForeignFrameElement(e){let t;const i=CSS.escape(this.id);try{if(t=ho(e.querySelector(`turbo-frame#${i}`),this.sourceURL),t)return t;if(t=ho(e.querySelector(`turbo-frame[src][recurse~=${i}]`),this.sourceURL),t)return await t.loaded,await this.extractForeignFrameElement(t)}catch(n){return console.error(n),new Ge}return null}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){B(this,Zs,Ka).call(this,"src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||_(this,Ue).call(this)!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&_(this,ht)}get rootLocation(){const e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),t=e?.content??"/";return we(t)}}si=new WeakMap,Ue=new WeakMap,ht=new WeakMap,Ri=new WeakMap,ni=new WeakMap,dt=new WeakSet,Ht=async function(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=B(this,qs,za).call(this,we(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,re(this,Ri,!0))},Hs=new WeakSet,Va=async function(e,t){const i=await this.extractForeignFrameElement(t.body);if(i){const n=new Qs(i),r=new Un(this,this.view.snapshot,n,Un.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(r),this.complete=!0,le.frameRendered(e,this.element),le.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else B(this,Us,Ha).call(this,e)&&B(this,Ks,qa).call(this,e)},qs=new WeakSet,za=async function(e){var i;const t=new Bi(this,ze.get,e,new URLSearchParams,this.element);return(i=_(this,si))==null||i.cancel(),re(this,si,t),new Promise(n=>{re(this,Ue,()=>{re(this,Ue,()=>{}),re(this,si,null),n()}),t.perform()})},$s=new WeakSet,Na=function(e,t,i){const n=B(this,ut,qt).call(this,e,i);n.delegate.proposeVisitIfNavigatedWithAction(n,xt(i,e,n)),B(this,Js,Xa).call(this,e,()=>{n.src=t})},Ws=new WeakSet,ja=async function(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await B(this,ki,Gn).call(this,e.response)},Us=new WeakSet,Ha=function(e){this.element.setAttribute("complete","");const t=e.response,i=async(r,o)=>{r instanceof Response?B(this,ki,Gn).call(this,r):le.visit(r,o)};return!ce("turbo:frame-missing",{target:this.element,detail:{response:t,visit:i},cancelable:!0}).defaultPrevented},Ks=new WeakSet,qa=function(e){this.view.missing(),B(this,Xs,$a).call(this,e)},Xs=new WeakSet,$a=function(e){const t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new _u(t)},ki=new WeakSet,Gn=async function(e){const t=new ar(e),i=await t.responseHTML,{location:n,redirected:r,statusCode:o}=t;return le.visit(n,{response:{redirected:r,statusCode:o,responseHTML:i}})},ut=new WeakSet,qt=function(e,t){const i=ys("data-turbo-frame",t,e)||this.element.getAttribute("target");return co(i)??this.element},Gs=new WeakSet,Wa=function(e,t){const i=or(e,t);return at(we(i),this.rootLocation)},ri=new WeakSet,hs=function(e,t){const i=ys("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!B(this,Gs,Wa).call(this,e,t)||!this.enabled||i=="_top")return!1;if(i){const n=co(i);if(n)return!n.disabled}return!(!le.elementIsNavigatable(e)||t&&!le.elementIsNavigatable(t))},Ys=new WeakSet,Ua=function(e){return _(this,ni).has(e)},Zs=new WeakSet,Ka=function(e,t){_(this,ni).add(e),t(),_(this,ni).delete(e)},Js=new WeakSet,Xa=function(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement};function co(s){if(s!=null){const e=document.getElementById(s);if(e instanceof Ge)return e}}function ho(s,e){if(s){const t=s.getAttribute("src");if(t!=null&&e!=null&&ed(t,e))throw new Error(`Matching <turbo-frame id="${s.id}"> element has a source URL which references itself`);if(s.ownerDocument!==document&&(s=document.importNode(s,!0)),s instanceof Ge)return s.connectedCallback(),s.disconnectedCallback(),s}}const Ga={after(){this.targetElements.forEach(s=>{var e;return(e=s.parentElement)==null?void 0:e.insertBefore(this.templateContent,s.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.append(this.templateContent))},before(){this.targetElements.forEach(s=>{var e;return(e=s.parentElement)==null?void 0:e.insertBefore(this.templateContent,s)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.prepend(this.templateContent))},remove(){this.targetElements.forEach(s=>s.remove())},replace(){this.targetElements.forEach(s=>s.replaceWith(this.templateContent))},update(){this.targetElements.forEach(s=>{s.innerHTML="",s.append(this.templateContent)})},refresh(){le.refresh(this.baseURI,this.requestId)}};var Ct,fi;const fr=class fr2 extends HTMLElement{constructor(){super(...arguments),O(this,Ct)}static async renderElement(t){await t.performAction()}async connectedCallback(){try{await this.render()}catch(t){console.error(t)}finally{this.disconnect()}}async render(){return this.renderPromise??(this.renderPromise=(async()=>{const t=this.beforeRenderEvent;this.dispatchEvent(t)&&(await Gt(),await t.detail.render(this))})())}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(t=>t.remove())}get duplicateChildren(){var n;const t=this.targetElements.flatMap(r=>[...r.children]).filter(r=>!!r.id),i=[...((n=this.templateContent)==null?void 0:n.children)||[]].filter(r=>!!r.id).map(r=>r.id);return t.filter(r=>i.includes(r.id))}get performAction(){if(this.action){const t=Ga[this.action];if(t)return t;B(this,Ct,fi).call(this,"unknown action")}B(this,Ct,fi).call(this,"action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;B(this,Ct,fi).call(this,"target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){const t=this.ownerDocument.createElement("template");return this.appendChild(t),t}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;B(this,Ct,fi).call(this,"first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:fr2.renderElement}})}get targetElementsById(){var i;const t=(i=this.ownerDocument)==null?void 0:i.getElementById(this.target);return t!==null?[t]:[]}get targetElementsByQuery(){var i;const t=(i=this.ownerDocument)==null?void 0:i.querySelectorAll(this.targets);return t.length!==0?Array.prototype.slice.call(t):[]}};Ct=new WeakSet,fi=function(t){throw new Error(`${this.description}: ${t}`)};let Yn=fr;class Vu extends HTMLElement{constructor(){super(...arguments),S(this,"streamSource",null)}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),_a(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),Da(this.streamSource))}get src(){return this.getAttribute("src")||""}}Ge.delegateConstructor=Du,customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",Ge),customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",Yn),customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",Vu),(()=>{let s=document.currentScript;if(s&&!s.hasAttribute("data-turbo-suppress-warning"))for(s=s.parentElement;s;){if(s==document.body)return console.warn(la`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,s.outerHTML);s=s.parentElement}})(),window.Turbo={...Bu,StreamActions:Ga},Ba(),SVGInject.setOptions({onFail:function(s,e){s.classList.remove("injectable")}}),window.shouldPreserveScroll=!1,addEventListener("turbo:load",s=>{SVGInject(document.querySelectorAll("img.injectable")),X.bind("[data-fancybox], .fancybox",{backdropClick:"close",Carousel:{transition:"crossfade",preload:2},Hash:!1,Thumbs:{type:"classic"},Toolbar:{display:{left:[],middle:[],right:["close"]}}}),window.document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0,cancelable:!0}));for(const t of document.querySelectorAll(".loading"))t.classList.remove("loading");const e=document.getElementById("nav_search");document.activeElement==e&&e.blur();for(const t of document.querySelectorAll('video[autoplay="autoplay"]'))t.muted=!0,t.play();for(const t of document.querySelectorAll("video.should-autoplay"))t.muted=!0,t.setAttribute("autoplay","autoplay");for(const t of document.querySelectorAll(".return-to"))if("currentVisit"in Tt&&"referrer"in Tt.currentVisit&&Tt.currentVisit.referrer!==void 0){let i=Tt.currentVisit.referrer.toString();i=i.replace(Tt.currentVisit.location.origin,""),i=i.replace("account/login",""),t.value=i}}),addEventListener("turbo:before-render",s=>{if(document.getElementById("product_ce_background")){let e=s.detail.newBody.querySelector("#product_ce_background");e&&e.classList.add("!animate-none")}}),addEventListener("turbo:render",s=>{window.shouldPreserveScroll&&(Tt.currentVisit.scrolled=!0,window.shouldPreserveScroll=!1)}),addEventListener("turbo:frame-load",s=>{for(const e of document.querySelectorAll(".loading"))e.classList.remove("loading")}),addEventListener("turbo:before-cache",s=>{window.document.dispatchEvent(new Event("beforeCache",{bubbles:!0,cancelable:!0}));for(const e of document.querySelectorAll("video"))e.pause(),e.removeAttribute("autoplay"),e.classList.add("should-autoplay")});
//# sourceMappingURL=/cdn/shop/t/59/assets/main-16c2ee43.js.map